# EvalVault ì•„í‚¤í…ì²˜ ê°€ì´ë“œ

> **Hexagonal Architecture (Ports & Adapters) + Clean Architecture + Domain-Driven Design ê¸°ë°˜**

ì´ ë¬¸ì„œëŠ” EvalVaultì˜ ì•„í‚¤í…ì²˜ë¥¼ ë§¤ìš° ìƒì„¸í•˜ê²Œ ì„¤ëª…í•˜ëŠ” í•™ìŠµ êµê³¼ì„œì…ë‹ˆë‹¤. ì†Œí”„íŠ¸ì›¨ì–´ ì•„í‚¤í…ì²˜ ë°©ë²•ë¡ , ì„¤ê³„ ì›ì¹™, ë°ì´í„° íë¦„, ê° ì»´í¬ë„ŒíŠ¸ì˜ ì—­í• ê³¼ ì±…ì„ì„ ë‹¤ë£¹ë‹ˆë‹¤.

## ğŸ“š ê´€ë ¨ ë¬¸ì„œ

| ë¬¸ì„œ | ì—­í•  | ì„¤ëª… |
|------|------|------|
| **[ARCHITECTURE.md](./ARCHITECTURE.md)** (ì´ ë¬¸ì„œ) | ë©”ì¸ ì•„í‚¤í…ì²˜ ê°€ì´ë“œ | ìƒì„¸í•œ ì•„í‚¤í…ì²˜ ì„¤ëª…, ì„¤ê³„ ì›ì¹™, ë°ì´í„° íë¦„ |
| [internal/reference/ARCHITECTURE_C4.md](../internal/reference/ARCHITECTURE_C4.md) | C4 ë‹¤ì´ì–´ê·¸ë¨ | C4 Model ê¸°ë°˜ ê³„ì¸µì  ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨ |
| [internal/reference/CLASS_CATALOG.md](../internal/reference/CLASS_CATALOG.md) | í´ë˜ìŠ¤ ì¹´íƒˆë¡œê·¸ | ëª¨ë“  í´ë˜ìŠ¤ì˜ ì—­í• ë³„/í”„ë¡œì„¸ìŠ¤ë³„ ë¶„ë¥˜ |
| [internal/reference/DEVELOPMENT_GUIDE.md](../internal/reference/DEVELOPMENT_GUIDE.md) | ê°œë°œ ê°€ì´ë“œ | ê°œë°œ í™˜ê²½, ì½”ë“œ í’ˆì§ˆ, ì—ì´ì „íŠ¸ ì‹œìŠ¤í…œ |
| [internal/reference/FEATURE_SPECS.md](../internal/reference/FEATURE_SPECS.md) | ê¸°ëŠ¥ ìŠ¤í™ | í•œêµ­ì–´ RAG, Phoenix, Domain Memory ë“± ìƒì„¸ |

---

## ëª©ì°¨

1. [ì•„í‚¤í…ì²˜ ê°œìš”](#1-ì•„í‚¤í…ì²˜-ê°œìš”)
2. [ë°©ë²•ë¡  ê¸°ë°˜: Hexagonal Architecture](#2-ë°©ë²•ë¡ -ê¸°ë°˜-hexagonal-architecture)
3. [ê³„ì¸µë³„ ìƒì„¸ ë¶„ì„](#3-ê³„ì¸µë³„-ìƒì„¸-ë¶„ì„)
4. [ë°ì´í„° íë¦„ ë¶„ì„](#4-ë°ì´í„°-íë¦„-ë¶„ì„)
5. [ì„¤ê³„ íŒ¨í„´ê³¼ ì›ì¹™](#5-ì„¤ê³„-íŒ¨í„´ê³¼-ì›ì¹™)
6. [ì˜ì¡´ì„± ê´€ë¦¬](#6-ì˜ì¡´ì„±-ê´€ë¦¬)
7. [í™•ì¥ì„±ê³¼ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥ì„±](#7-í™•ì¥ì„±ê³¼-í…ŒìŠ¤íŠ¸-ê°€ëŠ¥ì„±)

---

## 1. ì•„í‚¤í…ì²˜ ê°œìš”

### 1.1 ì „ì²´ êµ¬ì¡° ë‹¤ì´ì–´ê·¸ë¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              EVALVAULT ARCHITECTURE                                  â”‚
â”‚                        (Hexagonal Architecture / Ports & Adapters)                   â”‚
â”‚                                                                                      â”‚
â”‚  ì´ ì•„í‚¤í…ì²˜ëŠ” Alistair Cockburnì˜ Hexagonal Architectureì™€ Robert C. Martinì˜      â”‚
â”‚  Clean Architecture ì›ì¹™ì„ ê²°í•©í•˜ì—¬, ë„ë©”ì¸ ë¡œì§ì„ ì™¸ë¶€ ì˜ì¡´ì„±ìœ¼ë¡œë¶€í„° ì™„ì „íˆ        â”‚
â”‚  ê²©ë¦¬í•˜ê³  í…ŒìŠ¤íŠ¸ ê°€ëŠ¥í•˜ë©° í™•ì¥ ê°€ëŠ¥í•œ ì‹œìŠ¤í…œì„ êµ¬ì¶•í•©ë‹ˆë‹¤.                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                  ADAPTERS LAYER                                      â”‚
â”‚                          (ì™¸ë¶€ ì„¸ê³„ì™€ì˜ ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„)                              â”‚
â”‚                                                                                      â”‚
â”‚  ì–´ëŒ‘í„°ëŠ” ì™¸ë¶€ ì‹œìŠ¤í…œ(CLI, íŒŒì¼ ì‹œìŠ¤í…œ, LLM API, ë°ì´í„°ë² ì´ìŠ¤ ë“±)ê³¼ ë„ë©”ì¸         â”‚
â”‚  ê³„ì¸µ ì‚¬ì´ì˜ ë³€í™˜ ê³„ì¸µì…ë‹ˆë‹¤. ì–´ëŒ‘í„°ëŠ” í¬íŠ¸ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ì—¬ ë„ë©”ì¸ê³¼ í†µì‹ í•©ë‹ˆë‹¤. â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      INBOUND ADAPTERS             â”‚                    â”‚      OUTBOUND ADAPTERS            â”‚
â”‚   (ì…ë ¥ ì–´ëŒ‘í„° - ì‚¬ìš©ì ì…ë ¥)      â”‚                    â”‚   (ì¶œë ¥ ì–´ëŒ‘í„° - ì™¸ë¶€ ì‹œìŠ¤í…œ)      â”‚
â”‚                                                                                              â”‚
â”‚  ëª©ì : ì™¸ë¶€ì—ì„œ ë“¤ì–´ì˜¤ëŠ” ìš”ì²­ì„    â”‚                    â”‚  ëª©ì : ë„ë©”ì¸ì´ í•„ìš”ë¡œ í•˜ëŠ”       â”‚
â”‚        ë„ë©”ì¸ ì„œë¹„ìŠ¤ë¡œ ë³€í™˜         â”‚                    â”‚        ì™¸ë¶€ ì„œë¹„ìŠ¤ë¥¼ ì œê³µ          â”‚
â”‚                                                                                              â”‚
â”‚  ì±…ì„:                              â”‚                    â”‚  ì±…ì„:                             â”‚
â”‚  - CLI ëª…ë ¹ íŒŒì‹±                    â”‚                    â”‚  - íŒŒì¼ ì‹œìŠ¤í…œ ì ‘ê·¼                â”‚
â”‚  - ì‚¬ìš©ì ì…ë ¥ ê²€ì¦                 â”‚                    â”‚  - LLM API í˜¸ì¶œ                    â”‚
â”‚  - ë„ë©”ì¸ ì„œë¹„ìŠ¤ í˜¸ì¶œ               â”‚                    â”‚  - ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬              â”‚
â”‚  - ê²°ê³¼ í¬ë§·íŒ… ë° ì¶œë ¥              â”‚                    â”‚  - ì¶”ì  ì‹œìŠ¤í…œ ì—°ë™                â”‚
â”‚                                                                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                   â”‚                    â”‚                                   â”‚
â”‚  adapters/inbound/                â”‚                    â”‚  adapters/outbound/               â”‚
â”‚  â”œâ”€â”€ __init__.py                  â”‚                    â”‚  â”œâ”€â”€ __init__.py                  â”‚
â”‚  â”œâ”€â”€ cli.py                       â”‚                    â”‚  â”œâ”€â”€ dataset/                     â”‚
â”‚  â”‚   â””â”€â”€ Typer ê¸°ë°˜ CLI            â”‚                    â”‚  â”‚   â”œâ”€â”€ __init__.py              â”‚
â”‚  â”‚       - run ëª…ë ¹                â”‚                    â”‚  â”‚   â”œâ”€â”€ base.py                  â”‚
â”‚  â”‚       - generate ëª…ë ¹           â”‚                    â”‚  â”‚   â”œâ”€â”€ csv_loader.py             â”‚
â”‚  â”‚       - history ëª…ë ¹             â”‚                    â”‚  â”‚   â”œâ”€â”€ excel_loader.py           â”‚
â”‚  â”‚       - compare ëª…ë ¹             â”‚                    â”‚  â”‚   â”œâ”€â”€ json_loader.py            â”‚
â”‚  â”‚       - experiment ëª…ë ¹ë“¤        â”‚                    â”‚  â”‚   â””â”€â”€ loader_factory.py        â”‚
â”‚  â”‚       - pipeline ëª…ë ¹            â”‚                    â”‚  â”‚                                 â”‚
â”‚  â”‚       - benchmark ëª…ë ¹          â”‚                    â”‚  â”œâ”€â”€ llm/                          â”‚
â”‚  â”‚       - domain ëª…ë ¹              â”‚                    â”‚  â”‚   â”œâ”€â”€ __init__.py               â”‚
â”‚  â”‚                                 â”‚                    â”‚  â”‚   â”œâ”€â”€ anthropic_adapter.py      â”‚
â”‚  â”‚  â””â”€â”€ web/                       â”‚                    â”‚  â”‚   â”œâ”€â”€ azure_adapter.py          â”‚
â”‚  â”‚      â”œâ”€â”€ adapter.py             â”‚                    â”‚  â”‚   â”œâ”€â”€ ollama_adapter.py         â”‚
â”‚  â”‚      â”œâ”€â”€ app.py                â”‚                    â”‚  â”‚   â”œâ”€â”€ openai_adapter.py         â”‚
â”‚  â”‚      â”œâ”€â”€ components/           â”‚                    â”‚  â”‚   â”œâ”€â”€ vllm_adapter.py           â”‚
â”‚  â”‚      â”‚   â”œâ”€â”€ cards.py          â”‚                    â”‚  â”‚   â””â”€â”€ llm_relation_augmenter.py â”‚
â”‚  â”‚      â”‚   â”œâ”€â”€ cards.py          â”‚                    â”‚  â”‚                                 â”‚
â”‚  â”‚      â”‚   â”œâ”€â”€ charts.py         â”‚                    â”‚  â”œâ”€â”€ storage/                      â”‚
â”‚  â”‚      â”‚   â”œâ”€â”€ evaluate.py       â”‚                    â”‚  â”‚   â”œâ”€â”€ __init__.py               â”‚
â”‚  â”‚      â”‚   â”œâ”€â”€ history.py        â”‚                    â”‚  â”‚   â”œâ”€â”€ postgres_adapter.py       â”‚
â”‚  â”‚      â”‚   â”œâ”€â”€ reports.py        â”‚                    â”‚  â”‚   â”œâ”€â”€ sqlite_adapter.py         â”‚
â”‚  â”‚      â”‚   â””â”€â”€ upload.py         â”‚                    â”‚  â”‚   â”œâ”€â”€ postgres_schema.sql       â”‚
â”‚  â”‚      â””â”€â”€ session.py            â”‚                    â”‚  â”‚   â””â”€â”€ schema.sql                   â”‚
â”‚                                   â”‚                    â”‚  â”‚                                 â”‚
â”‚                                   â”‚                    â”‚  â”œâ”€â”€ tracker/                      â”‚
â”‚                                   â”‚                    â”‚  â”‚   â”œâ”€â”€ __init__.py               â”‚
â”‚                                   â”‚                    â”‚  â”‚   â”œâ”€â”€ langfuse_adapter.py       â”‚
â”‚                                   â”‚                    â”‚  â”‚   â”œâ”€â”€ mlflow_adapter.py         â”‚
â”‚                                   â”‚                    â”‚  â”‚   â””â”€â”€ phoenix_adapter.py        â”‚
â”‚                                   â”‚                    â”‚  â”‚                                 â”‚
â”‚                                   â”‚                    â”‚  â”œâ”€â”€ analysis/                     â”‚
â”‚                                   â”‚                    â”‚  â”‚   â”œâ”€â”€ statistical_adapter.py    â”‚
â”‚                                   â”‚                    â”‚  â”‚   â”œâ”€â”€ nlp_adapter.py            â”‚
â”‚                                   â”‚                    â”‚  â”‚   â”œâ”€â”€ causal_adapter.py         â”‚
â”‚                                   â”‚                    â”‚  â”‚   â””â”€â”€ [ë¶„ì„ ëª¨ë“ˆë“¤]              â”‚
â”‚                                   â”‚                    â”‚  â”‚                                 â”‚
â”‚                                   â”‚                    â”‚  â”œâ”€â”€ cache/                        â”‚
â”‚                                   â”‚                    â”‚  â”‚   â””â”€â”€ memory_cache.py            â”‚
â”‚                                   â”‚                    â”‚  â”‚                                 â”‚
â”‚                                   â”‚                    â”‚  â”œâ”€â”€ domain_memory/                â”‚
â”‚                                   â”‚                    â”‚  â”‚   â”œâ”€â”€ sqlite_adapter.py         â”‚
â”‚                                   â”‚                    â”‚  â”‚   â””â”€â”€ domain_memory_schema.sql  â”‚
â”‚                                   â”‚                    â”‚  â”‚                                 â”‚
â”‚                                   â”‚                    â”‚  â”œâ”€â”€ improvement/                  â”‚
â”‚                                   â”‚                    â”‚  â”‚   â”œâ”€â”€ pattern_detector.py         â”‚
â”‚                                   â”‚                    â”‚  â”‚   â”œâ”€â”€ insight_generator.py      â”‚
â”‚                                   â”‚                    â”‚  â”‚   â””â”€â”€ playbook_loader.py         â”‚
â”‚                                   â”‚                    â”‚  â”‚                                 â”‚
â”‚                                   â”‚                    â”‚  â”œâ”€â”€ nlp/                           â”‚
â”‚                                   â”‚                    â”‚  â”‚   â””â”€â”€ korean/                    â”‚
â”‚                                   â”‚                    â”‚  â”‚       â”œâ”€â”€ bm25_retriever.py     â”‚
â”‚                                   â”‚                    â”‚  â”‚       â”œâ”€â”€ dense_retriever.py    â”‚
â”‚                                   â”‚                    â”‚  â”‚       â””â”€â”€ hybrid_retriever.py   â”‚
â”‚                                   â”‚                    â”‚  â”‚                                 â”‚
â”‚                                   â”‚                    â”‚  â””â”€â”€ report/                        â”‚
â”‚                                   â”‚                    â”‚      â”œâ”€â”€ llm_report_generator.py   â”‚
â”‚                                   â”‚                    â”‚      â””â”€â”€ markdown_adapter.py      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                                                          â”‚
         â”‚                                                          â”‚
         â”‚  [ì˜ì¡´ì„± ë°©í–¥: ì–´ëŒ‘í„° â†’ í¬íŠ¸]                             â”‚
         â”‚                                                          â”‚
         â–¼                                                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                    PORTS LAYER                                       â”‚
â”‚                          (ì¸í„°í˜ì´ìŠ¤ ì •ì˜ - ê³„ì•½)                                     â”‚
â”‚                                                                                      â”‚
â”‚  í¬íŠ¸ëŠ” ë„ë©”ì¸ê³¼ ì™¸ë¶€ ì„¸ê³„ ì‚¬ì´ì˜ ê³„ì•½(Contract)ì„ ì •ì˜í•©ë‹ˆë‹¤. í¬íŠ¸ëŠ” ì¸í„°í˜ì´ìŠ¤     â”‚
â”‚  ë˜ëŠ” í”„ë¡œí† ì½œë¡œ ì •ì˜ë˜ë©°, ë„ë©”ì¸ì€ í¬íŠ¸ë¥¼ í†µí•´ ì™¸ë¶€ ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.           â”‚
â”‚                                                                                      â”‚
â”‚  í•µì‹¬ ì›ì¹™:                                                                          â”‚
â”‚  - í¬íŠ¸ëŠ” ë„ë©”ì¸ ê³„ì¸µì— ì†í•¨                                                         â”‚
â”‚  - í¬íŠ¸ëŠ” "ë¬´ì—‡ì„" ì •ì˜í•˜ì§€ë§Œ "ì–´ë–»ê²Œ"ëŠ” ì •ì˜í•˜ì§€ ì•ŠìŒ                               â”‚
â”‚  - ì–´ëŒ‘í„°ëŠ” í¬íŠ¸ë¥¼ êµ¬í˜„í•¨                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      INBOUND PORTS                 â”‚                    â”‚      OUTBOUND PORTS                 â”‚
â”‚   (ì…ë ¥ í¬íŠ¸ - ì‚¬ìš© ì‚¬ë¡€ ì •ì˜)      â”‚                    â”‚   (ì¶œë ¥ í¬íŠ¸ - ì™¸ë¶€ ì˜ì¡´ì„± ì •ì˜)    â”‚
â”‚                                                                                              â”‚
â”‚  ëª©ì : ë„ë©”ì¸ì´ ì œê³µí•˜ëŠ” ê¸°ëŠ¥ì„     â”‚                    â”‚  ëª©ì : ë„ë©”ì¸ì´ í•„ìš”ë¡œ í•˜ëŠ”         â”‚
â”‚        ì™¸ë¶€ì— ë…¸ì¶œí•˜ëŠ” ì¸í„°í˜ì´ìŠ¤   â”‚                    â”‚        ì™¸ë¶€ ì„œë¹„ìŠ¤ë¥¼ ì •ì˜           â”‚
â”‚                                                                                              â”‚
â”‚  íŠ¹ì§•:                              â”‚                    â”‚  íŠ¹ì§•:                              â”‚
â”‚  - Protocol ê¸°ë°˜ (Python typing)    â”‚                    â”‚  - ABC ë˜ëŠ” Protocol ê¸°ë°˜          â”‚
â”‚  - ë„ë©”ì¸ ì„œë¹„ìŠ¤ê°€ êµ¬í˜„              â”‚                    â”‚  - ì–´ëŒ‘í„°ê°€ êµ¬í˜„                   â”‚
â”‚  - ì–´ëŒ‘í„°ê°€ í˜¸ì¶œ                     â”‚                    â”‚  - ë„ë©”ì¸ ì„œë¹„ìŠ¤ê°€ ì‚¬ìš©            â”‚
â”‚                                                                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                   â”‚                    â”‚                                   â”‚
â”‚  ports/inbound/                   â”‚                    â”‚  ports/outbound/                 â”‚
â”‚  â”œâ”€â”€ __init__.py                  â”‚                    â”‚  â”œâ”€â”€ __init__.py                  â”‚
â”‚  â”œâ”€â”€ evaluator_port.py            â”‚                    â”‚  â”œâ”€â”€ dataset_port.py               â”‚
â”‚  â”‚   â””â”€â”€ EvaluatorPort            â”‚                    â”‚  â”‚   â””â”€â”€ DatasetPort               â”‚
â”‚  â”‚       Protocol {                â”‚                    â”‚  â”‚       Protocol {                â”‚
â”‚  â”‚         evaluate()               â”‚                    â”‚  â”‚         load()                  â”‚
â”‚  â”‚       }                         â”‚                    â”‚  â”‚         supports()             â”‚
â”‚  â”‚                                 â”‚                    â”‚  â”‚       }                          â”‚
â”‚  â”œâ”€â”€ analysis_pipeline_port.py    â”‚                    â”‚  â”‚                                 â”‚
â”‚  â”‚   â””â”€â”€ AnalysisPipelinePort    â”‚                    â”‚  â”œâ”€â”€ llm_port.py                     â”‚
â”‚  â”‚       Protocol {                â”‚                    â”‚  â”‚   â””â”€â”€ LLMPort                   â”‚
â”‚  â”‚         build_pipeline()         â”‚                    â”‚  â”‚       ABC {                     â”‚
â”‚  â”‚         execute()                â”‚                    â”‚  â”‚         get_model_name()        â”‚
â”‚  â”‚       }                         â”‚                    â”‚  â”‚         as_ragas_llm()          â”‚
â”‚  â”‚                                 â”‚                    â”‚  â”‚       }                          â”‚
â”‚  â”œâ”€â”€ learning_hook_port.py        â”‚                    â”‚  â”‚                                 â”‚
â”‚  â”‚   â””â”€â”€ LearningHookPort         â”‚                    â”‚  â”œâ”€â”€ storage_port.py               â”‚
â”‚  â”‚                                 â”‚                    â”‚  â”‚   â””â”€â”€ StoragePort               â”‚
â”‚  â””â”€â”€ web_port.py                  â”‚                    â”‚  â”‚       Protocol {                 â”‚
â”‚      â””â”€â”€ WebUIPort                 â”‚                    â”‚  â”‚         save_run()              â”‚
â”‚                                                           â”‚  â”‚         get_run()               â”‚
â”‚                                   â”‚                    â”‚  â”‚         list_runs()              â”‚
â”‚                                   â”‚                    â”‚  â”‚       }                          â”‚
â”‚                                   â”‚                    â”‚  â”‚                                 â”‚
â”‚                                   â”‚                    â”‚  â”œâ”€â”€ tracker_port.py               â”‚
â”‚                                   â”‚                    â”‚  â”‚   â””â”€â”€ TrackerPort                â”‚
â”‚                                   â”‚                    â”‚  â”‚       Protocol {                 â”‚
â”‚                                   â”‚                    â”‚  â”‚         start_trace()           â”‚
â”‚                                   â”‚                    â”‚  â”‚         log_evaluation_run()    â”‚
â”‚                                   â”‚                    â”‚  â”‚       }                          â”‚
â”‚                                   â”‚                    â”‚  â”‚                                 â”‚
â”‚                                   â”‚                    â”‚  â”œâ”€â”€ analysis_port.py              â”‚
â”‚                                   â”‚                    â”‚  â”‚   â””â”€â”€ AnalysisPort              â”‚
â”‚                                   â”‚                    â”‚  â”‚                                 â”‚
â”‚                                   â”‚                    â”‚  â”œâ”€â”€ analysis_module_port.py       â”‚
â”‚                                   â”‚                    â”‚  â”‚   â””â”€â”€ AnalysisModulePort        â”‚
â”‚                                   â”‚                    â”‚  â”‚                                 â”‚
â”‚                                   â”‚                    â”‚  â”œâ”€â”€ analysis_cache_port.py         â”‚
â”‚                                   â”‚                    â”‚  â”‚   â””â”€â”€ AnalysisCachePort         â”‚
â”‚                                   â”‚                    â”‚  â”‚                                 â”‚
â”‚                                   â”‚                    â”‚  â”œâ”€â”€ nlp_analysis_port.py          â”‚
â”‚                                   â”‚                    â”‚  â”‚   â””â”€â”€ NLPAnalysisPort           â”‚
â”‚                                   â”‚                    â”‚  â”‚                                 â”‚
â”‚                                   â”‚                    â”‚  â”œâ”€â”€ causal_analysis_port.py       â”‚
â”‚                                   â”‚                    â”‚  â”‚   â””â”€â”€ CausalAnalysisPort       â”‚
â”‚                                   â”‚                    â”‚  â”‚                                 â”‚
â”‚                                   â”‚                    â”‚  â”œâ”€â”€ domain_memory_port.py         â”‚
â”‚                                   â”‚                    â”‚  â”‚   â””â”€â”€ DomainMemoryPort          â”‚
â”‚                                   â”‚                    â”‚  â”‚       (Factual/Experiential/    â”‚
â”‚                                   â”‚                    â”‚  â”‚        Behavior ë ˆì´ì–´)         â”‚
â”‚                                   â”‚                    â”‚  â”‚                                 â”‚
â”‚                                   â”‚                    â”‚  â”œâ”€â”€ improvement_port.py           â”‚
â”‚                                   â”‚                    â”‚  â”‚   â””â”€â”€ PatternDetectorPort       â”‚
â”‚                                   â”‚                    â”‚  â”‚   â””â”€â”€ InsightGeneratorPort      â”‚
â”‚                                   â”‚                    â”‚  â”‚   â””â”€â”€ PlaybookPort              â”‚
â”‚                                   â”‚                    â”‚  â”‚                                 â”‚
â”‚                                   â”‚                    â”‚  â”œâ”€â”€ korean_nlp_port.py            â”‚
â”‚                                   â”‚                    â”‚  â”‚   â””â”€â”€ KoreanNLPPort            â”‚
â”‚                                   â”‚                    â”‚  â”‚                                 â”‚
â”‚                                   â”‚                    â”‚  â”œâ”€â”€ embedding_port.py             â”‚
â”‚                                   â”‚                    â”‚  â”‚   â””â”€â”€ EmbeddingPort            â”‚
â”‚                                   â”‚                    â”‚  â”‚                                 â”‚
â”‚                                   â”‚                    â”‚  â”œâ”€â”€ relation_augmenter_port.py   â”‚
â”‚                                   â”‚                    â”‚  â”‚   â””â”€â”€ RelationAugmenterPort    â”‚
â”‚                                   â”‚                    â”‚  â”‚                                 â”‚
â”‚                                   â”‚                    â”‚  â”œâ”€â”€ intent_classifier_port.py     â”‚
â”‚                                   â”‚                    â”‚  â”‚   â””â”€â”€ IntentClassifierPort      â”‚
â”‚                                   â”‚                    â”‚  â”‚                                 â”‚
â”‚                                   â”‚                    â”‚  â””â”€â”€ report_port.py                â”‚
â”‚                                   â”‚                    â”‚      â””â”€â”€ ReportPort                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                                                          â”‚
         â”‚                                                          â”‚
         â”‚  [ì˜ì¡´ì„± ë°©í–¥: ë„ë©”ì¸ â†’ í¬íŠ¸]                             â”‚
         â”‚                                                          â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                  DOMAIN LAYER                                        â”‚
â”‚                          (í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§)                                        â”‚
â”‚                                                                                      â”‚
â”‚  ë„ë©”ì¸ ê³„ì¸µì€ ì‹œìŠ¤í…œì˜ í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ í¬í•¨í•©ë‹ˆë‹¤. ì´ ê³„ì¸µì€ ì™¸ë¶€ ì˜ì¡´ì„±ì—    â”‚
â”‚  ëŒ€í•´ ì „í˜€ ì•Œì§€ ëª»í•˜ë©°, ì˜¤ì§ í¬íŠ¸ ì¸í„°í˜ì´ìŠ¤ë¥¼ í†µí•´ì„œë§Œ ì™¸ë¶€ì™€ í†µì‹ í•©ë‹ˆë‹¤.          â”‚
â”‚                                                                                      â”‚
â”‚  í•µì‹¬ ì›ì¹™:                                                                          â”‚
â”‚  - ìˆœìˆ˜í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ë§Œ í¬í•¨                                                       â”‚
â”‚  - ì™¸ë¶€ í”„ë ˆì„ì›Œí¬ë‚˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ì˜ì¡´í•˜ì§€ ì•ŠìŒ                                      â”‚
â”‚  - í…ŒìŠ¤íŠ¸ ê°€ëŠ¥í•˜ë©° ë…ë¦½ì ìœ¼ë¡œ ì‹¤í–‰ ê°€ëŠ¥                                              â”‚
â”‚  - ë„ë©”ì¸ ì „ë¬¸ê°€ê°€ ì´í•´í•  ìˆ˜ ìˆëŠ” ì–¸ì–´ë¡œ ì‘ì„±                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  domain/                                                                            â”‚
â”‚  â”œâ”€â”€ __init__.py                                                                    â”‚
â”‚  â”‚                                                                                  â”‚
â”‚  â”œâ”€â”€ entities/                          (ë„ë©”ì¸ ì—”í‹°í‹° - Rich Domain Model)         â”‚
â”‚  â”‚   â”œâ”€â”€ __init__.py                                                               â”‚
â”‚  â”‚   â”œâ”€â”€ dataset.py                    â”€ Dataset ì—”í‹°í‹°                             â”‚
â”‚  â”‚   â”‚   â””â”€â”€ TestCase, Dataset í´ë˜ìŠ¤                                               â”‚
â”‚  â”‚   â”‚       - ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ í¬í•¨                                                    â”‚
â”‚  â”‚   â”‚       - ë¶ˆë³€ì„± ë³´ì¥                                                           â”‚
â”‚  â”‚   â”‚       - ë„ë©”ì¸ ì´ë²¤íŠ¸ ë°œìƒ ê°€ëŠ¥                                                â”‚
â”‚  â”‚   â”‚                                                                              â”‚
â”‚  â”‚   â”œâ”€â”€ experiment.py                 â”€ Experiment ì—”í‹°í‹°                          â”‚
â”‚  â”‚   â”‚   â””â”€â”€ Experiment, ExperimentGroup                                             â”‚
â”‚  â”‚   â”‚       - A/B í…ŒìŠ¤íŠ¸ ê´€ë¦¬                                                       â”‚
â”‚  â”‚   â”‚       - ê·¸ë£¹ë³„ ë©”íŠ¸ë¦­ ë¹„êµ                                                    â”‚
â”‚  â”‚   â”‚                                                                              â”‚
â”‚  â”‚   â”œâ”€â”€ result.py                     â”€ Result ì—”í‹°í‹°                              â”‚
â”‚  â”‚   â”‚   â””â”€â”€ EvaluationRun, TestCaseResult, MetricScore                            â”‚
â”‚  â”‚   â”‚       - í‰ê°€ ê²°ê³¼ ì§‘ê³„                                                        â”‚
â”‚  â”‚   â”‚       - í†µê³¼/ì‹¤íŒ¨ íŒì •                                                        â”‚
â”‚  â”‚   â”‚       - ë©”íŠ¸ë¦­ ì ìˆ˜ ê´€ë¦¬                                                      â”‚
â”‚  â”‚   â”‚                                                                              â”‚
â”‚  â”‚   â”œâ”€â”€ analysis.py                    â”€ Analysis ì—”í‹°í‹°                           â”‚
â”‚  â”‚   â”‚   â””â”€â”€ AnalysisBundle, ComparisonResult, MetaAnalysisResult                   â”‚
â”‚  â”‚   â”‚       - í†µê³„/NLP/ì¸ê³¼ ë¶„ì„ ê²°ê³¼                                               â”‚
â”‚  â”‚   â”‚       - ë¹„êµ ë° ë©”íƒ€ ë¶„ì„                                                     â”‚
â”‚  â”‚   â”‚                                                                              â”‚
â”‚  â”‚   â”œâ”€â”€ analysis_pipeline.py           â”€ Analysis Pipeline ì—”í‹°í‹°                 â”‚
â”‚  â”‚   â”‚   â””â”€â”€ AnalysisPipeline, AnalysisNode, AnalysisContext                        â”‚
â”‚  â”‚   â”‚       - DAG ê¸°ë°˜ ë¶„ì„ íŒŒì´í”„ë¼ì¸                                              â”‚
â”‚  â”‚   â”‚       - ì˜ë„ ë¶„ë¥˜ ë° í…œí”Œë¦¿ ê´€ë¦¬                                              â”‚
â”‚  â”‚   â”‚                                                                              â”‚
â”‚  â”‚   â”œâ”€â”€ benchmark.py                  â”€ Benchmark ì—”í‹°í‹°                         â”‚
â”‚  â”‚   â”‚   â””â”€â”€ BenchmarkRun, BenchmarkResult                                          â”‚
â”‚  â”‚   â”‚       - ë²¤ì¹˜ë§ˆí¬ ì‹¤í–‰ ë° ê²°ê³¼                                                 â”‚
â”‚  â”‚   â”‚                                                                              â”‚
â”‚  â”‚   â”œâ”€â”€ improvement.py                 â”€ Improvement ì—”í‹°í‹°                        â”‚
â”‚  â”‚   â”‚   â””â”€â”€ ImprovementReport, ImprovementAction, PatternEvidence                 â”‚
â”‚  â”‚   â”‚       - ê°œì„  ê°€ì´ë“œ ë° ì•¡ì…˜                                                  â”‚
â”‚  â”‚   â”‚       - íŒ¨í„´ íƒì§€ ê²°ê³¼                                                        â”‚
â”‚  â”‚   â”‚                                                                              â”‚
â”‚  â”‚   â”œâ”€â”€ kg.py                          â”€ Knowledge Graph ì—”í‹°í‹°                     â”‚
â”‚  â”‚   â”‚   â””â”€â”€ KnowledgeGraph, Entity, Relation                                       â”‚
â”‚  â”‚   â”‚       - ì§€ì‹ ê·¸ë˜í”„ êµ¬ì¡°                                                     â”‚
â”‚  â”‚   â”‚       - ì—”í‹°í‹° ë° ê´€ê³„ í‘œí˜„                                                   â”‚
â”‚  â”‚   â”‚                                                                              â”‚
â”‚  â”‚   â”œâ”€â”€ rag_trace.py                   â”€ RAG Trace ì—”í‹°í‹°                           â”‚
â”‚  â”‚   â”‚   â””â”€â”€ RetrievalData, GenerationData, RAGTraceData                            â”‚
â”‚  â”‚   â”‚       - Phoenix/OpenTelemetry span ì†ì„± ë§¤í•‘                                 â”‚
â”‚  â”‚   â”‚       - ê²€ìƒ‰/ìƒì„± ë‹¨ê³„ ë ˆì´í„´ì‹œ ë° í† í° ì‚¬ìš© ë¶„ì„                            â”‚
â”‚  â”‚   â”‚                                                                              â”‚
â”‚  â”‚   â””â”€â”€ memory.py                      â”€ Domain Memory ì—”í‹°í‹°                       â”‚
â”‚  â”‚       â””â”€â”€ FactualFact, LearningMemory, BehaviorEntry                             â”‚
â”‚  â”‚           - ë„ë©”ì¸ ë©”ëª¨ë¦¬ (Factual/Experiential/Behavior)                        â”‚
â”‚  â”‚           - Formation/Evolution/Retrieval dynamics                               â”‚
â”‚  â”‚                                                                                  â”‚
â”‚  â”œâ”€â”€ metrics/                            (í‰ê°€ ë©”íŠ¸ë¦­)                                â”‚
â”‚  â”‚   â”œâ”€â”€ __init__.py                                                               â”‚
â”‚  â”‚   â”œâ”€â”€ insurance.py                  â”€ ë³´í—˜ ë„ë©”ì¸ ë©”íŠ¸ë¦­                          â”‚
â”‚  â”‚   â”‚   â””â”€â”€ InsuranceTermAccuracy                                                    â”‚
â”‚  â”‚   â”‚       - ë„ë©”ì¸ íŠ¹í™” ë©”íŠ¸ë¦­                                                     â”‚
â”‚  â”‚   â”‚       - Ragas ì™¸ë¶€ ì»¤ìŠ¤í…€ ë©”íŠ¸ë¦­                                              â”‚
â”‚  â”‚   â”‚                                                                              â”‚
â”‚  â”‚   â””â”€â”€ terms_dictionary.json        â”€ ìš©ì–´ ì‚¬ì „                                  â”‚
â”‚  â”‚       - ë„ë©”ì¸ ì§€ì‹ í‘œí˜„                                                          â”‚
â”‚  â”‚                                                                                  â”‚
â”‚  â””â”€â”€ services/                          (ë„ë©”ì¸ ì„œë¹„ìŠ¤)                               â”‚
â”‚      â”œâ”€â”€ __init__.py                                                               â”‚
â”‚      â”‚                                                                              â”‚
â”‚      â”œâ”€â”€ evaluator.py                  â”€ í‰ê°€ì ì„œë¹„ìŠ¤                               â”‚
â”‚      â”‚   â””â”€â”€ RagasEvaluator                                                         â”‚
â”‚      â”‚       - Ragas ë©”íŠ¸ë¦­ ì‹¤í–‰                                                     â”‚
â”‚      â”‚       - ì»¤ìŠ¤í…€ ë©”íŠ¸ë¦­ ì‹¤í–‰                                                    â”‚
â”‚      â”‚       - ê²°ê³¼ ì§‘ê³„ ë° ì„ê³„ê°’ íŒì •                                              â”‚
â”‚      â”‚       - í† í° ì‚¬ìš©ëŸ‰ ë° ë¹„ìš© ì¶”ì                                               â”‚
â”‚      â”‚                                                                              â”‚
â”‚      â”œâ”€â”€ entity_extractor.py           â”€ ì—”í‹°í‹° ì¶”ì¶œ ì„œë¹„ìŠ¤                         â”‚
â”‚      â”‚   â””â”€â”€ EntityExtractor                                                       â”‚
â”‚      â”‚       - ë¬¸ì„œì—ì„œ ì—”í‹°í‹° ì¶”ì¶œ                                                  â”‚
â”‚      â”‚       - ê´€ê³„ ì¶”ì¶œ                                                             â”‚
â”‚      â”‚       - ì§€ì‹ ê·¸ë˜í”„ êµ¬ì¶• ì§€ì›                                                 â”‚
â”‚      â”‚                                                                              â”‚
â”‚      â”œâ”€â”€ kg_generator.py               â”€ ì§€ì‹ ê·¸ë˜í”„ ìƒì„± ì„œë¹„ìŠ¤                     â”‚
â”‚      â”‚   â””â”€â”€ KnowledgeGraphGenerator                                                â”‚
â”‚      â”‚       - ë¬¸ì„œì—ì„œ ì§€ì‹ ê·¸ë˜í”„ ìƒì„±                                             â”‚
â”‚      â”‚       - ì—”í‹°í‹°-ê´€ê³„ ì¶”ì¶œ                                                      â”‚
â”‚      â”‚       - í…ŒìŠ¤íŠ¸ì…‹ ìƒì„±ì— í™œìš©                                                 â”‚
â”‚      â”‚                                                                              â”‚
â”‚      â”œâ”€â”€ testset_generator.py          â”€ í…ŒìŠ¤íŠ¸ì…‹ ìƒì„± ì„œë¹„ìŠ¤                       â”‚
â”‚      â”‚   â”œâ”€â”€ BasicTestsetGenerator                                                  â”‚
â”‚      â”‚   â””â”€â”€ KnowledgeGraphTestsetGenerator                                        â”‚
â”‚      â”‚       - ë¬¸ì„œì—ì„œ í‰ê°€ìš© í…ŒìŠ¤íŠ¸ì…‹ ìƒì„±                                         â”‚
â”‚      â”‚       - Strategy íŒ¨í„´ìœ¼ë¡œ ìƒì„± ë°©ë²• ì„ íƒ                                      â”‚
â”‚      â”‚                                                                              â”‚
â”‚      â”œâ”€â”€ document_chunker.py           â”€ ë¬¸ì„œ ì²­í‚¹ ì„œë¹„ìŠ¤                           â”‚
â”‚      â”‚   â””â”€â”€ DocumentChunker                                                       â”‚
â”‚      â”‚       - ë¬¸ì„œë¥¼ ì²­í¬ë¡œ ë¶„í•                                                    â”‚
â”‚      â”‚       - ì˜¤ë²„ë© ì²˜ë¦¬                                                           â”‚
â”‚      â”‚                                                                              â”‚
â”‚      â”œâ”€â”€ experiment_manager.py         â”€ ì‹¤í—˜ ê´€ë¦¬ ì„œë¹„ìŠ¤                          â”‚
â”‚      â”‚   â””â”€â”€ ExperimentManager                                                     â”‚
â”‚      â”‚       - A/B í…ŒìŠ¤íŠ¸ ê´€ë¦¬                                                       â”‚
â”‚      â”‚       - ê·¸ë£¹ë³„ ë©”íŠ¸ë¦­ ë¹„êµ                                                    â”‚
â”‚      â”‚       - ì‹¤í—˜ ê²°ë¡  ê¸°ë¡                                                        â”‚
â”‚      â”‚                                                                              â”‚
â”‚      â”œâ”€â”€ domain_learning_hook.py       â”€ ë„ë©”ì¸ í•™ìŠµ í›… ì„œë¹„ìŠ¤                     â”‚
â”‚      â”‚   â””â”€â”€ DomainLearningHook                                                    â”‚
â”‚      â”‚       - í‰ê°€ ê²°ê³¼ì—ì„œ ë©”ëª¨ë¦¬ í˜•ì„± (Formation)                                â”‚
â”‚      â”‚       - ì‚¬ì‹¤, íŒ¨í„´, í–‰ë™ ì¶”ì¶œ                                                 â”‚
â”‚      â”‚       - ë©”ëª¨ë¦¬ ì§„í™” ê´€ë¦¬ (Evolution)                                         â”‚
â”‚      â”‚                                                                              â”‚
â”‚      â”œâ”€â”€ analysis_service.py           â”€ ë¶„ì„ ì„œë¹„ìŠ¤                               â”‚
â”‚      â”‚   â””â”€â”€ AnalysisService                                                       â”‚
â”‚      â”‚       - í†µê³„ ë¶„ì„ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜                                              â”‚
â”‚      â”‚       - NLP/ì¸ê³¼ ë¶„ì„ í†µí•©                                                    â”‚
â”‚      â”‚       - ë©”íƒ€ ë¶„ì„ ë° ë¹„êµ                                                     â”‚
â”‚      â”‚                                                                              â”‚
â”‚      â”œâ”€â”€ pipeline_orchestrator.py      â”€ íŒŒì´í”„ë¼ì¸ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„°                 â”‚
â”‚      â”‚   â””â”€â”€ PipelineOrchestrator                                                  â”‚
â”‚      â”‚       - DAG ê¸°ë°˜ ë¶„ì„ íŒŒì´í”„ë¼ì¸ ì‹¤í–‰                                        â”‚
â”‚      â”‚       - ëª¨ë“ˆ ì¹´íƒˆë¡œê·¸ ë° í…œí”Œë¦¿ ê´€ë¦¬                                          â”‚
â”‚      â”‚       - ì˜ë„ ë¶„ë¥˜ ë° íŒŒì´í”„ë¼ì¸ ë¹Œë“œ                                         â”‚
â”‚      â”‚                                                                              â”‚
â”‚      â”œâ”€â”€ pipeline_template_registry.py  â”€ íŒŒì´í”„ë¼ì¸ í…œí”Œë¦¿ ë ˆì§€ìŠ¤íŠ¸ë¦¬             â”‚
â”‚      â”‚   â””â”€â”€ PipelineTemplateRegistry                                             â”‚
â”‚      â”‚       - ë¶„ì„ ì˜ë„ë³„ í…œí”Œë¦¿ ê´€ë¦¬                                              â”‚
â”‚      â”‚       - í…œí”Œë¦¿ ê²€ì¦ ë° ë“±ë¡                                                  â”‚
â”‚      â”‚                                                                              â”‚
â”‚      â”œâ”€â”€ intent_classifier.py           â”€ ì˜ë„ ë¶„ë¥˜ ì„œë¹„ìŠ¤                         â”‚
â”‚      â”‚   â””â”€â”€ KeywordIntentClassifier                                               â”‚
â”‚      â”‚       - ì‚¬ìš©ì ì¿¼ë¦¬ì—ì„œ ë¶„ì„ ì˜ë„ ì¶”ì¶œ                                       â”‚
â”‚      â”‚       - í‚¤ì›Œë“œ ê¸°ë°˜ ë¶„ë¥˜                                                     â”‚
â”‚      â”‚                                                                              â”‚
â”‚      â”œâ”€â”€ improvement_guide_service.py  â”€ ê°œì„  ê°€ì´ë“œ ì„œë¹„ìŠ¤                        â”‚
â”‚      â”‚   â””â”€â”€ ImprovementGuideService                                               â”‚
â”‚      â”‚       - ê·œì¹™ ê¸°ë°˜ íŒ¨í„´ íƒì§€                                                  â”‚
â”‚      â”‚       - LLM ê¸°ë°˜ ì¸ì‚¬ì´íŠ¸ ìƒì„±                                               â”‚
â”‚      â”‚       - í•˜ì´ë¸Œë¦¬ë“œ ë¶„ì„ ë° ë¦¬í¬íŠ¸ ìƒì„±                                       â”‚
â”‚      â”‚                                                                              â”‚
â”‚      â””â”€â”€ benchmark_runner.py           â”€ ë²¤ì¹˜ë§ˆí¬ ëŸ¬ë„ˆ ì„œë¹„ìŠ¤                      â”‚
â”‚          â””â”€â”€ BenchmarkRunner                                                       â”‚
â”‚              - í•œêµ­ì–´ RAG ë²¤ì¹˜ë§ˆí¬ ì‹¤í–‰                                             â”‚
â”‚              - ë©”íŠ¸ë¦­ ë¹„êµ ë° ë¦¬ë”ë³´ë“œ ìƒì„±                                         â”‚
â”‚                                                                                     â”‚
â”‚      â”œâ”€â”€ memory_aware_evaluator.py     â”€ ë„ë©”ì¸ ë©”ëª¨ë¦¬ ê¸°ë°˜ í‰ê°€                    â”‚
â”‚      â”‚   â””â”€â”€ MemoryAwareEvaluator                                                   â”‚
â”‚      â”‚       - DomainMemoryPort ì‹ ë¢°ë„ë¡œ threshold ìë™ ì¡°ì •                        â”‚
â”‚      â”‚       - Phoenix spanìœ¼ë¡œ ê²€ìƒ‰/ì»¨í…ìŠ¤íŠ¸ ë³´ê°•                                    â”‚
â”‚      â”‚                                                                              â”‚
â”‚      â”œâ”€â”€ memory_based_analysis.py      â”€ ë©”ëª¨ë¦¬ ê¸°ë°˜ ë¶„ì„                           â”‚
â”‚      â”‚   â””â”€â”€ MemoryBasedAnalysis                                                   â”‚
â”‚      â”‚       - ê³¼ê±° LearningMemoryì™€ í˜„ì¬ EvaluationRun ë¹„êµ                        â”‚
â”‚      â”‚       - í–‰ë™ íŒ¨í„´ ì¬ì‚¬ìš©, ì¶”ì²œë¬¸ ìƒì„±                                        â”‚
â”‚      â”‚                                                                              â”‚
â”‚      â”œâ”€â”€ domain_learning_hook.py       â”€ Formation dynamics ì—”íŠ¸ë¦¬                  â”‚
â”‚      â”‚   â””â”€â”€ DomainLearningHook                                                    â”‚
â”‚      â”‚       - í‰ê°€ ì¢…ë£Œ í›„ Facts/Learnings/Behaviors ì¶”ì¶œ ë° ì €ì¥                  â”‚
â”‚      â”‚       - ì¤‘ë³µ fact ê°±ì‹ Â·ë§ê° ì •ì±… ì ìš©                                       â”‚
â”‚      â”‚                                                                              â”‚
â”‚      â”œâ”€â”€ async_batch_executor.py / batch_executor.py â”€ ë°°ì¹˜ ì‹¤í–‰ê¸°                   â”‚
â”‚      â”‚       - ì ì‘í˜• ë°°ì¹˜ í¬ê¸°, ì¬ì‹œë„, ì§„í–‰ ì½œë°±                                  â”‚
â”‚      â”‚       - Ragas í‰ê°€ ë° ëŒ€ëŸ‰ API í˜¸ì¶œì˜ ì‹ ë¢°ì„± í–¥ìƒ                            â”‚
â”‚      â”‚                                                                              â”‚
â”‚      â”œâ”€â”€ embedding_overlay.py          â”€ Phoenix ì„ë² ë”© â†’ Domain Memory             â”‚
â”‚      â”‚       - Phoenix í´ëŸ¬ìŠ¤í„° exportë¥¼ Fact tripleë¡œ ë³€í™˜                         â”‚
â”‚      â”‚                                                                              â”‚
â”‚      â”œâ”€â”€ prompt_manifest.py            â”€ í”„ë¡¬í”„íŠ¸ ê±°ë²„ë„ŒìŠ¤                          â”‚
â”‚      â”‚       - PromptDiffSummary, manifest I/O                                      â”‚
â”‚      â”‚       - Langfuse/Phoenix prompt ë©”íƒ€ë°ì´í„° ì¶”ì                               â”‚
â”‚      â”‚                                                                              â”‚
â”‚      â””â”€â”€ experiment_*.*                â”€ ì‹¤í—˜ ì €ì¥/í†µê³„/ë¦¬í¬íŒ… ì„œë¹„ìŠ¤               â”‚
â”‚              - ExperimentRepository, ExperimentComparator, ExperimentReportGenerator â”‚
â”‚              - MetricComparison, íˆìŠ¤í† ë¦¬ ìš”ì•½                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              CONFIG LAYER                                            â”‚
â”‚                          (ì„¤ì • ê´€ë¦¬)                                                 â”‚
â”‚                                                                                      â”‚
â”‚  ì´ ê³„ì¸µì€ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„¤ì •ì„ ì œê³µí•©ë‹ˆë‹¤. ë„ë©”ì¸ ë¡œì§ê³¼ëŠ” ë¶„ë¦¬ë˜ì–´ ìˆì§€ë§Œ,          â”‚
â”‚  ë„ë©”ì¸ ì„œë¹„ìŠ¤ê°€ í•„ìš”ì‹œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      CONFIG                       â”‚
â”‚   (ì„¤ì • ê´€ë¦¬)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                   â”‚
â”‚  config/                          â”‚
â”‚  â”œâ”€â”€ __init__.py                  â”‚
â”‚  â”‚                                 â”‚
â”‚  â”œâ”€â”€ settings.py                  â”‚
â”‚  â”‚   â””â”€â”€ Settings (Pydantic)      â”‚
â”‚  â”‚       - í™˜ê²½ë³€ìˆ˜ ê¸°ë°˜ ì„¤ì •      â”‚
â”‚  â”‚       - í”„ë¡œí•„ ì§€ì›             â”‚
â”‚  â”‚       - íƒ€ì… ê²€ì¦               â”‚
â”‚  â”‚                                 â”‚
â”‚  â””â”€â”€ model_config.py              â”‚
â”‚      â””â”€â”€ ModelConfig              â”‚
â”‚          - YAML ê¸°ë°˜ ëª¨ë¸ ì„¤ì •     â”‚
â”‚          - í”„ë¡œí•„ ê´€ë¦¬             â”‚
â”‚          - Pydantic ê²€ì¦           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

- `domain_config.py`: ë„ë©”ì¸ ë©”ëª¨ë¦¬ í•™ìŠµ/ì–¸ì–´ ë¦¬ì†ŒìŠ¤ ê²½ë¡œë¥¼ ì •ì˜í•˜ëŠ” Pydantic ëª¨ë¸ (`domains/<name>/memory.yaml` ë¡œë”©).
- `agent_types.py`: CLIì™€ ê°œë°œìš© `agent/` í´ë”ê°€ ê³µìœ í•˜ëŠ” `AgentType`, `AgentConfig`, ìš´ì˜/ê°œë°œ ëª¨ë“œ ì •ì˜.
- `phoenix_support.py` & `instrumentation.py`: Phoenix/OpenTelemetry ì„¤ì •, CLIì—ì„œ `instrumentation_span` ì»¨í…ìŠ¤íŠ¸, ë§í¬ í¬ë§·í„°(`extract_phoenix_links`) ì œê³µ.
- `playbooks/`: ê°œì„  íŒ¨í„´ íƒì§€ ê·œì¹™ í…œí”Œë¦¿ (`improvement/playbook_loader.py`ê°€ ë¡œë”©).

---

### 1.2 ì „ì²´ ì½”ë“œ ë§µ (ë””ë ‰í„°ë¦¬ â†’ ì±…ì„)

| ê²½ë¡œ | ì—­í•  | ì£¼ìš” êµ¬ì„±ìš”ì†Œ |
|------|------|---------------|
| `src/evalvault/domain` | í•µì‹¬ ë„ë©”ì¸ ì—”í‹°í‹°Â·ì„œë¹„ìŠ¤ | Dataset/Result/Analysis/Memory/Improvement ì—”í‹°í‹°, `RagasEvaluator`, `MemoryAwareEvaluator`, `MemoryBasedAnalysis`, `DomainLearningHook`, `PipelineOrchestrator`, `ImprovementGuideService`, `ExperimentManager`, `BenchmarkRunner`, `PromptManifest` ë“± |
| `src/evalvault/ports` | ë„ë©”ì¸ì´ ì™¸ë¶€ì™€ í†µì‹ í•˜ê¸° ìœ„í•´ ì •ì˜í•œ ê³„ì•½ | Inbound í¬íŠ¸(í‰ê°€, íŒŒì´í”„ë¼ì¸, ì›¹), Outbound í¬íŠ¸(LLM, Dataset, Storage, Tracker, DomainMemory, Analysis*, Embedding, Korean NLP, Report, Relation Augmenter ë“±) |
| `src/evalvault/adapters/inbound` | ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ ê³„ì¸µ | Typer CLI(`commands/run.py`, `commands/gate.py`, `commands/pipeline.py`, `commands/agent.py` ë“±), FastAPI Web API(`api/routers/*`, `api/adapter.py`) |
| `src/evalvault/adapters/outbound` | ì™¸ë¶€ ì‹œìŠ¤í…œ êµ¬í˜„ì²´ | Dataset ë¡œë”(ì •ì +ìŠ¤íŠ¸ë¦¬ë°), LLM/Token-aware Chat, Storage(SQLite/Postgres), Domain Memory(SQLite+FTS5), Tracker(Langfuse/MLflow/Phoenix), Analysis ëª¨ë“ˆ, Korean NLP, Cache, KG, Report, Improvement, Phoenix Sync |
| `src/evalvault/config` | ì‹¤í–‰ ì„¤ì •/ê³„ì¸¡/ì—ì´ì „íŠ¸ ì •ì˜ | `settings.py`, `model_config.py`, `domain_config.py`, `agent_types.py`, `phoenix_support.py`, `instrumentation.py`, `playbooks/` |
| `src/evalvault/reports` | CLI/PR ë³´ê³ ì„œ í…œí”Œë¦¿ | `release_notes.py` |
| `src/evalvault/scripts` | ìë™í™” ë„êµ¬ | `regression_runner.py` (íšŒê·€ ì‹œë‚˜ë¦¬ì˜¤ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜) |
| `agent/` | ê°œë°œììš© í•˜ì´ë¸Œë¦¬ë“œ ì—ì´ì „íŠ¸ | `main.py`, `agent.py`, `config.py`, `prompts/`, `memory/`, `security.py` ë“± â€“ `evalvault agent â€¦` CLIì™€ ì—°ë™ |
| `frontend/` | React Web UI | Vite ê¸°ë°˜ í”„ë¡ íŠ¸ì—”ë“œ(Evaluation Studio/Analysis Lab) |
| `config/` | ëª¨ë¸/ë„ë©”ì¸ í”„ë¡œí•„ | `.env`, `models.yaml`, `domains/<name>/memory.yaml`, `playbooks/*.yaml` |
| `data/`, `tests/fixtures/` | ìƒ˜í”Œ/ê³ ì • ë°ì´í„°ì…‹ | e2e JSON, fixture |
| `tests/` | ë‹¨ìœ„/í†µí•©/e2e í…ŒìŠ¤íŠ¸ | `tests/unit`, `tests/integration`, `tests/e2e_data` |
| `docs/` | ì„¤ê³„/ìš´ì˜ ë¬¸ì„œ | ARCHITECTURE, C4, IMPROVEMENT_PLAN ë“± |

ì´ í‘œëŠ” Hexagonal ì•„í‚¤í…ì²˜ì˜ ê° ë©´ì´ ì‹¤ì œ ì–´ë””ì— ë†“ì—¬ ìˆëŠ”ì§€ ë¹ ë¥´ê²Œ íŒŒì•…í•  ìˆ˜ ìˆë„ë¡ ë•ìŠµë‹ˆë‹¤. ì•„ë˜ ì„¹ì…˜ì—ì„œ ì„¸ë¶€ ë‚´ìš©ì„ ë‹¤ì‹œ ì„¤ëª…í•©ë‹ˆë‹¤.

## 2. ë°©ë²•ë¡  ê¸°ë°˜: Hexagonal Architecture

### 2.1 Hexagonal Architectureë€?

**Hexagonal Architecture** (ë˜ëŠ” **Ports & Adapters Architecture**)ëŠ” Alistair Cockburnì´ ì œì•ˆí•œ ì•„í‚¤í…ì²˜ íŒ¨í„´ìœ¼ë¡œ, ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ì™¸ë¶€ ì˜ì¡´ì„±ìœ¼ë¡œë¶€í„° ê²©ë¦¬í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•©ë‹ˆë‹¤.

#### í•µì‹¬ ê°œë…

1. **í¬íŠ¸ (Port)**: ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ ì™¸ë¶€ ì„¸ê³„ ì‚¬ì´ì˜ ì¸í„°í˜ì´ìŠ¤
   - **Inbound Port**: ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì œê³µí•˜ëŠ” ê¸°ëŠ¥ (ì‚¬ìš© ì‚¬ë¡€)
   - **Outbound Port**: ì• í”Œë¦¬ì¼€ì´ì…˜ì´ í•„ìš”ë¡œ í•˜ëŠ” ì™¸ë¶€ ì„œë¹„ìŠ¤

2. **ì–´ëŒ‘í„° (Adapter)**: í¬íŠ¸ë¥¼ êµ¬í˜„í•˜ëŠ” êµ¬ì²´ì ì¸ ê¸°ìˆ 
   - **Inbound Adapter**: ì™¸ë¶€ ìš”ì²­ì„ ì• í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ ë³€í™˜ (ì˜ˆ: CLI, REST API)
   - **Outbound Adapter**: ì• í”Œë¦¬ì¼€ì´ì…˜ ìš”ì²­ì„ ì™¸ë¶€ ì‹œìŠ¤í…œìœ¼ë¡œ ë³€í™˜ (ì˜ˆ: ë°ì´í„°ë² ì´ìŠ¤, API í´ë¼ì´ì–¸íŠ¸)

3. **ë„ë©”ì¸ (Domain)**: í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ ìœ„ì¹˜í•˜ëŠ” ê³„ì¸µ

### 2.2 EvalVaultì—ì„œì˜ ì ìš©

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   External World            â”‚
                    â”‚   (Users, File System,      â”‚
                    â”‚    LLM APIs, Databases)     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚      ADAPTERS               â”‚
                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
                    â”‚  â”‚  CLI   â”‚  â”‚  File    â”‚  â”‚
                    â”‚  â”‚Adapter â”‚  â”‚  Loader  â”‚  â”‚
                    â”‚  â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â”‚
                    â”‚      â”‚            â”‚        â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚            â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
                    â”‚         PORTS            â”‚
                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
                    â”‚  â”‚Evaluatorâ”‚ â”‚ Dataset â”‚ â”‚
                    â”‚  â”‚  Port  â”‚ â”‚  Port   â”‚ â”‚
                    â”‚  â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚          â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
                    â”‚      DOMAIN            â”‚
                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
                    â”‚  â”‚  RagasEvaluator  â”‚  â”‚
                    â”‚  â”‚  (Business Logic)â”‚  â”‚
                    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.3 ì˜ì¡´ì„± ê·œì¹™ (Dependency Rule)

**Clean Architecture**ì˜ ì˜ì¡´ì„± ê·œì¹™ì„ ë”°ë¦…ë‹ˆë‹¤:

```
ì˜ì¡´ì„± ë°©í–¥: ì™¸ë¶€ â†’ ë‚´ë¶€
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Adapters (ì™¸ë¶€ ê³„ì¸µ)                   â”‚
â”‚  â””â”€> Ports (ì¸í„°í˜ì´ìŠ¤)                 â”‚
â”‚      â””â”€> Domain (í•µì‹¬ ë¡œì§)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ê·œì¹™:**
- ì–´ëŒ‘í„°ëŠ” í¬íŠ¸ì— ì˜ì¡´
- í¬íŠ¸ëŠ” ë„ë©”ì¸ì— ì†í•˜ì§€ë§Œ ë„ë©”ì¸ ì„œë¹„ìŠ¤ì— ì˜ì¡´í•˜ì§€ ì•ŠìŒ
- ë„ë©”ì¸ì€ í¬íŠ¸ì—ë§Œ ì˜ì¡´ (ì–´ëŒ‘í„°ì— ì§ì ‘ ì˜ì¡´í•˜ì§€ ì•ŠìŒ)

---

## 3. ê³„ì¸µë³„ ìƒì„¸ ë¶„ì„

### 3.1 Domain Layer (ë„ë©”ì¸ ê³„ì¸µ)

ë„ë©”ì¸ ê³„ì¸µì€ ì‹œìŠ¤í…œì˜ í•µì‹¬ì…ë‹ˆë‹¤. ì´ ê³„ì¸µì€ **ì™„ì „íˆ ë…ë¦½ì **ì´ë©° ì™¸ë¶€ í”„ë ˆì„ì›Œí¬ë‚˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ì˜ì¡´í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

#### 3.1.1 Entities (ì—”í‹°í‹°)

ì—”í‹°í‹°ëŠ” ë„ë©”ì¸ì˜ í•µì‹¬ ê°œë…ì„ í‘œí˜„í•˜ëŠ” ë¶ˆë³€ ê°ì²´ì…ë‹ˆë‹¤.

**Dataset ì—”í‹°í‹°**

```python
@dataclass
class Dataset:
    """í‰ê°€ìš© ë°ì´í„°ì…‹."""
    name: str
    version: str
    test_cases: list[TestCase]
    thresholds: dict[str, float] = field(default_factory=dict)

    def get_threshold(self, metric_name: str, default: float = 0.7) -> float:
        """ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™: ì„ê³„ê°’ ì¡°íšŒ"""
        return self.thresholds.get(metric_name, default)
```

**ì±…ì„:**
- ë°ì´í„°ì…‹ì˜ ë¶ˆë³€ì„± ë³´ì¥
- ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ ìº¡ìŠí™” (ì„ê³„ê°’ ê´€ë¦¬)
- Ragas í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” ë©”ì„œë“œ ì œê³µ

**EvaluationRun ì—”í‹°í‹°**

```python
@dataclass
class EvaluationRun:
    """ì „ì²´ í‰ê°€ ì‹¤í–‰ ê²°ê³¼."""
    run_id: str
    dataset_name: str
    model_name: str
    results: list[TestCaseResult]
    metrics_evaluated: list[str]
    thresholds: dict[str, float]

    @property
    def pass_rate(self) -> float:
        """ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™: í†µê³¼ìœ¨ ê³„ì‚°"""
        if not self.results:
            return 0.0
        return self.passed_test_cases / self.total_test_cases

    def get_avg_score(self, metric_name: str) -> float | None:
        """ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™: ë©”íŠ¸ë¦­ í‰ê·  ì ìˆ˜ ê³„ì‚°"""
        scores = [r.get_metric(metric_name).score
                  for r in self.results
                  if r.get_metric(metric_name)]
        return sum(scores) / len(scores) if scores else None
```

**ì±…ì„:**
- í‰ê°€ ê²°ê³¼ì˜ ì§‘ê³„ ë° í†µê³„ ê³„ì‚°
- í†µê³¼/ì‹¤íŒ¨ íŒì • ë¡œì§
- ë„ë©”ì¸ ì´ë²¤íŠ¸ ë°œìƒ ê°€ëŠ¥ (í–¥í›„ í™•ì¥)

**RAGTraceData ì—”í‹°í‹° (`domain/entities/rag_trace.py`)**

```python
@dataclass
class RAGTraceData:
    trace_id: str = ""
    query: str = ""
    retrieval: RetrievalData | None = None
    generation: GenerationData | None = None
    final_answer: str = ""
    total_time_ms: float = 0.0

    def to_span_attributes(self) -> dict[str, Any]:
        attrs = {"rag.total_time_ms": self.total_time_ms}
        if self.retrieval:
            attrs.update(self.retrieval.to_span_attributes())
        if self.generation:
            attrs.update(self.generation.to_span_attributes())
        return attrs
```

**ì±…ì„:**
- Phoenix/OpenTelemetry span ì†ì„±ìœ¼ë¡œ ì§ë ¬í™”í•˜ì—¬ ê²€ìƒ‰Â·ìƒì„± ë‹¨ê³„ì˜ ë³‘ëª©ì„ ë“œëŸ¬ëƒ…ë‹ˆë‹¤.
- `RetrievalData`ëŠ” Precision@K, ì ìˆ˜ ë¶„í¬, ë¦¬ë­í‚¹ ì •ë³´ë¥¼, `GenerationData`ëŠ” í† í°/ë¹„ìš©, í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿, stop reason ë“±ì„ ì¶”ì í•©ë‹ˆë‹¤.
- `config/phoenix_support.instrumentation_span` ë˜ëŠ” tracker ì–´ëŒ‘í„°ê°€ `RAGTraceData`ë¥¼ ì´ìš©í•´ Langfuse/Phoenixì— ê³µí†µ ë©”íƒ€ë°ì´í„°ë¥¼ ë‚¨ê¹ë‹ˆë‹¤.

#### 3.1.2 Services (ë„ë©”ì¸ ì„œë¹„ìŠ¤)

ë„ë©”ì¸ ì„œë¹„ìŠ¤ëŠ” ì—¬ëŸ¬ ì—”í‹°í‹°ì— ê±¸ì¹œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ êµ¬í˜„í•©ë‹ˆë‹¤.

**RagasEvaluator ì„œë¹„ìŠ¤**

```python
class RagasEvaluator:
    """Ragas ê¸°ë°˜ RAG í‰ê°€ ì„œë¹„ìŠ¤."""

    async def evaluate(
        self,
        dataset: Dataset,
        metrics: list[str],
        llm: LLMPort,  # í¬íŠ¸ ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´
        thresholds: dict[str, float] | None = None,
    ) -> EvaluationRun:
        """í‰ê°€ ì‹¤í–‰ - í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§"""
        # 1. ì„ê³„ê°’ í•´ì„ (ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™)
        resolved_thresholds = self._resolve_thresholds(
            dataset, metrics, thresholds
        )

        # 2. í‰ê°€ ì‹¤í–‰ (Ragas ë©”íŠ¸ë¦­)
        eval_results = await self._evaluate_with_ragas(
            dataset, metrics, llm
        )

        # 3. ê²°ê³¼ ì§‘ê³„ (ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§)
        run = self._aggregate_results(
            dataset, metrics, eval_results, resolved_thresholds
        )

        return run
```

**ì±…ì„:**
- í‰ê°€ ì‹¤í–‰ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜
- ë©”íŠ¸ë¦­ë³„ í‰ê°€ ë¡œì§
- ê²°ê³¼ ì§‘ê³„ ë° ì„ê³„ê°’ íŒì •
- í† í° ì‚¬ìš©ëŸ‰ ë° ë¹„ìš© ì¶”ì 

**ì˜ì¡´ì„±:**
- `LLMPort` (í¬íŠ¸ ì¸í„°í˜ì´ìŠ¤) - êµ¬ì²´ì ì¸ LLM êµ¬í˜„ì— ì˜ì¡´í•˜ì§€ ì•ŠìŒ
- `Dataset`, `EvaluationRun` (ë„ë©”ì¸ ì—”í‹°í‹°)

**AnalysisService ì„œë¹„ìŠ¤**

```python
class AnalysisService:
    """ë¶„ì„ ì„œë¹„ìŠ¤.

    ì—¬ëŸ¬ ë¶„ì„ ì–´ëŒ‘í„°ë¥¼ ì¡°í•©í•˜ì—¬ ì¢…í•© ë¶„ì„ì„ ì œê³µí•©ë‹ˆë‹¤.
    """

    def __init__(
        self,
        analysis_adapter: AnalysisPort,
        nlp_adapter: NLPAnalysisPort | None = None,
        causal_adapter: CausalAnalysisPort | None = None,
        cache_adapter: AnalysisCachePort | None = None,
    ):
        ...

    def analyze_run(
        self,
        run: EvaluationRun,
        *,
        include_nlp: bool = False,
        include_causal: bool = False,
        use_cache: bool = True,
    ) -> AnalysisBundle:
        """í‰ê°€ ì‹¤í–‰ì— ëŒ€í•œ ì¢…í•© ë¶„ì„ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤."""
        ...
```

**ì±…ì„:**
- í†µê³„ ë¶„ì„ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜
- NLP ë¶„ì„ í†µí•© (ì„ íƒì )
- ì¸ê³¼ ë¶„ì„ í†µí•© (ì„ íƒì )
- ë¶„ì„ ê²°ê³¼ ìºì‹±

**ì˜ì¡´ì„±:**
- `AnalysisPort`, `NLPAnalysisPort`, `CausalAnalysisPort` (í¬íŠ¸ ì¸í„°í˜ì´ìŠ¤)
- `AnalysisCachePort` (ìºì‹œ í¬íŠ¸)

**PipelineOrchestrator ì„œë¹„ìŠ¤**

```python
@dataclass
class PipelineOrchestrator:
    """íŒŒì´í”„ë¼ì¸ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„°.

    DAG ê¸°ë°˜ ë¶„ì„ íŒŒì´í”„ë¼ì¸ì„ ë¹Œë“œí•˜ê³  ì‹¤í–‰í•©ë‹ˆë‹¤.
    """

    module_catalog: ModuleCatalog
    template_registry: PipelineTemplateRegistry
    intent_classifier: KeywordIntentClassifier
    _modules: dict[str, AnalysisModulePort]

    def build_pipeline(
        self,
        intent: AnalysisIntent,
        context: AnalysisContext,
    ) -> AnalysisPipeline:
        """ì˜ë„ì™€ ì»¨í…ìŠ¤íŠ¸ì— ë”°ë¼ íŒŒì´í”„ë¼ì¸ ë¹Œë“œ"""
        ...

    async def execute_pipeline(
        self,
        pipeline: AnalysisPipeline,
        context: AnalysisContext,
    ) -> PipelineResult:
        """íŒŒì´í”„ë¼ì¸ ì‹¤í–‰"""
        ...
```

**ì±…ì„:**
- DAG ê¸°ë°˜ ë¶„ì„ íŒŒì´í”„ë¼ì¸ êµ¬ì„±
- ëª¨ë“ˆ ì¹´íƒˆë¡œê·¸ ê´€ë¦¬
- í…œí”Œë¦¿ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ê´€ë¦¬
- ì˜ë„ ë¶„ë¥˜ ë° íŒŒì´í”„ë¼ì¸ ë¹Œë“œ
- ë¹„ë™ê¸° íŒŒì´í”„ë¼ì¸ ì‹¤í–‰

**ì˜ì¡´ì„±:**
- `AnalysisModulePort` (í¬íŠ¸ ì¸í„°í˜ì´ìŠ¤)
- `AnalysisPipeline`, `AnalysisNode` (ë„ë©”ì¸ ì—”í‹°í‹°)

**ImprovementGuideService ì„œë¹„ìŠ¤**

```python
class ImprovementGuideService:
    """ê°œì„  ê°€ì´ë“œ ì„œë¹„ìŠ¤.

    Rule-based Pattern Detectorì™€ LLM-based Insight Generatorë¥¼
    ê²°í•©í•˜ì—¬ í•˜ì´ë¸Œë¦¬ë“œ ë¶„ì„ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.
    """

    def __init__(
        self,
        pattern_detector: PatternDetectorPort,
        insight_generator: InsightGeneratorPort | None = None,
        playbook: PlaybookPort | None = None,
    ):
        ...

    def generate_report(
        self,
        run: EvaluationRun,
        metrics: list[str] | None = None,
    ) -> ImprovementReport:
        """ê°œì„  ë¦¬í¬íŠ¸ ìƒì„±"""
        ...
```

**ì±…ì„:**
- ê·œì¹™ ê¸°ë°˜ íŒ¨í„´ íƒì§€
- LLM ê¸°ë°˜ ì¸ì‚¬ì´íŠ¸ ìƒì„±
- í”Œë ˆì´ë¶ ê¸°ë°˜ ì•¡ì…˜ ì œì•ˆ
- í•˜ì´ë¸Œë¦¬ë“œ ë¶„ì„ ë° ë¦¬í¬íŠ¸ ìƒì„±

**ì˜ì¡´ì„±:**
- `PatternDetectorPort`, `InsightGeneratorPort`, `PlaybookPort` (í¬íŠ¸ ì¸í„°í˜ì´ìŠ¤)

**ExperimentManager ì„œë¹„ìŠ¤**

```python
class ExperimentManager:
    """ì‹¤í—˜ ê´€ë¦¬ ì„œë¹„ìŠ¤."""

    def __init__(self, storage: StoragePort):  # í¬íŠ¸ì— ì˜ì¡´
        self._storage = storage
        self._experiments: dict[str, Experiment] = {}

    def compare_groups(self, experiment_id: str) -> list[MetricComparison]:
        """ê·¸ë£¹ ê°„ ë©”íŠ¸ë¦­ ë¹„êµ - ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§"""
        experiment = self.get_experiment(experiment_id)

        # ê° ê·¸ë£¹ì˜ run ë°ì´í„° ìˆ˜ì§‘
        group_runs = self._collect_group_runs(experiment)

        # ë©”íŠ¸ë¦­ë³„ ë¹„êµ (ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™)
        comparisons = []
        for metric in experiment.metrics_to_compare:
            group_scores = self._calculate_group_scores(
                group_runs, metric
            )
            best_group = max(group_scores, key=group_scores.get)
            improvement = self._calculate_improvement(group_scores)

            comparisons.append(MetricComparison(
                metric_name=metric,
                group_scores=group_scores,
                best_group=best_group,
                improvement=improvement,
            ))

        return comparisons
```

**ì±…ì„:**
- A/B í…ŒìŠ¤íŠ¸ ì‹¤í—˜ ê´€ë¦¬
- ê·¸ë£¹ë³„ ë©”íŠ¸ë¦­ ë¹„êµ ë° ë¶„ì„
- ì‹¤í—˜ ê²°ë¡  ê¸°ë¡

**ì˜ì¡´ì„±:**
- `StoragePort` (í¬íŠ¸ ì¸í„°í˜ì´ìŠ¤) - êµ¬ì²´ì ì¸ ì €ì¥ì†Œì— ì˜ì¡´í•˜ì§€ ì•ŠìŒ

**MemoryAwareEvaluator & MemoryBasedAnalysis**

```python
class MemoryAwareEvaluator:
    async def evaluate_with_memory(...):
        reliability = self._memory_port.get_aggregated_reliability(domain=domain, language=language)
        base_thresholds = dict(dataset.thresholds)
        if thresholds:
            base_thresholds.update(thresholds)
        adjusted = self._adjust_by_reliability(metrics, base_thresholds, reliability)
        return await self._evaluator.evaluate(
            dataset=dataset,
            metrics=metrics,
            llm=llm,
            thresholds=adjusted,
            parallel=parallel,
            batch_size=batch_size,
        )
```

- DomainMemoryì˜ ì‹ ë¢°ë„ë¥¼ ì´ìš©í•´ SLA ì„ê³„ê°’ì„ ìƒí–¥/í•˜í–¥ ì¡°ì •í•˜ê³ , `augment_context_with_facts()`ë¡œ ì§ˆë¬¸ë³„ factual contextë¥¼ ì£¼ì…í•©ë‹ˆë‹¤.
- Phoenix instrumentation(`instrumentation_span`)ì„ í†µí•´ ë„ë©”ì¸ ë©”ëª¨ë¦¬ ê²€ìƒ‰ ë¹„ìš©/ë ˆì´í„´ì‹œë¥¼ ì¶”ì í•©ë‹ˆë‹¤.

```python
class MemoryBasedAnalysis:
    def generate_insights(...):
        historical = self.memory_port.list_learnings(...)
        current_metrics = self._extract_metrics(evaluation_run)
        trends = self._analyze_trends(current_metrics, historical)
        related = self.memory_port.hybrid_search(...)
        recommendations = self._generate_recommendations(trends, related.get("facts", []))
        return {"trends": trends, "related_facts": related.get("facts", []), "recommendations": recommendations}
```

- í‰ê°€ ê²°ê³¼ë¥¼ ë©”ëª¨ë¦¬ í•™ìŠµì¹˜ì™€ ë¹„êµí•˜ì—¬ delta, ì¶”ì²œ ì‘ì—…, ì¬ì‚¬ìš© ê°€ëŠ¥í•œ í–‰ë™(Action sequence)ì„ ì‚°ì¶œí•©ë‹ˆë‹¤.

**DomainLearningHook**
- Formation ë‹¨ê³„ì—ì„œ Facts/Learnings/Behaviorsë¥¼ ì¶”ì¶œí•˜ì—¬ ì¤‘ë³µ ì œê±°Â·ë§ê° ì§€í‘œÂ·ì‹ ë¢°ë„ ê°±ì‹  ì •ì±…ì„ ì ìš©í•©ë‹ˆë‹¤.
- DomainMemoryPortë¥¼ í†µí•´ ì €ì¥ì†Œë¥¼ ì¶”ìƒí™”í•˜ë¯€ë¡œ SQLite ì™¸ ë‹¤ë¥¸ êµ¬í˜„ìœ¼ë¡œ ì‰½ê²Œ í™•ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**AsyncBatchExecutor / BatchExecutor**
- `AsyncBatchExecutor`ëŠ” ì ì‘í˜• ë°°ì¹˜ í¬ê¸°, Rate-limit ëŒ€ì‘, ì§„í–‰ ì½œë°±ì„ ì œê³µí•˜ì—¬ Ragas í‰ê°€, Phoenix ë°ì´í„° ë™ê¸°í™” ë“± ëŒ€ê·œëª¨ API í˜¸ì¶œì„ ì•ˆì •í™”í•©ë‹ˆë‹¤.
- Sync ë²„ì „(`BatchExecutor`)ì€ CLIê°€ ë©€í‹°ìŠ¤ë ˆë“œ ì—†ì´ ì‚¬ìš©í•  ë•Œ ë™ì¼í•œ ì •ì±…ì„ ì œê³µí•©ë‹ˆë‹¤.

**PromptManifest ìœ í‹¸ë¦¬í‹°**

```python
def summarize_prompt_entry(...):
    record = manifest.get("prompts", {}).get(normalized_path)
    current_checksum = _checksum(content)
    if record is None:
        return PromptDiffSummary(path=normalized_path, status="untracked", current_checksum=current_checksum)
    ...
```

- Phoenix prompt manifestë¥¼ ë¡œë”©í•˜ê³  í”„ë¡¬í”„íŠ¸ íŒŒì¼ì˜ ë³€ê²½ ì‚¬í•­, Langfuse/ì‹¤í—˜ ID, ì²´í¬ì„¬ì„ ê¸°ë¡í•©ë‹ˆë‹¤.
- CLI `run` ëª…ë ¹ì€ prompt metadataë¥¼ Phoenix/Trackerì— ì²¨ë¶€í•˜ê¸° ì „ì— ì´ ìœ í‹¸ë¦¬í‹°ë¡œ ë³€í™” ë‚´ì—­ì„ ìš”ì•½í•©ë‹ˆë‹¤.

#### 3.1.3 Metrics (ë©”íŠ¸ë¦­)

ë„ë©”ì¸ íŠ¹í™” ë©”íŠ¸ë¦­ì„ ì •ì˜í•©ë‹ˆë‹¤.

**InsuranceTermAccuracy ë©”íŠ¸ë¦­**

```python
class InsuranceTermAccuracy:
    """ë³´í—˜ ìš©ì–´ ì •í™•ë„ ë©”íŠ¸ë¦­."""

    def score(self, answer: str, contexts: list[str]) -> float:
        """ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™: ë³´í—˜ ìš©ì–´ê°€ ì»¨í…ìŠ¤íŠ¸ì— ê¸°ë°˜í•˜ëŠ”ì§€ ê²€ì¦"""
        # ë„ë©”ì¸ ì§€ì‹ í™œìš©
        terms = self._extract_insurance_terms(answer)
        grounded_terms = self._check_grounding(terms, contexts)

        return len(grounded_terms) / len(terms) if terms else 0.0
```

**ì±…ì„:**
- ë„ë©”ì¸ íŠ¹í™” í‰ê°€ ë¡œì§
- ë„ë©”ì¸ ì§€ì‹ í™œìš© (ìš©ì–´ ì‚¬ì „)

### 3.2 Ports Layer (í¬íŠ¸ ê³„ì¸µ)

í¬íŠ¸ëŠ” ë„ë©”ì¸ê³¼ ì™¸ë¶€ ì„¸ê³„ ì‚¬ì´ì˜ ê³„ì•½ì„ ì •ì˜í•©ë‹ˆë‹¤.

#### 3.2.1 Inbound Ports (ì…ë ¥ í¬íŠ¸)

ë„ë©”ì¸ì´ ì œê³µí•˜ëŠ” ê¸°ëŠ¥ì„ ì •ì˜í•©ë‹ˆë‹¤.

**EvaluatorPort**

```python
class EvaluatorPort(Protocol):
    """í‰ê°€ ì‹¤í–‰ì„ ìœ„í•œ í¬íŠ¸ ì¸í„°í˜ì´ìŠ¤."""

    def evaluate(
        self,
        dataset: Dataset,
        metrics: list[str],
        model: str,
    ) -> EvaluationRun:
        """ë°ì´í„°ì…‹ì— ëŒ€í•´ í‰ê°€ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤."""
        ...
```

**íŠ¹ì§•:**
- `Protocol` ê¸°ë°˜ (Pythonì˜ êµ¬ì¡°ì  ì„œë¸Œíƒ€ì´í•‘)
- ë„ë©”ì¸ ì„œë¹„ìŠ¤(`RagasEvaluator`)ê°€ êµ¬í˜„
- ì–´ëŒ‘í„°(`CLI`)ê°€ í˜¸ì¶œ

#### 3.2.2 Outbound Ports (ì¶œë ¥ í¬íŠ¸)

ë„ë©”ì¸ì´ í•„ìš”ë¡œ í•˜ëŠ” ì™¸ë¶€ ì„œë¹„ìŠ¤ë¥¼ ì •ì˜í•©ë‹ˆë‹¤.

**LLMPort**

```python
class LLMPort(ABC):
    """LLM adapter interface for Ragas metrics evaluation."""

    @abstractmethod
    def get_model_name(self) -> str:
        """ëª¨ë¸ ì´ë¦„ ë°˜í™˜"""
        pass

    @abstractmethod
    def as_ragas_llm(self):
        """Ragas í˜¸í™˜ LLM ì¸ìŠ¤í„´ìŠ¤ ë°˜í™˜"""
        pass
```

**íŠ¹ì§•:**
- `ABC` (Abstract Base Class) ê¸°ë°˜
- ì–´ëŒ‘í„°(`OpenAIAdapter`, `AnthropicAdapter` ë“±)ê°€ êµ¬í˜„
- ë„ë©”ì¸ ì„œë¹„ìŠ¤(`RagasEvaluator`)ê°€ ì‚¬ìš©

**DatasetPort**

```python
class DatasetPort(Protocol):
    """ë°ì´í„°ì…‹ ë¡œë“œë¥¼ ìœ„í•œ í¬íŠ¸ ì¸í„°í˜ì´ìŠ¤."""

    def load(self, file_path: str | Path) -> Dataset:
        """íŒŒì¼ì—ì„œ ë°ì´í„°ì…‹ì„ ë¡œë“œí•©ë‹ˆë‹¤."""
        ...

    def supports(self, file_path: str | Path) -> bool:
        """í•´ë‹¹ íŒŒì¼ í˜•ì‹ì„ ì§€ì›í•˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤."""
        ...
```

**StoragePort**

```python
class StoragePort(Protocol):
    """í‰ê°€ ê²°ê³¼ ì €ì¥ì„ ìœ„í•œ í¬íŠ¸ ì¸í„°í˜ì´ìŠ¤."""

    def save_run(self, run: EvaluationRun) -> str:
        """í‰ê°€ ì‹¤í–‰ ê²°ê³¼ë¥¼ ì €ì¥í•©ë‹ˆë‹¤."""
        ...

    def get_run(self, run_id: str) -> EvaluationRun:
        """ì €ì¥ëœ í‰ê°€ ì‹¤í–‰ ê²°ê³¼ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤."""
        ...

    def list_runs(
        self,
        limit: int = 100,
        dataset_name: str | None = None,
        model_name: str | None = None,
    ) -> list[EvaluationRun]:
        """ì €ì¥ëœ í‰ê°€ ì‹¤í–‰ ê²°ê³¼ ëª©ë¡ì„ ì¡°íšŒí•©ë‹ˆë‹¤."""
        ...
```

**TrackerPort**

```python
class TrackerPort(Protocol):
    """í‰ê°€ ì‹¤í–‰ ì¶”ì ì„ ìœ„í•œ í¬íŠ¸ ì¸í„°í˜ì´ìŠ¤."""

    def start_trace(self, name: str, metadata: dict[str, Any] | None = None) -> str:
        """ìƒˆë¡œìš´ traceë¥¼ ì‹œì‘í•©ë‹ˆë‹¤."""
        ...

    def log_evaluation_run(self, run: EvaluationRun) -> str:
        """í‰ê°€ ì‹¤í–‰ì„ traceë¡œ ê¸°ë¡í•©ë‹ˆë‹¤."""
        ...
```

**AnalysisPipelinePort**

```python
class AnalysisPipelinePort(Protocol):
    """ë¶„ì„ íŒŒì´í”„ë¼ì¸ í¬íŠ¸ ì¸í„°í˜ì´ìŠ¤."""

    def build_pipeline(
        self,
        intent: AnalysisIntent,
        context: AnalysisContext,
    ) -> AnalysisPipeline:
        """ì˜ë„ì™€ ì»¨í…ìŠ¤íŠ¸ì— ë”°ë¼ ë¶„ì„ íŒŒì´í”„ë¼ì¸ì„ êµ¬ì„±í•©ë‹ˆë‹¤."""
        ...

    async def execute_async(
        self,
        pipeline: AnalysisPipeline,
        context: AnalysisContext,
    ) -> PipelineResult:
        """ë¶„ì„ íŒŒì´í”„ë¼ì¸ì„ ë¹„ë™ê¸°ë¡œ ì‹¤í–‰í•©ë‹ˆë‹¤."""
        ...
```

**DomainMemoryPort**

```python
class DomainMemoryPort(Protocol):
    """ë„ë©”ì¸ ë©”ëª¨ë¦¬ ì €ì¥ì†Œ ì¸í„°í˜ì´ìŠ¤.

    ì„¸ ê°€ì§€ ë©”ëª¨ë¦¬ ë ˆì´ì–´ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤:
    - Factual Layer: ê²€ì¦ëœ ë„ë©”ì¸ ì‚¬ì‹¤ (SPO íŠ¸ë¦¬í”Œ)
    - Experiential Layer: í‰ê°€ì—ì„œ í•™ìŠµëœ íŒ¨í„´
    - Working Layer: í˜„ì¬ ì„¸ì…˜ì˜ í™œì„± ì»¨í…ìŠ¤íŠ¸
    """

    def save_fact(self, fact: FactualFact) -> str: ...
    def save_learning(self, learning: LearningMemory) -> str: ...
    def save_behavior(self, behavior: BehaviorEntry) -> str: ...
    def hybrid_search(...) -> dict[str, list]: ...
```

**íŠ¹ì§•:**
- Factual/Experiential/Behavior ë ˆì´ì–´ ê´€ë¦¬
- Formation/Evolution/Retrieval dynamics ì§€ì›
- Knowledge Graph í†µí•© (Phase 5)

**ì¶”ê°€ Outbound í¬íŠ¸ ìš”ì•½**

| í¬íŠ¸ | ì—­í•  | ëŒ€í‘œ êµ¬í˜„ |
|------|------|-----------|
| `AnalysisModulePort` | DAG ë…¸ë“œì— ì£¼ì…ë˜ëŠ” ë¶„ì„ ëª¨ë“ˆ ê³„ì•½ (ì…ë ¥ ê²€ì¦ + sync/async ì‹¤í–‰) | `adapters/outbound/analysis/*_module.py` |
| `AnalysisCachePort` | ë¶„ì„ ê²°ê³¼ ìºì‹± (LRU/TTL, í†µê³„ ì œê³µ) | `cache/memory_cache.py`, `cache/hybrid_cache.py` |
| `NLPAnalysisPort` / `CausalAnalysisPort` / `AnalysisPort` | í†µê³„Â·ì–¸ì–´Â·ì¸ê³¼ ë¶„ì„ ì—”ì§„ ì¶”ìƒí™” | `analysis/statistical_adapter.py`, `analysis/nlp_adapter.py`, `analysis/causal_adapter.py` |
| `KoreanNLPPort` | í•œêµ­ì–´ í† í¬ë‚˜ì´ì €/ê²€ìƒ‰ê¸°/í‰ê°€ê¸°ë¥¼ ì£¼ì… | `nlp/korean/*.py` |
| `EmbeddingPort` | Dense ì„ë² ë”© ìƒì„± (encode/encode_query) | SentenceTransformers/BGE ì–´ëŒ‘í„° (í–¥í›„) |
| `RelationAugmenterPort` | ì»¨í…ìŠ¤íŠ¸ ë‚´ ì—”í‹°í‹° ê´€ê³„ ë³´ê°• | `llm/llm_relation_augmenter.py` |
| `ReportPort` | Markdown/LLM ê¸°ë°˜ ë¦¬í¬íŠ¸ ìƒì„± | `report/markdown_adapter.py`, `report/llm_report_generator.py` |
| `IntentClassifierPort` | ë¶„ì„ ì˜ë„ ë¶„ë¥˜ê¸° (Keyword, LLM ë“±) | `domain/services/intent_classifier.KeywordIntentClassifier` |

**ImprovementPort (íŒ¨í„´ íƒì§€ ë° ì¸ì‚¬ì´íŠ¸ ìƒì„±)**

```python
class PatternDetectorPort(Protocol):
    """íŒ¨í„´ íƒì§€ ì¸í„°í˜ì´ìŠ¤."""

    def detect_patterns(
        self,
        run: EvaluationRun,
        metrics: Sequence[str] | None = None,
    ) -> Mapping[str, list[PatternEvidence]]: ...

class InsightGeneratorPort(Protocol):
    """LLM ì¸ì‚¬ì´íŠ¸ ìƒì„± ì¸í„°í˜ì´ìŠ¤."""

    def analyze_batch_failures(
        self,
        failures: Sequence[FailureSample],
        metric_name: str,
        avg_score: float,
        threshold: float,
    ) -> ClaimImprovementProtocol: ...
```

### 3.3 Adapters Layer (ì–´ëŒ‘í„° ê³„ì¸µ)

ì–´ëŒ‘í„°ëŠ” í¬íŠ¸ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ì—¬ ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ í†µì‹ í•©ë‹ˆë‹¤.

#### 3.3.1 Inbound Adapters (ì…ë ¥ ì–´ëŒ‘í„°)

**CLI Adapter**

```python
@app.command()
def run(
    dataset: Path,
    metrics: str,
    model: str | None = None,
    ...
):
    """Run RAG evaluation on a dataset."""
    # 1. ì…ë ¥ ê²€ì¦ ë° íŒŒì‹±
    metric_list = [m.strip() for m in metrics.split(",")]

    # 2. ì„¤ì • ë¡œë“œ
    settings = Settings()

    # 3. ì–´ëŒ‘í„° ìƒì„± (Factory íŒ¨í„´)
    loader = get_loader(dataset)  # DatasetPort êµ¬í˜„
    llm = get_llm_adapter(settings)  # LLMPort êµ¬í˜„

    # 4. ë„ë©”ì¸ ì„œë¹„ìŠ¤ í˜¸ì¶œ
    evaluator = RagasEvaluator()
    result = asyncio.run(
        evaluator.evaluate(
            dataset=ds,
            metrics=metric_list,
            llm=llm,  # í¬íŠ¸ ì¸í„°í˜ì´ìŠ¤ ì „ë‹¬
        )
    )

    # 5. ê²°ê³¼ í¬ë§·íŒ… ë° ì¶œë ¥
    _display_results(result)
```

**ì±…ì„:**
- CLI ëª…ë ¹ íŒŒì‹± (Typer ì‚¬ìš©)
- ì‚¬ìš©ì ì…ë ¥ ê²€ì¦
- ë„ë©”ì¸ ì„œë¹„ìŠ¤ í˜¸ì¶œ
- ê²°ê³¼ í¬ë§·íŒ… ë° ì¶œë ¥

**ì˜ì¡´ì„±:**
- `EvaluatorPort` (í¬íŠ¸ ì¸í„°í˜ì´ìŠ¤)
- `DatasetPort`, `LLMPort` (í¬íŠ¸ ì¸í„°í˜ì´ìŠ¤)

**í™•ì¥ CLI ëª…ë ¹**
- `commands/run.py`: `RunModePreset(simple/full)`ê³¼ Domain Memory/Prompt Manifest/Phoenix dataset sync ì˜µì…˜ì„ ë…¸ì¶œ, `StreamingDatasetLoader`ë¥¼ í†µí•œ ëŒ€ê·œëª¨ ë°ì´í„°ì…‹ ì²˜ë¦¬, Tracker ì„ íƒ(`langfuse`, `mlflow`, `phoenix`), Phoenix experiment metadata (`build_experiment_metadata`) ì‚½ì….
- `commands/gate.py`, `agent.py`, `domain.py`, `benchmark.py`, `kg.py`, `pipeline.py`, `analyze.py`, `config.py`, `langfuse.py`, `phoenix.py`, `api.py`: ê°ê° ê²Œì´íŠ¸ í…ŒìŠ¤íŠ¸, ìš´ì˜/ê°œë°œ ì—ì´ì „íŠ¸, ë„ë©”ì¸ ë©”ëª¨ë¦¬ bootstrap, Langfuse/phoenix ì„¤ì • í™•ì¸, FastAPI ì„œë²„ ì‹¤í–‰ ë“±ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤.
- `commands/history.py`, `experiment.py`: StoragePortë¥¼ ì¡°íšŒí•˜ì—¬ run/ì‹¤í—˜ íˆìŠ¤í† ë¦¬ë¥¼ í‘œ í˜•íƒœë¡œ ë…¸ì¶œí•©ë‹ˆë‹¤.

**Web API Adapter**
- `api/main.py`ì™€ `api/routers/*`ê°€ FastAPI ì—”ë“œí¬ì¸íŠ¸ë¥¼ êµ¬ì„±í•´ React UIì™€ í†µì‹ í•©ë‹ˆë‹¤.
- `api/adapter.py`ëŠ” Web UIìš© WebUIPort êµ¬í˜„ì²´ë¡œ í‰ê°€ ì‹¤í–‰/ì €ì¥ íë¦„ì„ ìº¡ìŠí™”í•©ë‹ˆë‹¤.

#### 3.3.2 Outbound Adapters (ì¶œë ¥ ì–´ëŒ‘í„°)

**Dataset Loaders (CSV, Excel, JSON)**

```python
class CSVDatasetLoader(BaseDatasetLoader):
    """CSV íŒŒì¼ ë¡œë”."""

    def load(self, file_path: str | Path) -> Dataset:
        """CSV íŒŒì¼ì„ Datasetìœ¼ë¡œ ë³€í™˜"""
        df = pd.read_csv(file_path)
        test_cases = [
            TestCase(
                id=f"tc-{i+1:03d}",
                question=row["question"],
                answer=row["answer"],
                contexts=row["contexts"].split("|"),
                ground_truth=row.get("ground_truth"),
            )
            for i, row in df.iterrows()
        ]
        return Dataset(
            name=Path(file_path).stem,
            version="1.0.0",
            test_cases=test_cases,
        )

    def supports(self, file_path: str | Path) -> bool:
        """CSV íŒŒì¼ ì§€ì› ì—¬ë¶€"""
        return Path(file_path).suffix.lower() == ".csv"
```

**ì±…ì„:**
- íŒŒì¼ í˜•ì‹ë³„ ë°ì´í„° ë¡œë“œ
- Dataset ì—”í‹°í‹°ë¡œ ë³€í™˜
- íŒŒì¼ í˜•ì‹ ì§€ì› ì—¬ë¶€ í™•ì¸

**StreamingDatasetLoader**

ëŒ€ìš©ëŸ‰ CSV/JSON/Excel íŒŒì¼ì€ `StreamingDatasetLoader`(+`StreamingConfig`)ì™€ `StreamingTestCaseIterator`ë¥¼ í†µí•´ ì²­í¬ ë‹¨ìœ„ë¡œ ì²˜ë¦¬í•©ë‹ˆë‹¤. IteratorëŠ” ì²­í¬ ì§„í–‰ ìƒí™©ì„ ì™¸ë¶€ ì½œë°±ìœ¼ë¡œ ë‚´ë³´ë‚´ê³ , CLIëŠ” ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì„ 10ë¶„ì˜ 1 ìˆ˜ì¤€ìœ¼ë¡œ ìœ ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**LLM Adapters**

```python
class OpenAIAdapter(LLMPort):
    """OpenAI LLM adapter."""

    def __init__(self, settings: Settings):
        self._settings = settings
        self._ragas_llm = llm_factory(
            model=settings.openai_model,
            provider="openai",
            api_key=settings.openai_api_key,
        )

    def get_model_name(self) -> str:
        return self._settings.openai_model

    def as_ragas_llm(self):
        """Ragas í˜¸í™˜ LLM ë°˜í™˜"""
        return self._ragas_llm
```

**ì±…ì„:**
- LLM API í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™”
- Ragas í˜¸í™˜ í˜•ì‹ìœ¼ë¡œ ë³€í™˜
- í† í° ì‚¬ìš©ëŸ‰ ì¶”ì 

ì¶”ê°€ êµ¬í˜„ì²´:
- `token_aware_chat.py`: í† í° ì‚¬ìš©ëŸ‰ì„ ê¸°ë°˜ìœ¼ë¡œ ë™ì ìœ¼ë¡œ max_tokensë¥¼ ì¡°ì ˆí•˜ëŠ” ë˜í¼.
- `instructor_factory.py`: Instructor(OpenAI function calling í˜¸í™˜) í”„ë¡¬í”„íŠ¸ë¥¼ ìƒì„±.
- `llm_relation_augmenter.py`: LLMì„ ì´ìš©í•´ Retrieved contextì— ê´€ê³„ ì„¤ëª…ì„ ì‚½ì…í•´ Domain Memoryì™€ì˜ ê²°í•©ë„ë¥¼ ë†’ì…ë‹ˆë‹¤.

**Storage Adapters**

```python
class SQLiteStorageAdapter(StoragePort):
    """SQLite ì €ì¥ì†Œ ì–´ëŒ‘í„°."""

    def save_run(self, run: EvaluationRun) -> str:
        """EvaluationRunì„ SQLiteì— ì €ì¥"""
        # EvaluationRun â†’ DB ìŠ¤í‚¤ë§ˆ ë³€í™˜
        # SQL ì¿¼ë¦¬ ì‹¤í–‰
        ...

    def get_run(self, run_id: str) -> EvaluationRun:
        """DBì—ì„œ EvaluationRun ì¡°íšŒ"""
        # DB ì¿¼ë¦¬ ì‹¤í–‰
        # DB ìŠ¤í‚¤ë§ˆ â†’ EvaluationRun ë³€í™˜
        ...
```

**ì±…ì„:**
- ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬ ì‹¤í–‰
- ë„ë©”ì¸ ì—”í‹°í‹° â†” DB ìŠ¤í‚¤ë§ˆ ë³€í™˜

`postgres_adapter.py`ëŠ” ë™ì¼í•œ `BaseSQLStorageAdapter` ì¶”ìƒí™”ë¥¼ ê³µìœ í•˜ë©° `postgres_schema.sql`ì„ ë¡œë“œí•˜ì—¬ ë‹¤ì¤‘ ì‹¤í–‰ í™˜ê²½(CI)ì—ì„œë„ ë™ì¼í•œ ìŠ¤í‚¤ë§ˆë¥¼ ìœ ì§€í•©ë‹ˆë‹¤.

**Tracker Adapters**

```python
class LangfuseAdapter(TrackerPort):
    """Langfuse ì¶”ì  ì–´ëŒ‘í„°."""

    def log_evaluation_run(self, run: EvaluationRun) -> str:
        """EvaluationRunì„ Langfuse traceë¡œ ê¸°ë¡"""
        trace = self._client.trace(
            name=f"evaluation-{run.run_id}",
            metadata={
                "dataset": run.dataset_name,
                "model": run.model_name,
            }
        )

        # ê° í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë¥¼ spanìœ¼ë¡œ ê¸°ë¡
        for result in run.results:
            span = trace.span(
                name=result.test_case_id,
                input={"question": result.question},
                output={"answer": result.answer},
            )

            # ë©”íŠ¸ë¦­ ì ìˆ˜ ê¸°ë¡
            for metric in result.metrics:
                span.score(
                    name=metric.name,
                    value=metric.score,
                )

        return trace.id
```

**ì±…ì„:**
- ì¶”ì  ì‹œìŠ¤í…œ API í˜¸ì¶œ
- ë„ë©”ì¸ ì—”í‹°í‹° â†’ ì¶”ì  í˜•ì‹ ë³€í™˜

Langfuse ì™¸ì— `mlflow_adapter.py`(ì‹¤í—˜/íŒŒë¼ë¯¸í„° ê¸°ë¡), `phoenix_adapter.py`(OpenInference ì´ë²¤íŠ¸ ì „ì†¡)ë„ ë™ì¼í•œ `TrackerPort`ë¥¼ êµ¬í˜„í•˜ì—¬ CLI ì˜µì…˜ í•˜ë‚˜ë¡œ ì¶”ì  ëŒ€ìƒì„ êµì²´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**Web Adapter (FastAPI)**

```python
class WebUIAdapter:
    """ì›¹ UI ì–´ëŒ‘í„°.

    FastAPI ê¸°ë°˜ Web APIë¥¼ ì œê³µí•©ë‹ˆë‹¤.
    """

    def run_evaluation(
        self,
        request: EvalRequest,
        *,
        on_progress: Callable[[EvalProgress], None] | None = None,
    ) -> EvaluationRun:
        """ì›¹ UIì—ì„œ í‰ê°€ ì‹¤í–‰"""
        ...

    def get_run_history(...) -> list[EvaluationRun]: ...
    def generate_llm_report(...) -> str: ...
```

**ì±…ì„:**
- FastAPI Web API ì œê³µ
- í‰ê°€ ì‹¤í–‰ ë° ì§„í–‰ë¥  ìŠ¤íŠ¸ë¦¬ë°
- ê²°ê³¼ ì¡°íšŒ/ë¦¬í¬íŠ¸ ìƒì„± API ì œê³µ
- íŒŒì¼ ì—…ë¡œë“œ ë° ê²€ì¦

**Analysis Adapters (í†µê³„/NLP/ì¸ê³¼ ë¶„ì„)**

```python
class StatisticalAnalysisAdapter(AnalysisPort):
    """í†µê³„ ë¶„ì„ ì–´ëŒ‘í„°."""

    def analyze_statistics(self, run: EvaluationRun) -> StatisticalResult:
        """í†µê³„ ë¶„ì„ ìˆ˜í–‰"""
        ...

class NLPAnalysisAdapter(NLPAnalysisPort):
    """NLP ë¶„ì„ ì–´ëŒ‘í„°."""

    def analyze(self, run: EvaluationRun) -> NLPResult:
        """NLP ë¶„ì„ ìˆ˜í–‰"""
        ...

class CausalAnalysisAdapter(CausalAnalysisPort):
    """ì¸ê³¼ ë¶„ì„ ì–´ëŒ‘í„°."""

    def analyze_causality(self, run: EvaluationRun) -> CausalResult:
        """ì¸ê³¼ ë¶„ì„ ìˆ˜í–‰"""
        ...
```

**ì±…ì„:**
- í†µê³„ ë¶„ì„ (í‰ê· , ë¶„ì‚°, ë¶„í¬ ë“±)
- NLP ë¶„ì„ (ê°ì„±, ì£¼ì œ, í‚¤ì›Œë“œ ë“±)
- ì¸ê³¼ ë¶„ì„ (ì¸ê³¼ ê´€ê³„ ì¶”ë¡ )

**Domain Memory Adapter**

```python
class SQLiteDomainMemoryAdapter(DomainMemoryPort):
    """SQLite ê¸°ë°˜ ë„ë©”ì¸ ë©”ëª¨ë¦¬ ì–´ëŒ‘í„°."""

    def save_fact(self, fact: FactualFact) -> str: ...
    def save_learning(self, learning: LearningMemory) -> str: ...
    def save_behavior(self, behavior: BehaviorEntry) -> str: ...
    def hybrid_search(...) -> dict[str, list]: ...
```

**ì±…ì„:**
- Factual/Experiential/Behavior ë ˆì´ì–´ ì €ì¥
- ë©”ëª¨ë¦¬ ê²€ìƒ‰ ë° í†µí•©
- Knowledge Graph ì—°ë™

**Improvement Adapters**

```python
class PatternDetector(PatternDetectorPort):
    """ê·œì¹™ ê¸°ë°˜ íŒ¨í„´ íƒì§€ê¸°."""

    def detect_patterns(
        self,
        run: EvaluationRun,
        metrics: Sequence[str] | None = None,
    ) -> Mapping[str, list[PatternEvidence]]: ...

class InsightGenerator(InsightGeneratorPort):
    """LLM ê¸°ë°˜ ì¸ì‚¬ì´íŠ¸ ìƒì„±ê¸°."""

    def analyze_batch_failures(...) -> ClaimImprovementProtocol: ...
```

**ì±…ì„:**
- í”Œë ˆì´ë¶ ê¸°ë°˜ íŒ¨í„´ íƒì§€
- LLM ê¸°ë°˜ ì¸ì‚¬ì´íŠ¸ ìƒì„±
- ê°œì„  ì•¡ì…˜ ì œì•ˆ

**Analysis Modules & Cache**
- `adapters/outbound/analysis/*_module.py`ëŠ” `AnalysisModulePort`ë¥¼ êµ¬í˜„í•˜ì—¬ PipelineOrchestratorê°€ ë™ì ìœ¼ë¡œ DAGë¥¼ êµ¬ì„±í•  ìˆ˜ ìˆê²Œ í•©ë‹ˆë‹¤. `statistical_analyzer_module.py`, `nlp_analyzer_module.py`, `causal_analyzer_module.py`, `analysis_report_module.py`, `summary_report_module.py`, `comparison_report_module.py`, `verification_report_module.py`, `data_loader_module.py` ë“±ì´ ì¡´ì¬í•˜ë©° ë©”íƒ€ë°ì´í„°ëŠ” `ModuleCatalog`ì— ë“±ë¡ë©ë‹ˆë‹¤.
- `cache/memory_cache.py`ëŠ” ë‹¨ìˆœ LRU, `cache/hybrid_cache.py`ëŠ” Hot/Cold 2-tier ìºì‹œ, Prefetch, TTL í™•ì¥, í†µê³„ ìˆ˜ì§‘ì„ ì œê³µí•˜ì—¬ `AnalysisCachePort` êµ¬í˜„ìœ¼ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤.

**NLP Â· Retrieval Â· KG ì–´ëŒ‘í„°**
- `nlp/korean`ì€ kiwipiepy ê¸°ë°˜ í† í¬ë‚˜ì´ì €, BM25/Dense/Hybrid retriever, í‰ê°€ íˆ´í‚·(`korean_evaluation.py`), Document chunkerë¥¼ ì œê³µí•˜ë©° `KoreanNLPPort`ì™€ `DocumentChunker` ì„œë¹„ìŠ¤ê°€ ì‚¬ìš©í•˜ëŠ” ìì›ì…ë‹ˆë‹¤.
- `adapters/outbound/kg`ëŠ” `networkx_adapter.py`, `query_strategies.py`ë¡œ ì§€ì‹ ê·¸ë˜í”„ ìƒì„±Â·íƒìƒ‰ì„ ì§€ì›í•©ë‹ˆë‹¤.

**Domain Memory Adapter ì‹¬í™”**
- `domain_memory/sqlite_adapter.py`ëŠ” FTS5 ì¸ë±ìŠ¤ ë™ê¸°í™”(`_rebuild_fts_indexes`)ì™€ abstraction level, KG binding, behavior ê²€ìƒ‰, formation/evolution utilì„ êµ¬í˜„í•©ë‹ˆë‹¤. `DomainLearningHook`ê³¼ CLI history ëª…ë ¹ì´ ì´ ê¸°ëŠ¥ì„ í™œìš©í•©ë‹ˆë‹¤.

**Report & Phoenix**
- `report/llm_report_generator.py`ëŠ” ë©”íŠ¸ë¦­ë³„ ì „ë¬¸ê°€ í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿, í† í° ë¹„ìš© ê³„ì‚°, ë¹„ë™ê¸° LLM í˜¸ì¶œì„ ì œê³µí•˜ì—¬ `ReportPort` êµ¬í˜„ì²´ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤. `markdown_adapter.py`ëŠ” CLI/READMEìš© ìš”ì•½ í…ìŠ¤íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
- `adapters/outbound/phoenix/sync_service.py`ëŠ” Phoenix dataset/experiment APIë¥¼ ê°ì‹¸ê³ , CLI `--phoenix-dataset/--phoenix-experiment` ì˜µì…˜ê³¼ `config/phoenix_support.py`ê°€ ì´ í´ë˜ìŠ¤ë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.

---

## 4. ë°ì´í„° íë¦„ ë¶„ì„

### 4.1 í‰ê°€ ì‹¤í–‰ íë¦„ (Evaluation Flow)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        í‰ê°€ ì‹¤í–‰ ì „ì²´ íë¦„                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[1] ì‚¬ìš©ì ì…ë ¥
    â”‚
    â–¼
[2] CLI Adapter (adapters/inbound/cli.py)
    â”‚  - ëª…ë ¹ íŒŒì‹± ë° ê²€ì¦
    â”‚  - ì„¤ì • ë¡œë“œ
    â”‚
    â”œâ”€> [3] Dataset Loader Factory
    â”‚      â”‚  - íŒŒì¼ í˜•ì‹ ê°ì§€
    â”‚      â”‚  - ì ì ˆí•œ ë¡œë” ì„ íƒ (Strategy íŒ¨í„´)
    â”‚      â”‚
    â”‚      â–¼
    â”‚  [4] CSV/Excel/JSON Loader (adapters/outbound/dataset/)
    â”‚      â”‚  - íŒŒì¼ ì½ê¸°
    â”‚      â”‚  - Dataset ì—”í‹°í‹°ë¡œ ë³€í™˜
    â”‚      â”‚
    â”‚      â””â”€> [5] Dataset ì—”í‹°í‹° (domain/entities/dataset.py)
    â”‚
    â”œâ”€> [6] LLM Adapter Factory
    â”‚      â”‚  - í”„ë¡œë°”ì´ë” ì„¤ì • í™•ì¸
    â”‚      â”‚  - ì ì ˆí•œ ì–´ëŒ‘í„° ìƒì„±
    â”‚      â”‚
    â”‚      â–¼
    â”‚  [7] OpenAI/Anthropic/Ollama Adapter (adapters/outbound/llm/)
    â”‚      â”‚  - LLM í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™”
    â”‚      â”‚  - LLMPort êµ¬í˜„
    â”‚      â”‚
    â”‚      â””â”€> [8] LLMPort ì¸í„°í˜ì´ìŠ¤ (ports/outbound/llm_port.py)
    â”‚
    â”œâ”€> [6a] Domain Memory ì´ˆê¸°í™” (--use-domain-memory ì˜µì…˜)
    â”‚      â”‚  - SQLiteDomainMemoryAdapter ìƒì„±
    â”‚      â”‚  - MemoryAwareEvaluator ìƒì„±
    â”‚      â”‚  - ì‹ ë¢°ë„ ì ìˆ˜ ì¡°íšŒ ë° threshold ìë™ ì¡°ì •
    â”‚      â”‚
    â”‚      â””â”€> [6b] MemoryAwareEvaluator (domain/services/memory_aware_evaluator.py)
    â”‚              â”‚  - RagasEvaluator ë˜í•‘
    â”‚              â”‚  - DomainMemoryPort ì£¼ì…
    â”‚              â”‚
    â”‚              â””â”€> [6c] ì»¨í…ìŠ¤íŠ¸ ë³´ê°• (--augment-context ì˜µì…˜)
    â”‚                      â”‚  - ê° í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì§ˆë¬¸ìœ¼ë¡œ ê´€ë ¨ ì‚¬ì‹¤ ê²€ìƒ‰
    â”‚                      â”‚  - ì»¨í…ìŠ¤íŠ¸ì— ì‚¬ì‹¤ ì¶”ê°€
    â”‚
    â””â”€> [9] RagasEvaluator ë˜ëŠ” MemoryAwareEvaluator (domain/services/evaluator.py)
            â”‚  - í‰ê°€ ì‹¤í–‰ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜
            â”‚  - ë©”ëª¨ë¦¬ í™œìš© ì‹œ: ì¡°ì •ëœ thresholdë¡œ í‰ê°€
            â”‚
            â”œâ”€> [10] Ragas ë©”íŠ¸ë¦­ ì‹¤í–‰
            â”‚       â”‚  - LLMPort.as_ragas_llm() í˜¸ì¶œ
            â”‚       â”‚  - ê° í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ í‰ê°€
            â”‚       â”‚
            â”‚       â””â”€> [11] LLM Adapter
            â”‚               - ì‹¤ì œ LLM API í˜¸ì¶œ
            â”‚               - í† í° ì‚¬ìš©ëŸ‰ ì¶”ì 
            â”‚
            â”œâ”€> [12] ì»¤ìŠ¤í…€ ë©”íŠ¸ë¦­ ì‹¤í–‰
            â”‚       â”‚  - InsuranceTermAccuracy ë“±
            â”‚       â”‚
            â”‚       â””â”€> [13] ë„ë©”ì¸ ë©”íŠ¸ë¦­ (domain/metrics/)
            â”‚
            â””â”€> [14] ê²°ê³¼ ì§‘ê³„
                    â”‚  - TestCaseResult ìƒì„±
                    â”‚  - EvaluationRun ìƒì„±
                    â”‚  - í†µê³¼/ì‹¤íŒ¨ íŒì •
                    â”‚
                    â””â”€> [15] EvaluationRun ì—”í‹°í‹° (domain/entities/result.py)

[16] ê²°ê³¼ ì¶œë ¥
    â”‚  - CLI Adapterê°€ ê²°ê³¼ í¬ë§·íŒ…
    â”‚  - ì‚¬ìš©ìì—ê²Œ í‘œì‹œ
    â”‚
    â”œâ”€> [17] Storage Adapter (ì„ íƒì )
    â”‚       â”‚  - EvaluationRun ì €ì¥
    â”‚       â”‚
    â”‚       â””â”€> [18] SQLite/PostgreSQL
    â”‚
    â””â”€> [19] Tracker Adapter (ì„ íƒì )
            â”‚  - Langfuse/MLflowì— ê¸°ë¡
            â”‚
            â””â”€> [20] ì¶”ì  ì‹œìŠ¤í…œ
```

### 4.2 ì‹¤í—˜ ê´€ë¦¬ íë¦„ (Experiment Flow)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        A/B í…ŒìŠ¤íŠ¸ ì‹¤í—˜ íë¦„                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[1] ì‹¤í—˜ ìƒì„±
    â”‚
    â–¼
[2] ExperimentManager.create_experiment()
    â”‚  - Experiment ì—”í‹°í‹° ìƒì„±
    â”‚
    â””â”€> [3] Experiment ì—”í‹°í‹° (domain/entities/experiment.py)

[4] ê·¸ë£¹ ì¶”ê°€
    â”‚
    â–¼
[5] Experiment.add_group()
    â”‚  - ExperimentGroup ìƒì„±
    â”‚
    â””â”€> [6] ExperimentGroup ì—”í‹°í‹°

[7] í‰ê°€ ì‹¤í–‰ ì¶”ê°€
    â”‚
    â–¼
[8] Experiment.add_run_to_group()
    â”‚  - ê·¸ë£¹ì— run_id ì¶”ê°€
    â”‚
    â””â”€> [9] Storage Adapter
            â”‚  - EvaluationRun ì €ì¥
            â”‚
            â””â”€> [10] ë°ì´í„°ë² ì´ìŠ¤

[11] ê·¸ë£¹ ë¹„êµ
     â”‚
     â–¼
[12] ExperimentManager.compare_groups()
     â”‚  - ê° ê·¸ë£¹ì˜ EvaluationRun ì¡°íšŒ
     â”‚  - ë©”íŠ¸ë¦­ë³„ í‰ê·  ì ìˆ˜ ê³„ì‚°
     â”‚  - ìµœê³  ê·¸ë£¹ ë° ê°œì„ ìœ¨ ê³„ì‚°
     â”‚
     â”œâ”€> [13] Storage Adapter
     â”‚       â”‚  - StoragePort.get_run() í˜¸ì¶œ
     â”‚       â”‚
     â”‚       â””â”€> [14] ë°ì´í„°ë² ì´ìŠ¤
     â”‚
     â””â”€> [15] MetricComparison ê²°ê³¼
             â”‚  - ê·¸ë£¹ë³„ ì ìˆ˜
             â”‚  - ìµœê³  ê·¸ë£¹
             â”‚  - ê°œì„ ìœ¨
```

### 4.3 í…ŒìŠ¤íŠ¸ì…‹ ìƒì„± íë¦„ (Testset Generation Flow)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        í…ŒìŠ¤íŠ¸ì…‹ ìƒì„± íë¦„                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[1] ë¬¸ì„œ ì…ë ¥
    â”‚
    â–¼
[2] CLI Adapter
    â”‚  - ë¬¸ì„œ íŒŒì¼ ì½ê¸°
    â”‚
    â””â”€> [3] ë¬¸ì„œ í…ìŠ¤íŠ¸

[4] ìƒì„± ë°©ë²• ì„ íƒ
    â”‚
    â”œâ”€> [5] Basic Method
    â”‚       â”‚
    â”‚       â–¼
    â”‚   [6] BasicTestsetGenerator
    â”‚       â”‚  - DocumentChunker ì‚¬ìš©
    â”‚       â”‚  - ì²­í¬ì—ì„œ ì§ˆë¬¸ ìƒì„±
    â”‚       â”‚
    â”‚       â””â”€> [7] Dataset ì—”í‹°í‹°
    â”‚
    â””â”€> [8] Knowledge Graph Method
            â”‚
            â–¼
        [9] KnowledgeGraphGenerator
            â”‚  - EntityExtractor ì‚¬ìš©
            â”‚  - ì§€ì‹ ê·¸ë˜í”„ êµ¬ì¶•
            â”‚  - ê·¸ë˜í”„ì—ì„œ ì§ˆë¬¸ ìƒì„±
            â”‚
            â””â”€> [10] Dataset ì—”í‹°í‹°

[11] ê²°ê³¼ ì €ì¥
     â”‚  - JSON íŒŒì¼ë¡œ ì €ì¥
```

### 4.4 ë¶„ì„ íŒŒì´í”„ë¼ì¸ íë¦„ (Analysis Pipeline Flow)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ë¶„ì„ íŒŒì´í”„ë¼ì¸ ì‹¤í–‰ íë¦„                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[1] ì‚¬ìš©ì ì¿¼ë¦¬ ì…ë ¥
    â”‚  ì˜ˆ: "ìš”ì•½í•´ì¤˜", "ë¹„êµí•´ì¤˜", "ê²€ì¦í•´ì¤˜"
    â”‚
    â–¼
[2] CLI/Web Adapter
    â”‚  - ì¿¼ë¦¬ íŒŒì‹±
    â”‚
    â””â”€> [3] PipelineOrchestrator
            â”‚
            â”œâ”€> [4] IntentClassifier
            â”‚       â”‚  - í‚¤ì›Œë“œ ê¸°ë°˜ ì˜ë„ ë¶„ë¥˜
            â”‚       â”‚  - AnalysisIntent ì¶”ì¶œ
            â”‚       â”‚
            â”‚       â””â”€> [5] AnalysisIntent
            â”‚               (VERIFY, COMPARE, ANALYZE, GENERATE ë“±)
            â”‚
            â”œâ”€> [6] TemplateRegistry
            â”‚       â”‚  - ì˜ë„ë³„ í…œí”Œë¦¿ ì¡°íšŒ
            â”‚       â”‚
            â”‚       â””â”€> [7] AnalysisPipeline í…œí”Œë¦¿
            â”‚               - ë…¸ë“œ ë° ì—£ì§€ ì •ì˜
            â”‚
            â””â”€> [8] Pipeline ë¹Œë“œ
                    â”‚  - í…œí”Œë¦¿ ë³µì‚¬
                    â”‚  - ì»¨í…ìŠ¤íŠ¸ ì£¼ì…
                    â”‚
                    â””â”€> [9] AnalysisPipeline ì—”í‹°í‹°

[10] íŒŒì´í”„ë¼ì¸ ì‹¤í–‰
     â”‚
     â–¼
[11] PipelineOrchestrator.execute_pipeline()
     â”‚  - DAG í† í´ë¡œì§€ ì •ë ¬
     â”‚  - ì˜ì¡´ì„± ìˆœì„œëŒ€ë¡œ ì‹¤í–‰
     â”‚
     â”œâ”€> [12] AnalysisModule ì‹¤í–‰
     â”‚       â”‚  - StatisticalAnalysisModule
     â”‚       â”‚  - NLPAnalysisModule
     â”‚       â”‚  - CausalAnalysisModule
     â”‚       â”‚  - ReportModule
     â”‚       â”‚
     â”‚       â””â”€> [13] NodeResult
     â”‚
     â””â”€> [14] PipelineResult
             â”‚  - ëª¨ë“  ë…¸ë“œ ê²°ê³¼ ì§‘ê³„
             â”‚  - ìµœì¢… ë¦¬í¬íŠ¸ ìƒì„±
```

### 4.5 ë„ë©”ì¸ ë©”ëª¨ë¦¬ í˜•ì„± íë¦„ (Domain Memory Formation Flow)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ë„ë©”ì¸ ë©”ëª¨ë¦¬ í˜•ì„± íë¦„                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[1] í‰ê°€ ì™„ë£Œ
    â”‚
    â–¼
[2] DomainLearningHook.on_evaluation_complete()
    â”‚
    â”œâ”€> [3] Factual Layer í˜•ì„±
    â”‚       â”‚  - í‰ê°€ ê²°ê³¼ì—ì„œ SPO íŠ¸ë¦¬í”Œ ì¶”ì¶œ
    â”‚       â”‚  - ë†’ì€ ì‹ ë¢°ë„ ì‚¬ì‹¤ë§Œ ì €ì¥
    â”‚       â”‚
    â”‚       â””â”€> [4] DomainMemoryPort.save_fact()
    â”‚               â””â”€> [5] SQLiteDomainMemoryAdapter
    â”‚                       â””â”€> [6] ë„ë©”ì¸ ë©”ëª¨ë¦¬ DB
    â”‚
    â”œâ”€> [7] Experiential Layer í˜•ì„±
    â”‚       â”‚  - ì„±ê³µ/ì‹¤íŒ¨ íŒ¨í„´ ì¶”ì¶œ
    â”‚       â”‚  - ë©”íŠ¸ë¦­ë³„ ì ìˆ˜ ë¶„í¬ í•™ìŠµ
    â”‚       â”‚
    â”‚       â””â”€> [8] DomainMemoryPort.save_learning()
    â”‚
    â””â”€> [9] Behavior Layer í˜•ì„±
            â”‚  - ì¬ì‚¬ìš© ê°€ëŠ¥í•œ í–‰ë™ íŒ¨í„´ ì¶”ì¶œ
            â”‚  - ì„±ê³µë¥  ê¸°ë°˜ í•„í„°ë§
            â”‚
            â””â”€> [10] DomainMemoryPort.save_behavior()

[11] ë©”ëª¨ë¦¬ í™œìš©
     â”‚  - í–¥í›„ í‰ê°€ì—ì„œ ë©”ëª¨ë¦¬ ê²€ìƒ‰
     â”‚  - Knowledge Graph ì—°ë™
```

### 4.6 ë„ë©”ì¸ ë©”ëª¨ë¦¬ í™œìš© íë¦„ (Domain Memory Usage Flow)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ë„ë©”ì¸ ë©”ëª¨ë¦¬ í™œìš© íë¦„                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[1] í‰ê°€ ì‹œì‘ (CLI: --use-domain-memory)
    â”‚
    â–¼
[2] MemoryAwareEvaluator ì´ˆê¸°í™”
    â”‚  - RagasEvaluator ë˜í•‘
    â”‚  - DomainMemoryPort ì£¼ì…
    â”‚
    â”œâ”€> [3] í‰ê°€ ì „: ì‹ ë¢°ë„ ì ìˆ˜ ì¡°íšŒ
    â”‚       â”‚
    â”‚       â””â”€> DomainMemoryPort.get_aggregated_reliability()
    â”‚               â”‚  - ê³¼ê±° í‰ê°€ì—ì„œ í•™ìŠµí•œ ë©”íŠ¸ë¦­ë³„ ì‹ ë¢°ë„
    â”‚               â”‚  - ì˜ˆ: {"faithfulness": 0.85, "answer_relevancy": 0.78}
    â”‚               â”‚
    â”‚               â””â”€> [4] Threshold ìë™ ì¡°ì •
    â”‚                       â”‚  - ì‹ ë¢°ë„ < 0.6: threshold - 0.1 (ìµœì†Œ 0.5)
    â”‚                       â”‚  - ì‹ ë¢°ë„ > 0.85: threshold + 0.05 (ìµœëŒ€ 0.95)
    â”‚
    â”œâ”€> [5] ì»¨í…ìŠ¤íŠ¸ ë³´ê°• (CLI: --augment-context)
    â”‚       â”‚
    â”‚       â””â”€> MemoryAwareEvaluator.augment_context_with_facts()
    â”‚               â”‚  - ì§ˆë¬¸ìœ¼ë¡œ ê´€ë ¨ ì‚¬ì‹¤ ê²€ìƒ‰
    â”‚               â”‚  - DomainMemoryPort.search_facts()
    â”‚               â”‚
    â”‚               â””â”€> [6] ì»¨í…ìŠ¤íŠ¸ì— ì‚¬ì‹¤ ì¶”ê°€
    â”‚                       â”‚  - "[ê´€ë ¨ ì‚¬ì‹¤]\n- ì£¼ì²´ ê´€ê³„ ê°ì²´"
    â”‚
    â””â”€> [7] í‰ê°€ ì‹¤í–‰
            â”‚
            â””â”€> RagasEvaluator.evaluate()
                    â”‚  - ì¡°ì •ëœ thresholdë¡œ í‰ê°€
                    â”‚  - ë³´ê°•ëœ ì»¨í…ìŠ¤íŠ¸ ì‚¬ìš©
                    â”‚
                    â””â”€> [8] EvaluationRun ê²°ê³¼

[9] ë¶„ì„ ë‹¨ê³„ (ì„ íƒì )
    â”‚
    â–¼
[10] MemoryBasedAnalysis.generate_insights()
     â”‚  - ê³¼ê±° í•™ìŠµ ë©”ëª¨ë¦¬ì™€ í˜„ì¬ ê²°ê³¼ ë¹„êµ
     â”‚  - DomainMemoryPort.list_learnings()
     â”‚
     â”œâ”€> [11] íŠ¸ë Œë“œ ë¶„ì„
     â”‚       â”‚  - baseline vs current ë¹„êµ
     â”‚       â”‚  - delta ê³„ì‚°
     â”‚
     â””â”€> [12] ì¸ì‚¬ì´íŠ¸ ìƒì„±
             â”‚  - ê´€ë ¨ ì‚¬ì‹¤ ê²€ìƒ‰
             â”‚  - ì¶”ì²œ ì‚¬í•­ ìƒì„±
             â”‚
             â””â”€> [13] Insights ë”•ì…”ë„ˆë¦¬
                     - trends: {"metric": {"current": 0.85, "baseline": 0.82, "delta": 0.03}}
                     - related_facts: [...]
                     - recommendations: ["faithfulness ê°œì„  ì¤‘: í˜„ì¬ ì „ëµì„ ìœ ì§€í•˜ê±°ë‚˜ í™•ì¥í•˜ì„¸ìš”."]

[14] í–‰ë™ íŒ¨í„´ ì¬ì‚¬ìš© (ì„ íƒì )
     â”‚
     â””â”€> MemoryBasedAnalysis.apply_successful_behaviors()
             â”‚  - ì§ˆë¬¸ ì»¨í…ìŠ¤íŠ¸ë¡œ í–‰ë™ ê²€ìƒ‰
             â”‚  - DomainMemoryPort.search_behaviors()
             â”‚  - ì„±ê³µë¥  >= 0.8ì¸ í–‰ë™ë§Œ í•„í„°ë§
             â”‚
             â””â”€> [15] ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì•¡ì…˜ ì‹œí€€ìŠ¤
                     - ["retrieve_contexts", "extract_monetary_value", "generate_response"]
```

### 4.8 ê°œì„  ê°€ì´ë“œ ìƒì„± íë¦„ (Improvement Guide Flow)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ê°œì„  ê°€ì´ë“œ ìƒì„± íë¦„                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[1] í‰ê°€ ì‹¤í–‰ ê²°ê³¼
    â”‚
    â–¼
[2] ImprovementGuideService.generate_report()
    â”‚
    â”œâ”€> [3] PatternDetector.detect_patterns()
    â”‚       â”‚  - í”Œë ˆì´ë¶ ê·œì¹™ ê¸°ë°˜ íƒì§€
    â”‚       â”‚  - ë‚®ì€ ë©”íŠ¸ë¦­ ì ìˆ˜ íŒ¨í„´ ë¶„ì„
    â”‚       â”‚
    â”‚       â””â”€> [4] PatternEvidence ë¦¬ìŠ¤íŠ¸
    â”‚
    â”œâ”€> [5] InsightGenerator.analyze_batch_failures()
    â”‚       â”‚  - LLM ê¸°ë°˜ ì‹¬ì¸µ ë¶„ì„
    â”‚       â”‚  - ì‹¤íŒ¨ ìƒ˜í”Œ ì¼ê´„ ë¶„ì„
    â”‚       â”‚
    â”‚       â””â”€> [6] ClaimImprovementProtocol
    â”‚               - ì „ì²´ í‰ê°€
    â”‚               - ìš°ì„ ìˆœìœ„ ê°œì„  ì‚¬í•­
    â”‚
    â””â”€> [7] ImprovementReport ìƒì„±
            â”‚  - íŒ¨í„´ íƒì§€ ê²°ê³¼ í†µí•©
            â”‚  - LLM ì¸ì‚¬ì´íŠ¸ í†µí•©
            â”‚  - ì•¡ì…˜ ìš°ì„ ìˆœìœ„ ê²°ì •
            â”‚
            â””â”€> [8] ImprovementReport ì—”í‹°í‹°
                    - ê°œì„  ì•¡ì…˜ ëª©ë¡
                    - ì˜ˆìƒ ê°œì„  íš¨ê³¼
                    - êµ¬í˜„ íŒíŠ¸
```

### 4.9 ì˜ì¡´ì„± ì£¼ì… íë¦„ (Dependency Injection Flow)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ì˜ì¡´ì„± ì£¼ì… íŒ¨í„´                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[1] Factory í•¨ìˆ˜ë“¤ (adapters/outbound/__init__.py)
    â”‚
    â”œâ”€> get_loader(file_path) -> DatasetPort
    â”‚      â”‚  - íŒŒì¼ í˜•ì‹ì— ë”°ë¼ ì ì ˆí•œ ë¡œë” ë°˜í™˜
    â”‚      â”‚
    â”‚      â”œâ”€> CSVDatasetLoader
    â”‚      â”œâ”€> ExcelDatasetLoader
    â”‚      â””â”€> JSONDatasetLoader
    â”‚
    â”œâ”€> get_llm_adapter(settings) -> LLMPort
    â”‚      â”‚  - í”„ë¡œë°”ì´ë” ì„¤ì •ì— ë”°ë¼ ì ì ˆí•œ ì–´ëŒ‘í„° ë°˜í™˜
    â”‚      â”‚
    â”‚      â”œâ”€> OpenAIAdapter
    â”‚      â”œâ”€> AnthropicAdapter
    â”‚      â”œâ”€> AzureOpenAIAdapter
    â”‚      â””â”€> OllamaAdapter
    â”‚
    â””â”€> get_storage_adapter(settings) -> StoragePort
           â”‚  - ì €ì¥ì†Œ ì„¤ì •ì— ë”°ë¼ ì ì ˆí•œ ì–´ëŒ‘í„° ë°˜í™˜
           â”‚
           â”œâ”€> SQLiteStorageAdapter
           â””â”€> PostgreSQLStorageAdapter

[2] CLI Adapterì—ì„œ ì˜ì¡´ì„± ì£¼ì…
    â”‚
    â–¼
[3] ë„ë©”ì¸ ì„œë¹„ìŠ¤ ìƒì„±
    â”‚  evaluator = RagasEvaluator()
    â”‚  llm = get_llm_adapter(settings)  # LLMPort êµ¬í˜„
    â”‚
â””â”€> [4] ë„ë©”ì¸ ì„œë¹„ìŠ¤ì— í¬íŠ¸ ì „ë‹¬
            evaluator.evaluate(
                dataset=ds,
                metrics=metric_list,
                llm=llm,  # ì˜ì¡´ì„± ì£¼ì…
            )
```

### 4.10 ê´€ì¸¡ì„± Â· ì¶”ì  íë¦„ (Observability & Tracing Flow)

```
[1] CLI --phoenix-enabled / --tracker ì˜µì…˜
    â”‚
    â–¼
[2] config/phoenix_support.ensure_phoenix_instrumentation()
    â”‚  - OpenTelemetry TracerProvider êµ¬ì„±
    â”‚  - LangChain/OpenAI ìë™ ê³„ì¸¡
    â”‚
    â””â”€> instrumentation_span() ì»¨í…ìŠ¤íŠ¸ ë§¤ë‹ˆì €
            â”‚
            â”œâ”€> MemoryAwareEvaluator / DatasetLoader / PhoenixSyncService
            â”‚       - Domain Memory ê²€ìƒ‰, ìŠ¤íŠ¸ë¦¬ë° ë¡œë”©, Phoenix ì—…ë¡œë“œì— span ë¶€ì—¬
            â”‚
            â””â”€> domain/entities/rag_trace.py
                    - RetrievalData, GenerationData, RAGTraceData ì‘ì„±

[3] TrackerPort êµ¬í˜„ì²´ (Langfuse / MLflow / Phoenix)
    â”‚  - run ê²°ê³¼ë¥¼ trace/span/scoreë¡œ ê¸°ë¡
    â”‚  - Prompt manifest diff ì •ë³´ë¥¼ metadataì— í¬í•¨
    â”‚
    â””â”€> config/phoenix_support.extract_phoenix_links()
            - CLI/Web UI ì¶œë ¥ì— Phoenix Trace/Experiment URL ì‚½ì…

[4] PhoenixSyncService (ì˜µì…˜)
    â”‚  - Dataset/Experiment ì—…ë¡œë“œ
    â”‚  - Prompt manifest + Phoenix metadata ì—°ë™
    â”‚
    â””â”€> Phoenix UIì—ì„œ íŠ¸ë ˆì´ìŠ¤/ì‹¤í—˜/ë°ì´í„°ì…‹ì„ í•œ ë²ˆì— íƒìƒ‰

[5] reports/release_notes.py
    â”‚  - ìµœê·¼ run/ë¶„ì„ ìš”ì•½ì„ Markdownìœ¼ë¡œ ìƒì„±
    â”‚
    â””â”€> README/PR/Slackì— ë¶™ì¼ ìˆ˜ ìˆëŠ” ìë™ ë³´ê³ ì„œ ì œê³µ
```

### 4.11 ìë™í™” Â· ì—ì´ì „íŠ¸ íë¦„ (Automation & Agent Flow)

```
[1] evalvault agent list/info/run
    â”‚
    â–¼
[2] config/agent_types.py
    â”‚  - AgentType, AgentConfig, ìš´ì˜/ê°œë°œ í”„ë¡œí•„
    â”‚
    â””â”€> agent/main.py
            â”‚  - claude-agent-sdk ê¸°ë°˜ ê°œë°œìš© ì—ì´ì „íŠ¸ ì‹¤í–‰
            â”‚  - agent/prompts/*, agent/memory/* ê´€ë¦¬

[3] scripts/regression_runner.py
    â”‚  - config/regressions/*.json ë¡œë“œ
    â”‚  - RegressionSuite ì •ì˜, subprocess ì‹¤í–‰, httpx í˜¸ì¶œ
    â”‚
    â””â”€> CI/ì—ì´ì „íŠ¸ê°€ íšŒê·€ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ìë™ìœ¼ë¡œ ë°˜ë³µ
```

---

## 5. ì„¤ê³„ íŒ¨í„´ê³¼ ì›ì¹™

### 5.1 ì ìš©ëœ ì„¤ê³„ íŒ¨í„´

#### 5.1.1 Adapter Pattern (ì–´ëŒ‘í„° íŒ¨í„´)

**ëª©ì :** í˜¸í™˜ë˜ì§€ ì•ŠëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ í˜¸í™˜ ê°€ëŠ¥í•˜ê²Œ ë§Œë“¤ê¸°

**ì ìš©:**
- `LLMPort` ì¸í„°í˜ì´ìŠ¤ì™€ ë‹¤ì–‘í•œ LLM ì œê³µì (OpenAI, Anthropic, Azure, Ollama)
- `StoragePort` ì¸í„°í˜ì´ìŠ¤ì™€ ë‹¤ì–‘í•œ ë°ì´í„°ë² ì´ìŠ¤ (SQLite, PostgreSQL)

**ì˜ˆì‹œ:**
```python
# í¬íŠ¸ ì¸í„°í˜ì´ìŠ¤
class LLMPort(ABC):
    @abstractmethod
    def as_ragas_llm(self): ...

# ì–´ëŒ‘í„° êµ¬í˜„
class OpenAIAdapter(LLMPort):
    def as_ragas_llm(self):
        return llm_factory(model="gpt-4", provider="openai")

class AnthropicAdapter(LLMPort):
    def as_ragas_llm(self):
        return llm_factory(model="claude-3", provider="anthropic")
```

#### 5.1.2 Factory Pattern (íŒ©í† ë¦¬ íŒ¨í„´)

**ëª©ì :** ê°ì²´ ìƒì„± ë¡œì§ì„ ìº¡ìŠí™”

**ì ìš©:**
- `get_loader()`: íŒŒì¼ í˜•ì‹ì— ë”°ë¼ ì ì ˆí•œ ë¡œë” ìƒì„±
- `get_llm_adapter()`: í”„ë¡œë°”ì´ë” ì„¤ì •ì— ë”°ë¼ ì ì ˆí•œ LLM ì–´ëŒ‘í„° ìƒì„±

**ì˜ˆì‹œ:**
```python
def get_loader(file_path: str | Path) -> BaseDatasetLoader:
    """Factory: íŒŒì¼ í˜•ì‹ì— ë”°ë¼ ë¡œë” ì„ íƒ"""
    path = Path(file_path)
    for loader_class in _LOADERS:
        loader = loader_class()
        if loader.supports(path):
            return loader
    raise ValueError(f"Unsupported file format: {path.suffix}")
```

#### 5.1.3 Strategy Pattern (ì „ëµ íŒ¨í„´)

**ëª©ì :** ì•Œê³ ë¦¬ì¦˜ì„ ìº¡ìŠí™”í•˜ê³  ëŸ°íƒ€ì„ì— ì„ íƒ

**ì ìš©:**
- í…ŒìŠ¤íŠ¸ì…‹ ìƒì„± ë°©ë²•: `BasicTestsetGenerator` vs `KnowledgeGraphGenerator`
- ë°ì´í„°ì…‹ ë¡œë”: `CSVDatasetLoader` vs `JSONDatasetLoader` vs `ExcelDatasetLoader`

**ì˜ˆì‹œ:**
```python
# Strategy ì¸í„°í˜ì´ìŠ¤
class BaseDatasetLoader(ABC):
    @abstractmethod
    def load(self, file_path: Path) -> Dataset: ...

    @abstractmethod
    def supports(self, file_path: Path) -> bool: ...

# ì „ëµ êµ¬í˜„
class CSVDatasetLoader(BaseDatasetLoader):
    def supports(self, file_path: Path) -> bool:
        return file_path.suffix.lower() == ".csv"

class JSONDatasetLoader(BaseDatasetLoader):
    def supports(self, file_path: Path) -> bool:
        return file_path.suffix.lower() == ".json"
```

#### 5.1.4 Repository Pattern (ì €ì¥ì†Œ íŒ¨í„´)

**ëª©ì :** ë°ì´í„° ì ‘ê·¼ ë¡œì§ì„ ìº¡ìŠí™”

**ì ìš©:**
- `StoragePort`: ë°ì´í„°ë² ì´ìŠ¤ ì ‘ê·¼ì„ ì¶”ìƒí™”
- `SQLiteStorageAdapter`, `PostgreSQLStorageAdapter`: êµ¬ì²´ì ì¸ ì €ì¥ì†Œ êµ¬í˜„

**ì˜ˆì‹œ:**
```python
# Repository ì¸í„°í˜ì´ìŠ¤
class StoragePort(Protocol):
    def save_run(self, run: EvaluationRun) -> str: ...
    def get_run(self, run_id: str) -> EvaluationRun: ...

# Repository êµ¬í˜„
class SQLiteStorageAdapter(StoragePort):
    def save_run(self, run: EvaluationRun) -> str:
        # SQLite íŠ¹í™” êµ¬í˜„
        ...
```

### 5.2 SOLID ì›ì¹™

#### 5.2.1 Single Responsibility Principle (ë‹¨ì¼ ì±…ì„ ì›ì¹™)

ê° í´ë˜ìŠ¤ëŠ” í•˜ë‚˜ì˜ ì±…ì„ë§Œ ê°€ì§‘ë‹ˆë‹¤.

**ì˜ˆì‹œ:**
- `RagasEvaluator`: í‰ê°€ ì‹¤í–‰ë§Œ ë‹´ë‹¹
- `ExperimentManager`: ì‹¤í—˜ ê´€ë¦¬ë§Œ ë‹´ë‹¹
- `DocumentChunker`: ë¬¸ì„œ ì²­í‚¹ë§Œ ë‹´ë‹¹

#### 5.2.2 Open/Closed Principle (ê°œë°©/íì‡„ ì›ì¹™)

í™•ì¥ì—ëŠ” ì—´ë ¤ìˆê³  ìˆ˜ì •ì—ëŠ” ë‹«í˜€ìˆìŠµë‹ˆë‹¤.

**ì˜ˆì‹œ:**
- ìƒˆë¡œìš´ LLM ì œê³µì ì¶”ê°€: `LLMPort`ë¥¼ êµ¬í˜„í•˜ëŠ” ìƒˆ ì–´ëŒ‘í„°ë§Œ ì¶”ê°€
- ìƒˆë¡œìš´ ë©”íŠ¸ë¦­ ì¶”ê°€: `RagasEvaluator` ìˆ˜ì • ì—†ì´ ë©”íŠ¸ë¦­ë§Œ ì¶”ê°€

#### 5.2.3 Liskov Substitution Principle (ë¦¬ìŠ¤ì½”í”„ ì¹˜í™˜ ì›ì¹™)

ì„œë¸Œíƒ€ì…ì€ ë² ì´ìŠ¤ íƒ€ì…ì„ ëŒ€ì²´í•  ìˆ˜ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.

**ì˜ˆì‹œ:**
- ëª¨ë“  `LLMPort` êµ¬í˜„ì²´ëŠ” ì„œë¡œ êµì²´ ê°€ëŠ¥
- ëª¨ë“  `StoragePort` êµ¬í˜„ì²´ëŠ” ì„œë¡œ êµì²´ ê°€ëŠ¥

#### 5.2.4 Interface Segregation Principle (ì¸í„°í˜ì´ìŠ¤ ë¶„ë¦¬ ì›ì¹™)

í´ë¼ì´ì–¸íŠ¸ëŠ” ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ë©”ì„œë“œì— ì˜ì¡´í•˜ì§€ ì•Šì•„ì•¼ í•©ë‹ˆë‹¤.

**ì˜ˆì‹œ:**
- `LLMPort`: LLM ê´€ë ¨ ë©”ì„œë“œë§Œ í¬í•¨
- `StoragePort`: ì €ì¥ì†Œ ê´€ë ¨ ë©”ì„œë“œë§Œ í¬í•¨
- `TrackerPort`: ì¶”ì  ê´€ë ¨ ë©”ì„œë“œë§Œ í¬í•¨

#### 5.2.5 Dependency Inversion Principle (ì˜ì¡´ì„± ì—­ì „ ì›ì¹™)

ê³ ìˆ˜ì¤€ ëª¨ë“ˆì€ ì €ìˆ˜ì¤€ ëª¨ë“ˆì— ì˜ì¡´í•˜ì§€ ì•Šì•„ì•¼ í•©ë‹ˆë‹¤. ë‘˜ ë‹¤ ì¶”ìƒí™”ì— ì˜ì¡´í•´ì•¼ í•©ë‹ˆë‹¤.

**ì˜ˆì‹œ:**
- `RagasEvaluator`ëŠ” `LLMPort` ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´ (êµ¬ì²´ì ì¸ ì–´ëŒ‘í„°ì— ì˜ì¡´í•˜ì§€ ì•ŠìŒ)
- `ExperimentManager`ëŠ” `StoragePort` ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´ (êµ¬ì²´ì ì¸ ì €ì¥ì†Œì— ì˜ì¡´í•˜ì§€ ì•ŠìŒ)

---

## 6. ì˜ì¡´ì„± ê´€ë¦¬

### 6.1 ì˜ì¡´ì„± ë°©í–¥

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ì˜ì¡´ì„± ë°©í–¥ ë‹¤ì´ì–´ê·¸ë¨                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   External Systems   â”‚
                    â”‚  (File, API, DB)     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚    ADAPTERS          â”‚
                    â”‚  (êµ¬í˜„ ê³„ì¸µ)          â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚ depends on
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚      PORTS            â”‚
                    â”‚  (ì¸í„°í˜ì´ìŠ¤ ê³„ì¸µ)      â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚ depends on
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚      DOMAIN           â”‚
                    â”‚  (ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§)       â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ê·œì¹™: ì˜ì¡´ì„±ì€ í•­ìƒ ì™¸ë¶€ â†’ ë‚´ë¶€ ë°©í–¥
      ë„ë©”ì¸ì€ ì™¸ë¶€ì— ì˜ì¡´í•˜ì§€ ì•ŠìŒ
```

### 6.2 ì˜ì¡´ì„± ê·œì¹™ ìœ„ë°˜ ë°©ì§€

**ì˜ëª»ëœ ì˜ˆ:**
```python
# âŒ ë„ë©”ì¸ì´ ì–´ëŒ‘í„°ì— ì§ì ‘ ì˜ì¡´
from evalvault.adapters.outbound.llm.openai_adapter import OpenAIAdapter

class RagasEvaluator:
    def __init__(self):
        self.llm = OpenAIAdapter()  # êµ¬ì²´ì ì¸ êµ¬í˜„ì— ì˜ì¡´
```

**ì˜¬ë°”ë¥¸ ì˜ˆ:**
```python
# âœ… ë„ë©”ì¸ì´ í¬íŠ¸ ì¸í„°í˜ì´ìŠ¤ì—ë§Œ ì˜ì¡´
from evalvault.ports.outbound.llm_port import LLMPort

class RagasEvaluator:
    def __init__(self, llm: LLMPort):  # ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´
        self.llm = llm
```

### 6.3 ì˜ì¡´ì„± ì£¼ì… (Dependency Injection)

**ìƒì„±ì ì£¼ì… (Constructor Injection)**

```python
# ë„ë©”ì¸ ì„œë¹„ìŠ¤
class ExperimentManager:
    def __init__(self, storage: StoragePort):  # ì˜ì¡´ì„± ì£¼ì…
        self._storage = storage

# ì–´ëŒ‘í„°ì—ì„œ ì£¼ì…
settings = Settings()
storage = SQLiteStorageAdapter(db_path=settings.evalvault_db_path)
manager = ExperimentManager(storage=storage)  # ì˜ì¡´ì„± ì£¼ì…
```

**ë©”ì„œë“œ ì£¼ì… (Method Injection)**

```python
# ë„ë©”ì¸ ì„œë¹„ìŠ¤
class RagasEvaluator:
    async def evaluate(
        self,
        dataset: Dataset,
        metrics: list[str],
        llm: LLMPort,  # ë©”ì„œë“œ íŒŒë¼ë¯¸í„°ë¡œ ì£¼ì…
    ) -> EvaluationRun:
        ...

# ì–´ëŒ‘í„°ì—ì„œ ì£¼ì…
llm = get_llm_adapter(settings)
result = await evaluator.evaluate(dataset=ds, metrics=metrics, llm=llm)
```

---

## 7. í™•ì¥ì„±ê³¼ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥ì„±

### 7.1 í™•ì¥ì„± (Extensibility)

#### 7.1.1 ìƒˆë¡œìš´ LLM ì œê³µì ì¶”ê°€

**ë‹¨ê³„:**
1. `LLMPort` ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„
2. ì–´ëŒ‘í„° í´ë˜ìŠ¤ ìƒì„±
3. Factoryì— ë“±ë¡

**ì˜ˆì‹œ:**
```python
# 1. LLMPort êµ¬í˜„
class NewLLMAdapter(LLMPort):
    def get_model_name(self) -> str:
        return "new-model"

    def as_ragas_llm(self):
        return llm_factory(model="new-model", provider="new-provider")

# 2. Factoryì— ë“±ë¡
def get_llm_adapter(settings: Settings) -> LLMPort:
    if settings.llm_provider == "new-provider":
        return NewLLMAdapter(settings)
    # ...
```

#### 7.1.2 ìƒˆë¡œìš´ ë©”íŠ¸ë¦­ ì¶”ê°€

**ë‹¨ê³„:**
1. ë©”íŠ¸ë¦­ í´ë˜ìŠ¤ ìƒì„±
2. `RagasEvaluator.CUSTOM_METRIC_MAP`ì— ë“±ë¡

**ì˜ˆì‹œ:**
```python
# 1. ë©”íŠ¸ë¦­ í´ë˜ìŠ¤
class NewMetric:
    def score(self, answer: str, contexts: list[str]) -> float:
        # í‰ê°€ ë¡œì§
        return 0.9

# 2. ë“±ë¡
class RagasEvaluator:
    CUSTOM_METRIC_MAP = {
        "insurance_term_accuracy": InsuranceTermAccuracy,
        "new_metric": NewMetric,  # ìƒˆ ë©”íŠ¸ë¦­ ì¶”ê°€
    }
```

#### 7.1.3 ìƒˆë¡œìš´ ë°ì´í„° í˜•ì‹ ì¶”ê°€

**ë‹¨ê³„:**
1. `BaseDatasetLoader` ìƒì†
2. `supports()` ë° `load()` ë©”ì„œë“œ êµ¬í˜„
3. Factoryì— ë“±ë¡

**ì˜ˆì‹œ:**
```python
# 1. ë¡œë” êµ¬í˜„
class XMLDatasetLoader(BaseDatasetLoader):
    def supports(self, file_path: str | Path) -> bool:
        return Path(file_path).suffix.lower() == ".xml"

    def load(self, file_path: str | Path) -> Dataset:
        # XML íŒŒì‹± ë° Dataset ë³€í™˜
        ...

# 2. Factoryì— ë“±ë¡
_LOADERS.append(XMLDatasetLoader)
```

#### 7.1.4 ìƒˆë¡œìš´ ë¶„ì„ ëª¨ë“ˆ ì¶”ê°€

**ë‹¨ê³„:**
1. `AnalysisModulePort` êµ¬í˜„
2. `BaseAnalysisModule` ìƒì†
3. `PipelineOrchestrator`ì— ë“±ë¡

**ì˜ˆì‹œ:**
```python
# 1. ë¶„ì„ ëª¨ë“ˆ êµ¬í˜„
class CustomAnalysisModule(BaseAnalysisModule):
    module_id = "custom_analysis"
    name = "Custom Analysis"

    def execute(
        self,
        context: AnalysisContext,
        inputs: dict[str, Any],
    ) -> NodeResult:
        # ë¶„ì„ ë¡œì§
        ...

# 2. ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„°ì— ë“±ë¡
orchestrator = PipelineOrchestrator()
orchestrator.register_module(CustomAnalysisModule())
```

#### 7.1.5 ìƒˆë¡œìš´ ë¶„ì„ ì˜ë„ ì¶”ê°€

**ë‹¨ê³„:**
1. `AnalysisIntent` enumì— ì¶”ê°€
2. í…œí”Œë¦¿ ì •ì˜
3. `PipelineTemplateRegistry`ì— ë“±ë¡

**ì˜ˆì‹œ:**
```python
# 1. ì˜ë„ ì¶”ê°€
class AnalysisIntent(str, Enum):
    CUSTOM_ANALYSIS = "custom_analysis"  # ìƒˆ ì˜ë„

# 2. í…œí”Œë¦¿ ì •ì˜
template = AnalysisPipeline(
    intent=AnalysisIntent.CUSTOM_ANALYSIS,
    nodes=[...],
    edges=[...],
)

# 3. ë ˆì§€ìŠ¤íŠ¸ë¦¬ì— ë“±ë¡
registry = PipelineTemplateRegistry()
registry.register_template(template)
```

#### 7.1.6 ìƒˆë¡œìš´ ì €ì¥ì†Œ ì¶”ê°€

**ë‹¨ê³„:**
1. `StoragePort` ë˜ëŠ” `DomainMemoryPort` êµ¬í˜„
2. ì–´ëŒ‘í„° í´ë˜ìŠ¤ ìƒì„±
3. Factoryì— ë“±ë¡

**ì˜ˆì‹œ:**
```python
# 1. ì €ì¥ì†Œ ì–´ëŒ‘í„° êµ¬í˜„
class MongoDBStorageAdapter(StoragePort):
    def save_run(self, run: EvaluationRun) -> str:
        # MongoDB ì €ì¥ ë¡œì§
        ...

# 2. Factoryì— ë“±ë¡
def get_storage_adapter(settings: Settings) -> StoragePort:
    if settings.storage_type == "mongodb":
        return MongoDBStorageAdapter(settings)
    # ...
```

### 7.2 í…ŒìŠ¤íŠ¸ ê°€ëŠ¥ì„± (Testability)

#### 7.2.1 í¬íŠ¸ ì¸í„°í˜ì´ìŠ¤ë¥¼ í†µí•œ ëª¨í‚¹

**ë„ë©”ì¸ ì„œë¹„ìŠ¤ í…ŒìŠ¤íŠ¸:**

```python
# í…ŒìŠ¤íŠ¸ìš© ëª¨í‚¹ ì–´ëŒ‘í„°
class MockLLMAdapter(LLMPort):
    def get_model_name(self) -> str:
        return "mock-model"

    def as_ragas_llm(self):
        return MockRagasLLM()

# í…ŒìŠ¤íŠ¸
def test_evaluator():
    llm = MockLLMAdapter()
    evaluator = RagasEvaluator()
    result = await evaluator.evaluate(dataset, metrics, llm)
    assert result.pass_rate > 0.7
```

#### 7.2.2 ì˜ì¡´ì„± ì£¼ì…ì„ í†µí•œ í…ŒìŠ¤íŠ¸

**ì‹¤í—˜ ê´€ë¦¬ ì„œë¹„ìŠ¤ í…ŒìŠ¤íŠ¸:**

```python
# í…ŒìŠ¤íŠ¸ìš© ëª¨í‚¹ ì €ì¥ì†Œ
class MockStorageAdapter(StoragePort):
    def get_run(self, run_id: str) -> EvaluationRun:
        return create_mock_run(run_id)

# í…ŒìŠ¤íŠ¸
def test_experiment_comparison():
    storage = MockStorageAdapter()
    manager = ExperimentManager(storage)
    comparisons = manager.compare_groups("exp-1")
    assert len(comparisons) > 0
```

---

## 8. ê²°ë¡ 

EvalVaultëŠ” **Hexagonal Architecture**, **Clean Architecture**, **Domain-Driven Design** ì›ì¹™ì„ ê²°í•©í•˜ì—¬ ë‹¤ìŒê³¼ ê°™ì€ ì´ì ì„ ì œê³µí•©ë‹ˆë‹¤:

### 8.1 ì£¼ìš” ì¥ì 

1. **í…ŒìŠ¤íŠ¸ ê°€ëŠ¥ì„±**: ë„ë©”ì¸ ë¡œì§ì´ ì™¸ë¶€ ì˜ì¡´ì„±ê³¼ ê²©ë¦¬ë˜ì–´ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ê°€ ìš©ì´
2. **í™•ì¥ì„±**: ìƒˆë¡œìš´ ì–´ëŒ‘í„° ì¶”ê°€ê°€ ê°„ë‹¨ (í¬íŠ¸ ì¸í„°í˜ì´ìŠ¤ë§Œ êµ¬í˜„)
3. **ìœ ì§€ë³´ìˆ˜ì„±**: ê° ê³„ì¸µì˜ ì±…ì„ì´ ëª…í™•í•˜ì—¬ ì½”ë“œ ì´í•´ ë° ìˆ˜ì •ì´ ìš©ì´
4. **ë…ë¦½ì„±**: ë„ë©”ì¸ ë¡œì§ì´ ì™¸ë¶€ í”„ë ˆì„ì›Œí¬ë‚˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ì˜ì¡´í•˜ì§€ ì•ŠìŒ
5. **ìœ ì—°ì„±**: ë‹¤ì–‘í•œ LLM ì œê³µì, ì €ì¥ì†Œ, ì¶”ì  ì‹œìŠ¤í…œì„ ì‰½ê²Œ êµì²´ ê°€ëŠ¥
6. **ëª¨ë“ˆì„±**: DAG ê¸°ë°˜ ë¶„ì„ íŒŒì´í”„ë¼ì¸ìœ¼ë¡œ ë³µì¡í•œ ë¶„ì„ ì›Œí¬í”Œë¡œìš° êµ¬ì„± ê°€ëŠ¥
7. **í•™ìŠµ ëŠ¥ë ¥**: ë„ë©”ì¸ ë©”ëª¨ë¦¬ ì‹œìŠ¤í…œìœ¼ë¡œ í‰ê°€ ê²°ê³¼ì—ì„œ ì§€ì†ì ìœ¼ë¡œ í•™ìŠµ
8. **ê°œì„  ê°€ì´ë“œ**: ê·œì¹™ ê¸°ë°˜ ë° LLM ê¸°ë°˜ í•˜ì´ë¸Œë¦¬ë“œ ë¶„ì„ìœ¼ë¡œ ì‹¤ì§ˆì ì¸ ê°œì„  ì œì•ˆ

### 8.2 ì•„í‚¤í…ì²˜ ì›ì¹™ ìš”ì•½

- **ì˜ì¡´ì„± ê·œì¹™**: ì˜ì¡´ì„±ì€ í•­ìƒ ì™¸ë¶€ â†’ ë‚´ë¶€ ë°©í–¥
- **í¬íŠ¸ì™€ ì–´ëŒ‘í„°**: ë„ë©”ì¸ì€ í¬íŠ¸ë¥¼ í†µí•´ ì™¸ë¶€ì™€ í†µì‹ 
- **ë„ë©”ì¸ ì¤‘ì‹¬**: í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì€ ë„ë©”ì¸ ê³„ì¸µì— ì§‘ì¤‘
- **ì¸í„°í˜ì´ìŠ¤ ë¶„ë¦¬**: ê° í¬íŠ¸ëŠ” ë‹¨ì¼ ì±…ì„ì„ ê°€ì§
- **ì˜ì¡´ì„± ì£¼ì…**: êµ¬ì²´ì ì¸ êµ¬í˜„ì´ ì•„ë‹Œ ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´
- **í…œí”Œë¦¿ ê¸°ë°˜ êµ¬ì„±**: ë¶„ì„ íŒŒì´í”„ë¼ì¸ì„ í…œí”Œë¦¿ìœ¼ë¡œ ì¬ì‚¬ìš© ê°€ëŠ¥í•˜ê²Œ êµ¬ì„±
- **ë©”ëª¨ë¦¬ ê¸°ë°˜ í•™ìŠµ**: í‰ê°€ ê²°ê³¼ë¥¼ ë„ë©”ì¸ ë©”ëª¨ë¦¬ë¡œ ì €ì¥í•˜ì—¬ ì§€ì†ì  í•™ìŠµ

### 8.3 í˜„ì¬ ì•„í‚¤í…ì²˜ì˜ ì£¼ìš” íŠ¹ì§•

#### 8.3.1 ë‹¤ì¸µ ë¶„ì„ ì‹œìŠ¤í…œ
- **í†µê³„ ë¶„ì„**: ê¸°ë³¸ì ì¸ í†µê³„ ì§€í‘œ ê³„ì‚°
- **NLP ë¶„ì„**: ìì—°ì–´ ì²˜ë¦¬ ê¸°ë°˜ ì‹¬ì¸µ ë¶„ì„
- **ì¸ê³¼ ë¶„ì„**: ì¸ê³¼ ê´€ê³„ ì¶”ë¡  ë° ì›ì¸ ë¶„ì„
- **ë©”íƒ€ ë¶„ì„**: ì—¬ëŸ¬ ì‹¤í–‰ ê²°ê³¼ ë¹„êµ ë° ì¢…í•© ë¶„ì„

#### 8.3.2 DAG ê¸°ë°˜ íŒŒì´í”„ë¼ì¸
- **ì˜ë„ ë¶„ë¥˜**: ì‚¬ìš©ì ì¿¼ë¦¬ì—ì„œ ë¶„ì„ ì˜ë„ ìë™ ì¶”ì¶œ
- **í…œí”Œë¦¿ ê¸°ë°˜**: ì˜ë„ë³„ ë¯¸ë¦¬ ì •ì˜ëœ íŒŒì´í”„ë¼ì¸ í…œí”Œë¦¿
- **ëª¨ë“ˆí™”**: ê° ë¶„ì„ ë‹¨ê³„ë¥¼ ë…ë¦½ì ì¸ ëª¨ë“ˆë¡œ êµ¬ì„±
- **ë¹„ë™ê¸° ì‹¤í–‰**: ì˜ì¡´ì„± ìˆœì„œì— ë”°ë¥¸ íš¨ìœ¨ì ì¸ ì‹¤í–‰

#### 8.3.3 ë„ë©”ì¸ ë©”ëª¨ë¦¬ ì‹œìŠ¤í…œ
- **Factual Layer**: ê²€ì¦ëœ ë„ë©”ì¸ ì‚¬ì‹¤ ì €ì¥ (SPO íŠ¸ë¦¬í”Œ)
- **Experiential Layer**: í‰ê°€ì—ì„œ í•™ìŠµëœ íŒ¨í„´ ì €ì¥
- **Behavior Layer**: ì¬ì‚¬ìš© ê°€ëŠ¥í•œ í–‰ë™ íŒ¨í„´ ì €ì¥
- **Formation/Evolution/Retrieval**: ë©”ëª¨ë¦¬ í˜•ì„±, ì§„í™”, ê²€ìƒ‰ dynamics

#### 8.3.4 ê°œì„  ê°€ì´ë“œ ì‹œìŠ¤í…œ
- **ê·œì¹™ ê¸°ë°˜ íƒì§€**: í”Œë ˆì´ë¶ ê¸°ë°˜ ë¹ ë¥¸ íŒ¨í„´ íƒì§€
- **LLM ê¸°ë°˜ ë¶„ì„**: ì‹¬ì¸µì ì¸ ì¸ì‚¬ì´íŠ¸ ìƒì„±
- **í•˜ì´ë¸Œë¦¬ë“œ ë¶„ì„**: ë‘ ë°©ë²•ì„ ê²°í•©í•œ ì¢…í•© ë¦¬í¬íŠ¸
- **ì•¡ì…˜ ìš°ì„ ìˆœìœ„**: ê°œì„  íš¨ê³¼ì™€ êµ¬í˜„ ë‚œì´ë„ ê¸°ë°˜ ìš°ì„ ìˆœìœ„ ê²°ì •

ì´ ì•„í‚¤í…ì²˜ëŠ” ì†Œí”„íŠ¸ì›¨ì–´ì˜ ë³µì¡ì„±ì„ ê´€ë¦¬í•˜ê³ , ë³€ê²½ì— ìœ ì—°í•˜ê²Œ ëŒ€ì‘í•˜ë©°, ì¥ê¸°ì ì¸ ìœ ì§€ë³´ìˆ˜ë¥¼ ìš©ì´í•˜ê²Œ í•©ë‹ˆë‹¤. íŠ¹íˆ ë¶„ì„ íŒŒì´í”„ë¼ì¸ê³¼ ë„ë©”ì¸ ë©”ëª¨ë¦¬ ì‹œìŠ¤í…œì„ í†µí•´ RAG í‰ê°€ì˜ ì§€ì†ì ì¸ ê°œì„ ì„ ì§€ì›í•©ë‹ˆë‹¤.

---

## ë¶€ë¡: ì°¸ê³  ìë£Œ

### ì•„í‚¤í…ì²˜ ë°©ë²•ë¡ 
- **Hexagonal Architecture**: Alistair Cockburn
- **Clean Architecture**: Robert C. Martin
- **Domain-Driven Design**: Eric Evans

### ì„¤ê³„ íŒ¨í„´
- **Design Patterns**: Gang of Four
- **Enterprise Integration Patterns**: Gregor Hohpe

### Python íŠ¹í™”
- **Protocol**: Python typing ëª¨ë“ˆ
- **ABC**: Python abc ëª¨ë“ˆ
- **Dependency Injection**: Pythonì˜ íƒ€ì… íŒíŠ¸ í™œìš©
