# EvalVault 개발 백서 작성 계획

> **작성일**: 2026-01-11
> **목적**: 실제 소스 코드와 동작 흐름을 근거로 EvalVault 백서를 최신화한다.
> **원칙**: 코드-문서 일치, 근거 명시, 전문가 관점 통합, 중복 문서 최소화

---

## 1. 범위와 목표

### 1.1 범위
- **현재 구현 기반 섹션**: 1~6부 (즉시 작성/갱신)
- **미작성 섹션**: 7~14부 (To be written, 로드맵 형태로만 기술)

### 1.2 목표
- 사용자가 **CLI/웹 API/분석/벤치마크/시각화** 흐름을 이해할 수 있도록 서술
- 핵심 설계 근거를 **소스 코드 경로**로 확인 가능하게 구성
- **전문가 관점**(교육학자, 컴퓨터공학자, 편집자, 인지심리학자, UI/UX 전문가, MD 문서 디자이너)을 각 섹션에 반영

---

## 2. 섹션 구조 (현행화)

### 제1부: 프로젝트 개요
- 1.1 문제 정의와 가치 제안
- 1.2 시스템 목표(평가/관측/학습/분석/벤치마크)
- 1.3 사용자 유형과 시나리오

### 제2부: 아키텍처 설계
- 2.1 Hexagonal Architecture 개요
- 2.2 계층 구조(Adapters/Ports/Domain)
- 2.3 의존성 방향과 확장 전략

### 제3부: 데이터/실행 흐름
- 3.1 평가 실행 흐름
- 3.2 분석 파이프라인 흐름
- 3.3 시각화(Visual Space) 좌표 계산 흐름

### 제4부: 주요 컴포넌트 상세
- 4.1 CLI/웹 API 진입점
- 4.2 평가 엔진(RagasEvaluator)
- 4.3 분석 서비스(AnalysisService)
- 4.4 벤치마크 실행/리포트
- 4.5 통합 리포트(Unified Report)

### 제5부: 전문가 관점 통합 설계
- 5.1 인지심리학 관점
- 5.2 교육학 관점
- 5.3 컴퓨터공학 관점
- 5.4 편집자 관점
- 5.5 UI/UX 관점
- 5.6 MD 문서 디자이너 관점

### 제6부: 구현 상세
- 6.1 CLI 명령 구조
- 6.2 API 라우터 구조
- 6.3 메트릭/평가 내부 동작
- 6.4 벤치마크/리포트 생성 흐름
- 6.5 시각화 지표 계산

### 제7~14부: 확장/운영/로드맵 (To be written)
- 7부: 고급 기능 및 확장
- 8부: 커스터마이징
- 9부: 테스트/품질 보증
- 10부: 성능 최적화
- 11부: 보안/프라이버시
- 12부: 운영/모니터링
- 13부: 표준 연동 및 생태계
- 14부: 로드맵 및 향후 계획

---

## 3. 코드 근거 매핑 (Evidence Mapping)

| 백서 섹션 | 실제 소스 근거 | 핵심 포인트 |
|---|---|---|
| 4.1 CLI 진입점 | `src/evalvault/adapters/inbound/cli/app.py` | Typer 기반 CLI 구성, 메트릭 리스트 노출 |
| 4.1 API 진입점 | `src/evalvault/adapters/inbound/api/main.py` | FastAPI 구성, CORS, 라우터 등록 |
| 6.2 Runs API | `src/evalvault/adapters/inbound/api/routers/runs.py` | 평가 실행 요청 모델, 시각화/클러스터 맵 처리 |
| 4.2 평가 엔진 | `src/evalvault/domain/services/evaluator.py` | Ragas + 커스텀 메트릭 매핑, 한국어 최적화 |
| 4.3 분석 서비스 | `src/evalvault/domain/services/analysis_service.py` | 통계/NLP/인과 분석 오케스트레이션 |
| 4.4 벤치마크 CLI | `src/evalvault/adapters/inbound/cli/commands/benchmark.py` | KMMLU 실행, Retrieval Benchmark(bm25/dense/hybrid/graphrag) |
| 4.4 벤치마크 리포트 | `src/evalvault/domain/services/benchmark_report_service.py` | LLM 기반 분석 보고서 생성 |
| 4.5 통합 리포트 | `src/evalvault/domain/services/unified_report_service.py` | 평가+벤치마크 통합 분석 보고서 |
| 3.3 시각화 계산 | `src/evalvault/domain/services/visual_space_service.py` | run/case/cluster 좌표 계산 및 요약 |

---

## 4. 전문가 관점 반영 계획

### 4.1 인지심리학자
- **목표**: 인지 부하 최소화, 정보 계층 명확화
- **산출물**: 정보 청킹 원칙, 핵심 개념 단계별 노출 규칙
- **검토 체크리스트**
  - [ ] 한 섹션에 과도한 개념 밀집이 없는가
  - [ ] 단계별 학습 흐름이 자연스러운가

### 4.2 교육학자
- **목표**: 초급-중급-고급 독자 학습 경로 제공
- **산출물**: 학습 레벨 태그, 예제 기반 설명 구조
- **검토 체크리스트**
  - [ ] 학습 단계별로 예제가 구분되어 있는가
  - [ ] 실습 가능한 최소 예제가 포함되었는가

### 4.3 컴퓨터공학자
- **목표**: 설계 정합성과 확장성 근거 제시
- **산출물**: 계층/의존성 다이어그램, 성능/메트릭 정의
- **검토 체크리스트**
  - [ ] Hexagonal 의존성 규칙을 위반하지 않는가
  - [ ] 메트릭 정의가 구현과 일치하는가

### 4.4 편집자
- **목표**: 용어 일관성과 문장 명확성 확보
- **산출물**: 용어집, 문체/표기 규칙
- **검토 체크리스트**
  - [ ] 같은 개념이 여러 명칭으로 혼용되지 않는가
  - [ ] 각 섹션의 핵심 메시지가 한 문장으로 요약되는가

### 4.5 UI/UX 전문가
- **목표**: 사용자 워크플로우 이해를 돕는 구조화
- **산출물**: CLI ↔ Web UI 흐름도, 사용자 시나리오
- **검토 체크리스트**
  - [ ] CLI 흐름과 Web UI 흐름이 동일 개념으로 설명되는가
  - [ ] 피드백/에러 처리 설명이 충분한가

### 4.6 MD 문서 전문 디자이너
- **목표**: 긴 문서 가독성과 탐색성 강화
- **산출물**: 목차/헤딩 규칙, 표/코드 블록 가이드
- **검토 체크리스트**
  - [ ] H1/H2/H3 계층이 일관적인가
  - [ ] 표/코드 블록이 과밀하지 않은가

---

## 5. 증거 수집 및 작성 흐름

1. **코드 근거 확보**: 위 매핑에 해당하는 실제 파일을 기준으로 내용 작성
2. **CLI/API 스키마 정리**: CLI 옵션, 요청/응답 모델을 문서화
3. **핵심 로직 요약**: 메트릭 매핑, 분석 파이프라인, 시각화 계산 흐름 정리
4. **전문가 관점 검토**: 섹션별 체크리스트 통과 여부 확인
5. **중복/과거 문서 정리**: 기존 초안은 archive로 이동

---

## 6. 산출물
- `docs/internal/plans/WHITEPAPER_PREPARATION_GUIDE.md` (준비 가이드)
- `docs/WHITEPAPER.md` (통합 백서, 생성 대상)
- `docs/internal/WHITEPAPER_UPDATE_STRATEGY.md` (유지 전략)
