# EvalVault ì•„í‚¤í…ì²˜ (C4 Model)

> **C4 Model ê¸°ë°˜ ì•„í‚¤í…ì²˜ ë¬¸ì„œ**
>
> C4 Modelì€ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ë¥¼ 4ë‹¨ê³„ë¡œ ì ì§„ì ìœ¼ë¡œ ìƒì„¸í™”í•˜ì—¬ í‘œí˜„í•˜ëŠ” ë°©ë²•ë¡ ì…ë‹ˆë‹¤.
> - **Level 1: System Context** - ì‹œìŠ¤í…œê³¼ ì™¸ë¶€ ì„¸ê³„ì˜ ê´€ê³„
> - **Level 2: Container** - ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì£¼ìš” êµ¬ì„± ìš”ì†Œ
> - **Level 3: Component** - ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì˜ ì£¼ìš” ì»´í¬ë„ŒíŠ¸
> - **Level 4: Code** - ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì˜ ìƒì„¸ êµ¬í˜„ (ì„ íƒì )

ì´ ë¬¸ì„œëŠ” EvalVaultì˜ ì•„í‚¤í…ì²˜ë¥¼ C4 Model ë°©ë²•ë¡ ì— ë”°ë¼ ê³„ì¸µì ìœ¼ë¡œ ì„¤ëª…í•©ë‹ˆë‹¤.

## ğŸ“š ê´€ë ¨ ë¬¸ì„œ

| ë¬¸ì„œ | ì—­í•  | ì„¤ëª… |
|------|------|------|
| [ARCHITECTURE.md](../../architecture/ARCHITECTURE.md) | ë©”ì¸ ì•„í‚¤í…ì²˜ ê°€ì´ë“œ | ìƒì„¸í•œ ì•„í‚¤í…ì²˜ ì„¤ëª…, ì„¤ê³„ ì›ì¹™, ë°ì´í„° íë¦„ |
| **[ARCHITECTURE_C4.md](./ARCHITECTURE_C4.md)** (ì´ ë¬¸ì„œ) | C4 ë‹¤ì´ì–´ê·¸ë¨ | C4 Model ê¸°ë°˜ ê³„ì¸µì  ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨ |
| [archive/ARCHITECTURE_AUDIT.md](../archive/ARCHITECTURE_AUDIT.md) | ì•„í‚¤í…ì²˜ ê°ì‚¬ | ì•„í‚¤í…ì²˜ ê°ì‚¬ ê²°ê³¼ ë° ê°œì„  ì œì•ˆ (ì•„ì¹´ì´ë¸Œ) |

---

## ëª©ì°¨

1. [Level 1: System Context](#level-1-system-context)
2. [Level 2: Container Diagram](#level-2-container-diagram)
3. [Level 3: Component Diagram](#level-3-component-diagram)
4. [Level 4: Code Structure](#level-4-code-structure)
5. [ì£¼ìš” ì‹œë‚˜ë¦¬ì˜¤](#ì£¼ìš”-ì‹œë‚˜ë¦¬ì˜¤)

---

## Level 1: System Context

**ì‹œìŠ¤í…œ ì»¨í…ìŠ¤íŠ¸ ë‹¤ì´ì–´ê·¸ë¨**ì€ EvalVaultê°€ ì–´ë–¤ ì‚¬ìš©ìì™€ ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ìƒí˜¸ì‘ìš©í•˜ëŠ”ì§€ ë³´ì—¬ì¤ë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          EVALVAULT SYSTEM CONTEXT                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   ê°œë°œì      â”‚
                    â”‚ (Developer)  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â”‚ CLI ëª…ë ¹ ì‹¤í–‰
                           â”‚ í‰ê°€ ê²°ê³¼ í™•ì¸
                           â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                                             â”‚
                    â”‚            EVALVAULT                        â”‚
                    â”‚    (RAG Evaluation System)                 â”‚
                    â”‚                                             â”‚
                    â”‚  - RAG ì‹œìŠ¤í…œ í‰ê°€                          â”‚
                    â”‚  - í‰ê°€ ê²°ê³¼ ë¶„ì„                           â”‚
                    â”‚  - ê°œì„  ê°€ì´ë“œ ìƒì„±                         â”‚
                    â”‚  - ë„ë©”ì¸ ë©”ëª¨ë¦¬ ê´€ë¦¬                       â”‚
                    â”‚                                             â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                  â”‚                  â”‚
        â”‚                  â”‚                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
â”‚              â”‚  â”‚                 â”‚  â”‚              â”‚
â”‚   ë°ì´í„°     â”‚  â”‚   LLM API       â”‚  â”‚   ì¶”ì  ì‹œìŠ¤í…œâ”‚
â”‚   ê³¼í•™ì     â”‚  â”‚                 â”‚  â”‚              â”‚
â”‚              â”‚  â”‚  - OpenAI       â”‚  â”‚  - Langfuse  â”‚
â”‚  - í‰ê°€ ì‹¤í–‰ â”‚  â”‚  - Anthropic    â”‚  â”‚  - MLflow    â”‚
â”‚  - ê²°ê³¼ ë¶„ì„ â”‚  â”‚  - Azure OpenAI  â”‚  â”‚              â”‚
â”‚  - ë¦¬í¬íŠ¸    â”‚  â”‚  - Ollama        â”‚  â”‚              â”‚
â”‚              â”‚  â”‚                 â”‚  â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                  â”‚                  â”‚
        â”‚                  â”‚                  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                             â”‚
                    â”‚      íŒŒì¼ ì‹œìŠ¤í…œ             â”‚
                    â”‚                             â”‚
                    â”‚  - ë°ì´í„°ì…‹ (JSON/CSV/Excel) â”‚
                    â”‚  - í‰ê°€ ê²°ê³¼ ì €ì¥            â”‚
                    â”‚  - ë¦¬í¬íŠ¸ ìƒì„±               â”‚
                    â”‚                             â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì£¼ìš” ì•¡í„° (Actors)

1. **ê°œë°œì (Developer)**
   - CLIë¥¼ í†µí•œ í‰ê°€ ì‹¤í–‰
   - í‰ê°€ ê²°ê³¼ í™•ì¸ ë° ë¶„ì„
   - ì‹¤í—˜ ê´€ë¦¬ ë° ë¹„êµ

2. **ë°ì´í„° ê³¼í•™ì (Data Scientist)**
   - Web UIë¥¼ í†µí•œ í‰ê°€ ì‹¤í–‰
   - ê²°ê³¼ ì‹œê°í™” ë° ë¶„ì„
   - ë¦¬í¬íŠ¸ ìƒì„± ë° ê³µìœ 

### ì™¸ë¶€ ì‹œìŠ¤í…œ (External Systems)

1. **LLM API ì œê³µì**
   - OpenAI: GPT ëª¨ë¸ í‰ê°€
   - Anthropic: Claude ëª¨ë¸ í‰ê°€
   - Azure OpenAI: Azure í˜¸ìŠ¤íŒ… ëª¨ë¸
   - Ollama: ë¡œì»¬ ëª¨ë¸ ì‹¤í–‰
   - vLLM: ê³ ì„±ëŠ¥ ë¡œì»¬/ì„œë²„ ëª¨ë¸

2. **ì¶”ì  ì‹œìŠ¤í…œ (Tracing Systems)**
   - Langfuse: í‰ê°€ ì‹¤í–‰ ì¶”ì  ë° ì‹œê°í™”
   - MLflow: ì‹¤í—˜ ê´€ë¦¬ ë° ëª¨ë¸ ì¶”ì 

3. **íŒŒì¼ ì‹œìŠ¤í…œ**
   - ë°ì´í„°ì…‹ íŒŒì¼ (JSON, CSV, Excel)
   - í‰ê°€ ê²°ê³¼ ì €ì¥
   - ë¦¬í¬íŠ¸ íŒŒì¼ ìƒì„±

---

## Level 2: Container Diagram

**ì»¨í…Œì´ë„ˆ ë‹¤ì´ì–´ê·¸ë¨**ì€ EvalVaultì˜ ì£¼ìš” ê¸°ìˆ  êµ¬ì„± ìš”ì†Œì™€ ê·¸ë“¤ ê°„ì˜ ìƒí˜¸ì‘ìš©ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         EVALVAULT CONTAINER DIAGRAM                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      â”‚              â”‚                      â”‚
â”‚   CLI Application    â”‚              â”‚    Web UI            â”‚
â”‚   (Typer)            â”‚              â”‚ (React + FastAPI)    â”‚
â”‚                      â”‚              â”‚                      â”‚
â”‚  - run ëª…ë ¹          â”‚              â”‚  - í‰ê°€ ì‹¤í–‰         â”‚
â”‚  - generate ëª…ë ¹     â”‚              â”‚  - ê²°ê³¼ ì‹œê°í™”       â”‚
â”‚  - compare ëª…ë ¹      â”‚              â”‚  - ë¦¬í¬íŠ¸ ìƒì„±       â”‚
â”‚  - pipeline ëª…ë ¹     â”‚              â”‚  - íˆìŠ¤í† ë¦¬ ì¡°íšŒ     â”‚
â”‚                      â”‚              â”‚                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                                    â”‚
           â”‚                                    â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         EVALVAULT CORE APPLICATION                          â”‚
â”‚                    (Hexagonal Architecture / Ports & Adapters)              â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                      DOMAIN LAYER                                  â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚   â”‚
â”‚  â”‚  â”‚  Entities   â”‚  â”‚  â”‚  Services   â”‚  â”‚   Metrics    â”‚           â”‚   â”‚
â”‚  â”‚  â”‚             â”‚  â”‚  â”‚             â”‚  â”‚              â”‚           â”‚   â”‚
â”‚  â”‚  â”‚ - Dataset   â”‚  â”‚  â”‚ - Evaluator â”‚  â”‚ - Ragas      â”‚           â”‚   â”‚
â”‚  â”‚  â”‚ - Result    â”‚  â”‚  â”‚ - Analysis  â”‚  â”‚ - Custom     â”‚           â”‚   â”‚
â”‚  â”‚  â”‚ - Pipeline  â”‚  â”‚  â”‚ - Pipeline â”‚  â”‚              â”‚           â”‚   â”‚
â”‚  â”‚  â”‚ - Memory    â”‚  â”‚  â”‚ - KG        â”‚  â”‚              â”‚           â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                      PORTS LAYER                                   â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚   â”‚
â”‚  â”‚  â”‚  Inbound     â”‚  â”‚  Outbound    â”‚  â”‚  Outbound    â”‚           â”‚   â”‚
â”‚  â”‚  â”‚  Ports       â”‚  â”‚  Ports       â”‚  â”‚  Ports       â”‚           â”‚   â”‚
â”‚  â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚           â”‚   â”‚
â”‚  â”‚  â”‚ - Evaluator  â”‚  â”‚ - LLM        â”‚  â”‚ - Storage    â”‚           â”‚   â”‚
â”‚  â”‚  â”‚ - Pipeline   â”‚  â”‚ - Dataset    â”‚  â”‚ - Tracker    â”‚           â”‚   â”‚
â”‚  â”‚  â”‚ - Web        â”‚  â”‚ - Analysis   â”‚  â”‚ - Memory     â”‚           â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    ADAPTERS LAYER                                  â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚   â”‚
â”‚  â”‚  â”‚  Inbound    â”‚  â”‚  Outbound     â”‚  â”‚  Outbound     â”‚          â”‚   â”‚
â”‚  â”‚  â”‚  Adapters   â”‚  â”‚  Adapters     â”‚  â”‚  Adapters     â”‚          â”‚   â”‚
â”‚  â”‚  â”‚             â”‚  â”‚               â”‚  â”‚               â”‚          â”‚   â”‚
â”‚  â”‚  â”‚ - CLI       â”‚  â”‚ - LLM         â”‚  â”‚ - Storage    â”‚          â”‚   â”‚
â”‚  â”‚  â”‚ - Web       â”‚  â”‚ - Dataset     â”‚  â”‚ - Tracker     â”‚          â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ - Analysis   â”‚  â”‚ - Memory     â”‚          â”‚   â”‚
â”‚  â”‚                    â”‚ - NLP       â”‚  â”‚ - Cache      â”‚          â”‚   â”‚
â”‚  â”‚                    â”‚ - Report    â”‚  â”‚               â”‚          â”‚   â”‚
â”‚  â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚                    â”‚                    â”‚
                          â”‚                    â”‚                    â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                 â”‚                    â”‚                    â”‚         â”‚
        â”‚                 â”‚                    â”‚                    â”‚         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
â”‚              â”‚  â”‚              â”‚  â”‚                 â”‚  â”‚                 â”‚
â”‚  SQLite/     â”‚  â”‚  Domain      â”‚  â”‚  LLM API        â”‚  â”‚  Langfuse/     â”‚
â”‚  PostgreSQL  â”‚  â”‚  Memory DB   â”‚  â”‚  (OpenAI, etc.) â”‚  â”‚  MLflow        â”‚
â”‚              â”‚  â”‚              â”‚  â”‚                 â”‚  â”‚                 â”‚
â”‚  - í‰ê°€ ê²°ê³¼ â”‚  â”‚  - ì‚¬ì‹¤      â”‚  â”‚  - í‰ê°€ ì‹¤í–‰    â”‚  â”‚  - ì¶”ì  ë°ì´í„° â”‚
â”‚  - ì‹¤í–‰ íˆìŠ¤í† ë¦¬â”‚  â”‚  - íŒ¨í„´     â”‚  â”‚  - ë©”íŠ¸ë¦­ ê³„ì‚° â”‚  â”‚  - ì‹œê°í™”      â”‚
â”‚              â”‚  â”‚  - í–‰ë™      â”‚  â”‚                 â”‚  â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì£¼ìš” ì»¨í…Œì´ë„ˆ (Containers)

1. **CLI Application (Typer)**
   - **ê¸°ìˆ **: Python Typer
   - **ì±…ì„**: ëª…ë ¹ì¤„ ì¸í„°í˜ì´ìŠ¤ ì œê³µ
   - **í¬íŠ¸**: í‘œì¤€ ì…ì¶œë ¥

2. **Web UI (React + FastAPI)**
   - **ê¸°ìˆ **: React(Vite) + FastAPI
   - **ì±…ì„**: ì›¹ ê¸°ë°˜ ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤
   - **í¬íŠ¸**: HTTP (ê¸°ë³¸ 5173/8000)

3. **EvalVault Core Application**
   - **ê¸°ìˆ **: Python 3.12+
   - **ì±…ì„**: í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
   - **ì•„í‚¤í…ì²˜**: Hexagonal Architecture

4. **SQLite/PostgreSQL Database**
   - **ê¸°ìˆ **: SQLite (ê¸°ë³¸) ë˜ëŠ” PostgreSQL
   - **ì±…ì„**: í‰ê°€ ê²°ê³¼ ë° ì‹¤í–‰ íˆìŠ¤í† ë¦¬ ì €ì¥
   - **í¬íŠ¸**: SQLite (íŒŒì¼) ë˜ëŠ” PostgreSQL (5432)

5. **Domain Memory Database**
   - **ê¸°ìˆ **: SQLite
   - **ì±…ì„**: ë„ë©”ì¸ ë©”ëª¨ë¦¬ (Factual/Experiential/Behavior) ì €ì¥
   - **í¬íŠ¸**: SQLite (íŒŒì¼)

6. **Observability Stack**
   - **ê¸°ìˆ **: Langfuse, MLflow, Phoenix(OpenInference)
   - **ì±…ì„**: íŠ¸ë ˆì´ìŠ¤Â·ì ìˆ˜Â·ë¦¬í¬íŠ¸ ì¶”ì , Phoenix dataset/experiment ì‹±í¬
   - **íŠ¹ì§•**: `config/phoenix_support.ensure_phoenix_instrumentation()`ì´ OpenTelemetryë¥¼ ì´ˆê¸°í™”í•˜ê³  tracker ì–´ëŒ‘í„°ê°€ Traceë¥¼ ì „ì†¡

7. **Automation & Agents**
   - **ê¸°ìˆ **: `agent/` (claude-agent-sdk), Python scripts (`scripts/regression_runner.py`)
   - **ì±…ì„**: ê°œë°œ/ìš´ì˜ ì—ì´ì „íŠ¸ ì‹¤í–‰, íšŒê·€ ì‹œë‚˜ë¦¬ì˜¤ ìë™í™”
   - **í†µí•©**: CLI `evalvault agent â€¦`, JSON ê¸°ë°˜ RegressionSuite

### ì»¨í…Œì´ë„ˆ ê°„ í†µì‹ 

- **CLI/Web UI â†’ Core**: í•¨ìˆ˜ í˜¸ì¶œ (ë™ê¸°)
- **Core â†’ LLM API**: HTTP/HTTPS (ë¹„ë™ê¸°)
- **Core â†’ Database**: SQL (ë™ê¸°)
- **Core â†’ Tracker**: HTTP/HTTPS (ë¹„ë™ê¸°)

---

## Level 3: Component Diagram

**ì»´í¬ë„ŒíŠ¸ ë‹¤ì´ì–´ê·¸ë¨**ì€ EvalVault Core Application ë‚´ë¶€ì˜ ì£¼ìš” ì»´í¬ë„ŒíŠ¸ì™€ ê·¸ë“¤ ê°„ì˜ ê´€ê³„ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤.

### 3.1 í‰ê°€ ì‹¤í–‰ ì»´í¬ë„ŒíŠ¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    EVALUATION EXECUTION COMPONENTS                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          INBOUND ADAPTERS                                   â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚   CLI Adapter    â”‚              â”‚   Web Adapter    â”‚                   â”‚
â”‚  â”‚                  â”‚              â”‚                  â”‚                   â”‚
â”‚  â”‚  - ëª…ë ¹ íŒŒì‹±      â”‚              â”‚  - ìš”ì²­ ì²˜ë¦¬     â”‚                   â”‚
â”‚  â”‚  - ì…ë ¥ ê²€ì¦      â”‚              â”‚  - ì„¸ì…˜ ê´€ë¦¬     â”‚                   â”‚
â”‚  â”‚  - ê²°ê³¼ í¬ë§·íŒ…    â”‚              â”‚  - ì§„í–‰ë¥  í‘œì‹œ    â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚           â”‚                                  â”‚                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                                  â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â”‚ EvaluatorPort
                           â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚                                   â”‚
            â”‚      RagasEvaluator               â”‚
            â”‚      (Domain Service)             â”‚
            â”‚                                   â”‚
            â”‚  - í‰ê°€ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜            â”‚
            â”‚  - ë©”íŠ¸ë¦­ ì‹¤í–‰                    â”‚
            â”‚  - ê²°ê³¼ ì§‘ê³„                      â”‚
            â”‚                                   â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                  â”‚                  â”‚
        â”‚                  â”‚                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
â”‚              â”‚  â”‚                 â”‚  â”‚             â”‚
â”‚  Dataset     â”‚  â”‚  LLM Adapter    â”‚  â”‚  Metrics    â”‚
â”‚  Entity      â”‚  â”‚  (Outbound)     â”‚  â”‚  (Domain)   â”‚
â”‚              â”‚  â”‚                 â”‚  â”‚             â”‚
â”‚  - TestCase  â”‚  â”‚  - OpenAI       â”‚  â”‚  - Ragas    â”‚
â”‚  - Dataset   â”‚  â”‚  - Anthropic    â”‚  â”‚  - Custom   â”‚
â”‚              â”‚  â”‚  - Ollama       â”‚  â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Memory-aware í™•ì¥**
- `MemoryAwareEvaluator`ëŠ” ìœ„ ë‹¤ì´ì–´ê·¸ë¨ì˜ RagasEvaluator ì•ë‹¨ì—ì„œ DomainMemoryPortë¥¼ ì¡°íšŒí•˜ì—¬ metricë³„ ì„ê³„ê°’ì„ ì¡°ì •í•˜ê³ , `augment_context_with_facts()`ë¡œ Retrieved contextì— factual knowledgeë¥¼ ì£¼ì…í•©ë‹ˆë‹¤.
- `MemoryBasedAnalysis`ëŠ” EvaluationRunì´ ì €ì¥ëœ í›„ DomainMemoryì˜ Learning ì§‘ê³„ì™€ ë¹„êµí•˜ì—¬ íŠ¸ë Œë“œ/ì¶”ì²œì„ ê³„ì‚°í•©ë‹ˆë‹¤.
- `AsyncBatchExecutor`ëŠ” ë‹¤ìˆ˜ì˜ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë¥¼ ì²˜ë¦¬í•  ë•Œ LLM rate-limitì„ ê³ ë ¤í•´ ë°°ì¹˜ í¬ê¸°ì™€ ì¬ì‹œë„ë¥¼ ìë™ìœ¼ë¡œ ì¡°ì •í•©ë‹ˆë‹¤.

### 3.2 ë¶„ì„ íŒŒì´í”„ë¼ì¸ ì»´í¬ë„ŒíŠ¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ANALYSIS PIPELINE COMPONENTS                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          PipelineOrchestrator                                â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  Intent          â”‚  â”‚  Template        â”‚  â”‚  Module           â”‚        â”‚
â”‚  â”‚  Classifier       â”‚  â”‚  Registry        â”‚  â”‚  Catalog          â”‚        â”‚
â”‚  â”‚                  â”‚  â”‚                  â”‚  â”‚                  â”‚        â”‚
â”‚  â”‚  - í‚¤ì›Œë“œ ë¶„ì„    â”‚  â”‚  - í…œí”Œë¦¿ ì¡°íšŒ    â”‚  â”‚  - ëª¨ë“ˆ ë©”íƒ€ë°ì´í„°â”‚        â”‚
â”‚  â”‚  - ì˜ë„ ì¶”ì¶œ      â”‚  â”‚  - í…œí”Œë¦¿ ê²€ì¦    â”‚  â”‚  - ì˜ì¡´ì„± ê·¸ë˜í”„  â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚           â”‚                     â”‚                      â”‚                   â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                      â”‚                                                      â”‚
â”‚                      â”‚ build_pipeline()                                     â”‚
â”‚                      â”‚                                                      â”‚
â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚           â”‚                                                  â”‚              â”‚
â”‚           â”‚          AnalysisPipeline                        â”‚              â”‚
â”‚           â”‚          (Domain Entity)                          â”‚              â”‚
â”‚           â”‚                                                  â”‚              â”‚
â”‚           â”‚  - DAG êµ¬ì¡° (nodes, edges)                      â”‚              â”‚
â”‚           â”‚  - ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸                                â”‚              â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                      â”‚                                                      â”‚
â”‚                      â”‚ execute_pipeline()                                   â”‚
â”‚                      â”‚                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚              â”‚              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
â”‚              â”‚  â”‚         â”‚  â”‚             â”‚
â”‚ Statistical  â”‚  â”‚  NLP    â”‚  â”‚  Causal    â”‚
â”‚ Analysis     â”‚  â”‚ Analysisâ”‚  â”‚  Analysis  â”‚
â”‚ Module       â”‚  â”‚ Module  â”‚  â”‚  Module    â”‚
â”‚              â”‚  â”‚         â”‚  â”‚             â”‚
â”‚ - í†µê³„ ê³„ì‚°  â”‚  â”‚ - ê°ì„±  â”‚  â”‚ - ì¸ê³¼ê´€ê³„ â”‚
â”‚ - ë¶„í¬ ë¶„ì„  â”‚  â”‚ - ì£¼ì œ  â”‚  â”‚ - ì›ì¸ ë¶„ì„â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.3 ë„ë©”ì¸ ë©”ëª¨ë¦¬ ì»´í¬ë„ŒíŠ¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        DOMAIN MEMORY COMPONENTS                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      DomainLearningHook                                      â”‚
â”‚                      (Domain Service)                                       â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  Fact Extractionâ”‚  â”‚  Pattern         â”‚  â”‚  Behavior         â”‚        â”‚
â”‚  â”‚                  â”‚  â”‚  Extraction      â”‚  â”‚  Extraction       â”‚        â”‚
â”‚  â”‚  - SPO íŠ¸ë¦¬í”Œ    â”‚  â”‚  - ì„±ê³µ/ì‹¤íŒ¨ íŒ¨í„´â”‚  â”‚  - ì¬ì‚¬ìš© í–‰ë™    â”‚        â”‚
â”‚  â”‚  - ì‹ ë¢°ë„ ê³„ì‚°   â”‚  â”‚  - ë©”íŠ¸ë¦­ ë¶„í¬   â”‚  â”‚  - ì„±ê³µë¥  ê³„ì‚°    â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚           â”‚                     â”‚                      â”‚                   â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                      â”‚                                                      â”‚
â”‚                      â”‚ DomainMemoryPort                                    â”‚
â”‚                      â”‚                                                      â”‚
â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚           â”‚                                                  â”‚              â”‚
â”‚           â”‚      SQLiteDomainMemoryAdapter                  â”‚              â”‚
â”‚           â”‚      (Outbound Adapter)                          â”‚              â”‚
â”‚           â”‚                                                  â”‚              â”‚
â”‚           â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚              â”‚
â”‚           â”‚  â”‚  Factual     â”‚  â”‚  Experiential â”‚           â”‚              â”‚
â”‚           â”‚  â”‚  Layer       â”‚  â”‚  Layer       â”‚           â”‚              â”‚
â”‚           â”‚  â”‚              â”‚  â”‚              â”‚           â”‚              â”‚
â”‚           â”‚  â”‚  - FactualFactâ”‚ â”‚  - Learning  â”‚           â”‚              â”‚
â”‚           â”‚  â”‚  - SPO ì €ì¥  â”‚  â”‚    Memory    â”‚           â”‚              â”‚
â”‚           â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚              â”‚
â”‚           â”‚                                                  â”‚              â”‚
â”‚           â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚              â”‚
â”‚           â”‚  â”‚  Behavior    â”‚                              â”‚              â”‚
â”‚           â”‚  â”‚  Layer       â”‚                              â”‚              â”‚
â”‚           â”‚  â”‚              â”‚                              â”‚              â”‚
â”‚           â”‚  â”‚  - BehaviorEntry                             â”‚              â”‚
â”‚           â”‚  â”‚  - Handbook   â”‚                              â”‚              â”‚
â”‚           â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚              â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

- SQLite ì–´ëŒ‘í„°ëŠ” FTS5 ì¸ë±ìŠ¤ë¥¼ ìë™ ì¬ìƒì„±í•˜ë©°, `instrumentation_span`ìœ¼ë¡œ Fact ê²€ìƒ‰/ì €ì¥ì„ Phoenix traceì— ê¸°ë¡í•©ë‹ˆë‹¤.
- Domain MemoryëŠ” `MemoryAwareEvaluator`, `MemoryBasedAnalysis`, `DomainLearningHook`ì—ì„œ ê°ê° Retrieval, Insight, Formation ìš©ë„ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤.

### 3.4 ê°œì„  ê°€ì´ë“œ ì»´í¬ë„ŒíŠ¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        IMPROVEMENT GUIDE COMPONENTS                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ImprovementGuideService                                   â”‚
â”‚                    (Domain Service)                                          â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚  Pattern         â”‚              â”‚  Insight         â”‚                   â”‚
â”‚  â”‚  Detector        â”‚              â”‚  Generator       â”‚                   â”‚
â”‚  â”‚  (Rule-based)    â”‚              â”‚  (LLM-based)      â”‚                   â”‚
â”‚  â”‚                  â”‚              â”‚                  â”‚                   â”‚
â”‚  â”‚  - í”Œë ˆì´ë¶ ê·œì¹™ â”‚              â”‚  - LLM ë¶„ì„       â”‚                   â”‚
â”‚  â”‚  - íŒ¨í„´ íƒì§€     â”‚              â”‚  - ì¸ì‚¬ì´íŠ¸ ìƒì„± â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚           â”‚                                  â”‚                             â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚                          â”‚                                                   â”‚
â”‚                          â”‚ Hybrid Analysis                                   â”‚
â”‚                          â”‚                                                   â”‚
â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚           â”‚                                   â”‚                             â”‚
â”‚           â”‚    ImprovementReport              â”‚                             â”‚
â”‚           â”‚    (Domain Entity)                 â”‚                             â”‚
â”‚           â”‚                                   â”‚                             â”‚
â”‚           â”‚  - íŒ¨í„´ íƒì§€ ê²°ê³¼                 â”‚                             â”‚
â”‚           â”‚  - LLM ì¸ì‚¬ì´íŠ¸                   â”‚                             â”‚
â”‚           â”‚  - ìš°ì„ ìˆœìœ„ ì•¡ì…˜                   â”‚                             â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.5 ê´€ì¸¡ì„± Â· ìë™í™” ì»´í¬ë„ŒíŠ¸

- **Tracker Adapters** (`langfuse_adapter.py`, `mlflow_adapter.py`, `phoenix_adapter.py`): `TrackerPort` êµ¬í˜„ìœ¼ë¡œ Langfuse/MLflow/Phoenixì— trace/span/scoreë¥¼ ê¸°ë¡í•˜ê³  Phoenix ë§í¬ë¥¼ metadataì— ì €ì¥í•©ë‹ˆë‹¤.
- **Phoenix Instrumentation & Sync** (`config/phoenix_support.py`, `config/instrumentation.py`, `adapters/outbound/phoenix/sync_service.py`): OpenTelemetry tracer ì´ˆê¸°í™”, prompt manifest diffÂ·experiment metadata ì¶”ì¶œ, dataset/experiment ì—…ë¡œë“œë¥¼ ë‹´ë‹¹í•©ë‹ˆë‹¤.
- **Prompt Manifest Utilities** (`prompt_manifest.py`): `PromptDiffSummary`ë¡œ í”„ë¡¬í”„íŠ¸ ë²„ì „ ì°¨ì´ë¥¼ ê³„ì‚°í•´ Phoenix/Trackerì™€ ë™ê¸°í™”í•©ë‹ˆë‹¤.
- **reports/release_notes.py**: ìµœì‹  EvaluationRunê³¼ AnalysisBundleì„ Markdown/Slack-friendly í…ìŠ¤íŠ¸ë¡œ ìš”ì•½í•©ë‹ˆë‹¤.
- **Agent & Regression Automation** (`agent/*.py`, `scripts/regression_runner.py`): `AgentConfig`ë¡œ ì •ì˜ëœ ê°œë°œ/ìš´ì˜ ì—ì´ì „íŠ¸ë¥¼ ì‹¤í–‰í•˜ê³ , JSON ì •ì˜ ê¸°ë°˜ íšŒê·€ ì‹œë‚˜ë¦¬ì˜¤(`RegressionSuite`)ë¥¼ ë°˜ë³µ ì‹¤í–‰í•©ë‹ˆë‹¤.

### ì£¼ìš” ì»´í¬ë„ŒíŠ¸ ìš”ì•½

| ì»´í¬ë„ŒíŠ¸ | ê³„ì¸µ | ì±…ì„ |
|---------|------|------|
| **RagasEvaluator** | Domain Service | í‰ê°€ ì‹¤í–‰ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ |
| **AnalysisService** | Domain Service | í†µê³„/NLP/ì¸ê³¼ ë¶„ì„ í†µí•© |
| **PipelineOrchestrator** | Domain Service | DAG íŒŒì´í”„ë¼ì¸ ì‹¤í–‰ |
| **DomainLearningHook** | Domain Service | ë„ë©”ì¸ ë©”ëª¨ë¦¬ í˜•ì„± |
| **ImprovementGuideService** | Domain Service | ê°œì„  ê°€ì´ë“œ ìƒì„± |
| **CLI Adapter** | Inbound Adapter | CLI ì¸í„°í˜ì´ìŠ¤ |
| **Web Adapter** | Inbound Adapter | Web UI ì¸í„°í˜ì´ìŠ¤ |
| **LLM Adapters** | Outbound Adapter | LLM API í†µì‹  |
| **Storage Adapters** | Outbound Adapter | ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥ |
| **Analysis Adapters** | Outbound Adapter | ë¶„ì„ ëª¨ë“ˆ ì‹¤í–‰ |

---

## Level 4: Code Structure

**ì½”ë“œ êµ¬ì¡°**ëŠ” EvalVaultì˜ ëª¨ë“  í´ë˜ìŠ¤ë¥¼ ê³„ì¸µë³„ë¡œ ë¶„ë¥˜í•˜ì—¬ ë³´ì—¬ì¤ë‹ˆë‹¤.

> **ì´ í´ë˜ìŠ¤ ìˆ˜**: 200+ í´ë˜ìŠ¤
> - Domain Layer: 96 í´ë˜ìŠ¤ (Entities 75, Services 20, Metrics 1)
> - Ports Layer: 40 í´ë˜ìŠ¤ (Inbound 8, Outbound 32)
> - Adapters Layer: 85 í´ë˜ìŠ¤ (Inbound 20, Outbound 65)
> - Config Layer: 14 í´ë˜ìŠ¤

---

### 4.1 Domain Layer - Entities (75 í´ë˜ìŠ¤)

#### 4.1.1 Core Entities

| í´ë˜ìŠ¤ | íŒŒì¼ | ì„¤ëª… |
|--------|------|------|
| `TestCase` | dataset.py | ê°œë³„ í‰ê°€ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ |
| `Dataset` | dataset.py | í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì»¬ë ‰ì…˜ |
| `MetricScore` | result.py | ê°œë³„ ë©”íŠ¸ë¦­ ì ìˆ˜ |
| `TestCaseResult` | result.py | í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ í‰ê°€ ê²°ê³¼ |
| `EvaluationRun` | result.py | ì „ì²´ í‰ê°€ ì‹¤í–‰ ê²°ê³¼ |
| `MetricType` | result.py | ë©”íŠ¸ë¦­ íƒ€ì… Enum |

#### 4.1.2 Experiment Entities

| í´ë˜ìŠ¤ | íŒŒì¼ | ì„¤ëª… |
|--------|------|------|
| `ExperimentGroup` | experiment.py | ì‹¤í—˜ ê·¸ë£¹ ì •ì˜ |
| `Experiment` | experiment.py | A/B ì‹¤í—˜ ì •ì˜ |

#### 4.1.3 Knowledge Graph Entities

| í´ë˜ìŠ¤ | íŒŒì¼ | ì„¤ëª… |
|--------|------|------|
| `EntityModel` | kg.py | ì§€ì‹ ê·¸ë˜í”„ ì—”í‹°í‹° |
| `RelationModel` | kg.py | ì§€ì‹ ê·¸ë˜í”„ ê´€ê³„ |

#### 4.1.4 Analysis Pipeline Entities (10 í´ë˜ìŠ¤)

| í´ë˜ìŠ¤ | íŒŒì¼ | ì„¤ëª… |
|--------|------|------|
| `AnalysisIntent` | analysis_pipeline.py | ë¶„ì„ ì˜ë„ Enum (19ê°œ ì˜ë„) |
| `AnalysisIntentCategory` | analysis_pipeline.py | ì˜ë„ ì¹´í…Œê³ ë¦¬ Enum |
| `NodeExecutionStatus` | analysis_pipeline.py | ë…¸ë“œ ì‹¤í–‰ ìƒíƒœ |
| `AnalysisNode` | analysis_pipeline.py | DAG íŒŒì´í”„ë¼ì¸ ë…¸ë“œ |
| `AnalysisContext` | analysis_pipeline.py | ë¶„ì„ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ |
| `AnalysisPipeline` | analysis_pipeline.py | DAG íŒŒì´í”„ë¼ì¸ ì •ì˜ |
| `NodeResult` | analysis_pipeline.py | ë…¸ë“œ ì‹¤í–‰ ê²°ê³¼ |
| `PipelineResult` | analysis_pipeline.py | íŒŒì´í”„ë¼ì¸ ì‹¤í–‰ ê²°ê³¼ |
| `ModuleMetadata` | analysis_pipeline.py | ëª¨ë“ˆ ë©”íƒ€ë°ì´í„° |
| `ModuleCatalog` | analysis_pipeline.py | ëª¨ë“ˆ ì¹´íƒˆë¡œê·¸ |

#### 4.1.5 Domain Memory Entities (5 í´ë˜ìŠ¤)

| í´ë˜ìŠ¤ | íŒŒì¼ | ì„¤ëª… |
|--------|------|------|
| `FactualFact` | memory.py | ì‚¬ì‹¤ì  ê¸°ì–µ (SPO íŠ¸ë¦¬í”Œ) |
| `LearningMemory` | memory.py | í•™ìŠµ ê¸°ì–µ (íŒ¨í„´) |
| `DomainMemoryContext` | memory.py | ë©”ëª¨ë¦¬ ê²€ìƒ‰ ì»¨í…ìŠ¤íŠ¸ |
| `BehaviorEntry` | memory.py | í–‰ë™ ê¸°ì–µ ì—”íŠ¸ë¦¬ |
| `BehaviorHandbook` | memory.py | í–‰ë™ í•¸ë“œë¶ |

#### 4.1.6 Improvement Entities (11 í´ë˜ìŠ¤)

| í´ë˜ìŠ¤ | íŒŒì¼ | ì„¤ëª… |
|--------|------|------|
| `RAGComponent` | improvement.py | RAG ì»´í¬ë„ŒíŠ¸ Enum |
| `ImprovementPriority` | improvement.py | ê°œì„  ìš°ì„ ìˆœìœ„ Enum |
| `PatternType` | improvement.py | íŒ¨í„´ íƒ€ì… Enum |
| `EffortLevel` | improvement.py | ë…¸ë ¥ ìˆ˜ì¤€ Enum |
| `EvidenceSource` | improvement.py | ì¦ê±° ì†ŒìŠ¤ Enum |
| `FailureSample` | improvement.py | ì‹¤íŒ¨ ìƒ˜í”Œ |
| `PatternEvidence` | improvement.py | íŒ¨í„´ íƒì§€ ì¦ê±° |
| `ImprovementEvidence` | improvement.py | ê°œì„  ì¦ê±° |
| `ImprovementAction` | improvement.py | ê°œì„  ì•¡ì…˜ |
| `RAGImprovementGuide` | improvement.py | RAG ê°œì„  ê°€ì´ë“œ |
| `ImprovementReport` | improvement.py | ê°œì„  ë¦¬í¬íŠ¸ |

#### 4.1.7 RAG Trace Entities (6 í´ë˜ìŠ¤)

| í´ë˜ìŠ¤ | íŒŒì¼ | ì„¤ëª… |
|--------|------|------|
| `RetrievalMethod` | rag_trace.py | ê²€ìƒ‰ ë°©ë²• Enum |
| `RerankMethod` | rag_trace.py | ì¬ìˆœìœ„ ë°©ë²• Enum |
| `RetrievedDocument` | rag_trace.py | ê²€ìƒ‰ëœ ë¬¸ì„œ |
| `RetrievalData` | rag_trace.py | ê²€ìƒ‰ ë‹¨ê³„ ë°ì´í„° |
| `GenerationData` | rag_trace.py | ìƒì„± ë‹¨ê³„ ë°ì´í„° |
| `RAGTraceData` | rag_trace.py | RAG íŒŒì´í”„ë¼ì¸ ì¶”ì  ë°ì´í„° |

#### 4.1.8 Benchmark Entities (8 í´ë˜ìŠ¤)

| í´ë˜ìŠ¤ | íŒŒì¼ | ì„¤ëª… |
|--------|------|------|
| `TaskType` | benchmark.py | ë²¤ì¹˜ë§ˆí¬ íƒœìŠ¤í¬ íƒ€ì… |
| `MetricType` | benchmark.py | ë²¤ì¹˜ë§ˆí¬ ë©”íŠ¸ë¦­ íƒ€ì… |
| `RAGTestCase` | benchmark.py | ë²¤ì¹˜ë§ˆí¬ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ |
| `RAGTestCaseResult` | benchmark.py | í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ê²°ê³¼ |
| `SplitScores` | benchmark.py | ë¶„í•  ì ìˆ˜ |
| `BenchmarkResult` | benchmark.py | ë²¤ì¹˜ë§ˆí¬ ê²°ê³¼ |
| `BenchmarkSuite` | benchmark.py | ë²¤ì¹˜ë§ˆí¬ ìŠ¤ìœ„íŠ¸ |
| `BenchmarkConfig` | benchmark.py | ë²¤ì¹˜ë§ˆí¬ ì„¤ì • |

#### 4.1.8.1 Debug Entities (1 í´ë˜ìŠ¤)

| í´ë˜ìŠ¤ | íŒŒì¼ | ì„¤ëª… |
|--------|------|------|
| `DebugReport` | debug.py | ë””ë²„ê·¸ ë¦¬í¬íŠ¸ |

#### 4.1.8.2 Method Entities (3 í´ë˜ìŠ¤)

| í´ë˜ìŠ¤ | íŒŒì¼ | ì„¤ëª… |
|--------|------|------|
| `MethodInput` | method.py | ë©”ì„œë“œ ì…ë ¥ ë°ì´í„° |
| `MethodOutput` | method.py | ë©”ì„œë“œ ì¶œë ¥ ë°ì´í„° |
| `MethodInputDataset` | method.py | ë©”ì„œë“œ ì…ë ¥ ë°ì´í„°ì…‹ |

#### 4.1.8.3 Stage Entities (4 í´ë˜ìŠ¤)

| í´ë˜ìŠ¤ | íŒŒì¼ | ì„¤ëª… |
|--------|------|------|
| `StagePayloadRef` | stage.py | ìŠ¤í…Œì´ì§€ í˜ì´ë¡œë“œ ì°¸ì¡° |
| `StageEvent` | stage.py | ìŠ¤í…Œì´ì§€ ì´ë²¤íŠ¸ |
| `StageMetric` | stage.py | ìŠ¤í…Œì´ì§€ ë©”íŠ¸ë¦­ |
| `StageSummary` | stage.py | ìŠ¤í…Œì´ì§€ ìš”ì•½ |

#### 4.1.9 Statistical Analysis Entities (27 í´ë˜ìŠ¤)

| í´ë˜ìŠ¤ | íŒŒì¼ | ì„¤ëª… |
|--------|------|------|
| `AnalysisType` | analysis.py | ë¶„ì„ íƒ€ì… Enum |
| `QuestionType` | analysis.py | ì§ˆë¬¸ íƒ€ì… Enum |
| `EffectSizeLevel` | analysis.py | íš¨ê³¼ í¬ê¸° ìˆ˜ì¤€ |
| `MetricStats` | analysis.py | ë©”íŠ¸ë¦­ í†µê³„ |
| `CorrelationInsight` | analysis.py | ìƒê´€ê´€ê³„ ì¸ì‚¬ì´íŠ¸ |
| `LowPerformerInfo` | analysis.py | ì €ì„±ê³¼ ì •ë³´ |
| `ComparisonResult` | analysis.py | ë¹„êµ ê²°ê³¼ |
| `AnalysisResult` | analysis.py | ë¶„ì„ ê²°ê³¼ ê¸°ë³¸ í´ë˜ìŠ¤ |
| `StatisticalAnalysis` | analysis.py | í†µê³„ ë¶„ì„ ê²°ê³¼ |
| `MetaAnalysisResult` | analysis.py | ë©”íƒ€ ë¶„ì„ ê²°ê³¼ |
| `AnalysisBundle` | analysis.py | ë¶„ì„ ë²ˆë“¤ |
| `TextStats` | analysis.py | í…ìŠ¤íŠ¸ í†µê³„ |
| `QuestionTypeStats` | analysis.py | ì§ˆë¬¸ íƒ€ì… í†µê³„ |
| `KeywordInfo` | analysis.py | í‚¤ì›Œë“œ ì •ë³´ |
| `TopicCluster` | analysis.py | í† í”½ í´ëŸ¬ìŠ¤í„° |
| `NLPAnalysis` | analysis.py | NLP ë¶„ì„ ê²°ê³¼ |
| `CausalFactorType` | analysis.py | ì¸ê³¼ ìš”ì¸ íƒ€ì… |
| `ImpactDirection` | analysis.py | ì˜í–¥ ë°©í–¥ |
| `ImpactStrength` | analysis.py | ì˜í–¥ ê°•ë„ |
| `FactorStats` | analysis.py | ìš”ì¸ í†µê³„ |
| `StratifiedGroup` | analysis.py | ê³„ì¸µí™” ê·¸ë£¹ |
| `FactorImpact` | analysis.py | ìš”ì¸ ì˜í–¥ |
| `CausalRelationship` | analysis.py | ì¸ê³¼ ê´€ê³„ |
| `RootCause` | analysis.py | ê·¼ë³¸ ì›ì¸ |
| `InterventionSuggestion` | analysis.py | ê°œì… ì œì•ˆ |
| `CausalAnalysis` | analysis.py | ì¸ê³¼ ë¶„ì„ ê²°ê³¼ |

---

### 4.2 Domain Layer - Services (20 í´ë˜ìŠ¤)

| í´ë˜ìŠ¤ | íŒŒì¼ | ì„¤ëª… |
|--------|------|------|
| `RagasEvaluator` | evaluator.py | Ragas ê¸°ë°˜ í‰ê°€ ì„œë¹„ìŠ¤ |
| `MemoryAwareEvaluator` | memory_aware_evaluator.py | Domain Memory ì‹ ë¢°ë„ë¡œ threshold ì¡°ì • ë° ì»¨í…ìŠ¤íŠ¸ í™•ì¥ |
| `MemoryBasedAnalysis` | memory_based_analysis.py | ê³¼ê±° í•™ìŠµê³¼ í˜„ì¬ ê²°ê³¼ë¥¼ ë¹„êµí•˜ì—¬ íŠ¸ë Œë“œÂ·ì¶”ì²œ ìƒì„± |
| `AsyncBatchExecutor` | async_batch_executor.py | ì ì‘í˜• ë¹„ë™ê¸° ë°°ì¹˜ ì‹¤í–‰ê¸° |
| `BatchExecutor` | batch_executor.py | ë™ê¸° ë°°ì¹˜ ì‹¤í–‰ê¸° |
| `AnalysisService` | analysis_service.py | í†µê³„/NLP/ì¸ê³¼ ë¶„ì„ í†µí•© ì„œë¹„ìŠ¤ |
| `PipelineOrchestrator` | pipeline_orchestrator.py | DAG ê¸°ë°˜ ë¶„ì„ íŒŒì´í”„ë¼ì¸ ë¹Œë”/ì‹¤í–‰ê¸° |
| `PipelineTemplateRegistry` | pipeline_template_registry.py | í…œí”Œë¦¿ ì¹´íƒˆë¡œê·¸ ë° ê²€ì¦ê¸° |
| `IntentKeywordRegistry` | intent_classifier.py | ì˜ë„ë³„ í‚¤ì›Œë“œ ë§¤í•‘ |
| `KeywordIntentClassifier` | intent_classifier.py | í‚¤ì›Œë“œ ê¸°ë°˜ ì˜ë„ ë¶„ë¥˜ê¸° |
| `DomainLearningHook` | domain_learning_hook.py | í‰ê°€ ê²°ê³¼ì—ì„œ Fact/Learning/Behavior ì¶”ì¶œ |
| `ImprovementGuideService` | improvement_guide_service.py | ê·œì¹™/LLM ê²°í•© ê°œì„  ë¦¬í¬íŠ¸ ìƒì„± |
| `ExperimentManager` | experiment_manager.py | ì‹¤í—˜ ìƒì„±/ë¹„êµ/ê²°ë¡  ê¸°ë¡ |
| `ExperimentRepository` | experiment_repository.py | StoragePort ê¸°ë°˜ ì‹¤í—˜ CRUD |
| `ExperimentComparator` | experiment_comparator.py | ê·¸ë£¹ê°„ ë©”íŠ¸ë¦­ ë¹„êµ |
| `ExperimentStatisticsCalculator` | experiment_statistics.py | ì‹¤í—˜ í†µê³„ ìš”ì•½ |
| `ExperimentReportGenerator` | experiment_reporter.py | ì‹¤í—˜ ë³´ê³ ì„œ ìƒì„± |
| `BenchmarkRunner` | benchmark_runner.py | í•œêµ­ì–´ RAG ë²¤ì¹˜ë§ˆí¬ ì‹¤í–‰ |
| `BenchmarkComparison` | benchmark_runner.py | ë²¤ì¹˜ë§ˆí¬ ë¹„êµ ê²°ê³¼ |
| `DocumentChunker` | document_chunker.py | ë¬¸ì„œ ì²­í‚¹ ì„œë¹„ìŠ¤ |
| `EntityExtractor` | entity_extractor.py | ì—”í‹°í‹°/ê´€ê³„ ì¶”ì¶œ |
| `KnowledgeGraphGenerator` | kg_generator.py | ì§€ì‹ ê·¸ë˜í”„ ìƒì„± ì„œë¹„ìŠ¤ |
| `BasicTestsetGenerator` | testset_generator.py | ê¸°ë³¸ í…ŒìŠ¤íŠ¸ì…‹ ìƒì„±ê¸° |
| `KnowledgeGraphTestsetGenerator` | testset_generator.py | ê·¸ë˜í”„ ê¸°ë°˜ í…ŒìŠ¤íŠ¸ì…‹ ìƒì„±ê¸° |
| `EmbeddingOverlay` | embedding_overlay.py | Phoenix ì„ë² ë”© í´ëŸ¬ìŠ¤í„° â†’ Domain Memory fact ë³€í™˜ |
| `StageMetricService` | stage_metric_service.py | ë‹¨ê³„ë³„ ë©”íŠ¸ë¦­ ìˆ˜ì§‘/ê´€ë¦¬ |
| `StageSummaryService` | stage_summary_service.py | ë‹¨ê³„ë³„ ìš”ì•½ ìƒì„± |
| `StageEventBuilder` | stage_event_builder.py | ìŠ¤í…Œì´ì§€ ì´ë²¤íŠ¸ ë¹Œë“œ |
| `StageMetricGuideService` | stage_metric_guide_service.py | ë©”íŠ¸ë¦­ ê¸°ë°˜ ê°œì„  ê°€ì´ë“œ |
| `MethodRunner` | method_runner.py | í‰ê°€ ë©”ì„œë“œ ì‹¤í–‰ |
| `CacheMetrics` | cache_metrics.py | ìºì‹œ ì„±ëŠ¥ ë©”íŠ¸ë¦­ ê´€ë¦¬ |
| `DatasetPreprocessor` | dataset_preprocessor.py | ë°ì´í„°ì…‹ ì „ì²˜ë¦¬ |
| `DebugReportService` | debug_report_service.py | ë””ë²„ê·¸ ë¦¬í¬íŠ¸ ìƒì„± |
| `PromptManifest` | prompt_manifest.py | í”„ë¡¬í”„íŠ¸ ë²„ì „ ê´€ë¦¬ |
| `PromptStatus` | prompt_status.py | í”„ë¡¬í”„íŠ¸ ìƒíƒœ ì¶”ì  |
| `RetrievalMetrics` | retrieval_metrics.py | ê²€ìƒ‰ í’ˆì§ˆ ë©”íŠ¸ë¦­ ê³„ì‚° |
| `RetrieverContext` | retriever_context.py | ê²€ìƒ‰ ì»¨í…ìŠ¤íŠ¸ ê´€ë¦¬ |
| `ThresholdProfiles` | threshold_profiles.py | ë©”íŠ¸ë¦­ ì„ê³„ê°’ ê´€ë¦¬ |

---

### 4.3 Domain Layer - Metrics (1 í´ë˜ìŠ¤)

| í´ë˜ìŠ¤ | íŒŒì¼ | ì„¤ëª… |
|--------|------|------|
| `InsuranceTermAccuracy` | insurance.py | ë³´í—˜ ìš©ì–´ ì •í™•ë„ ë©”íŠ¸ë¦­ |

---

### 4.4 Ports Layer - Inbound (8 í´ë˜ìŠ¤)

| í´ë˜ìŠ¤ | íŒŒì¼ | ì„¤ëª… |
|--------|------|------|
| `EvaluatorPort` | evaluator_port.py | í‰ê°€ ì‹¤í–‰ í¬íŠ¸ |
| `AnalysisPipelinePort` | analysis_pipeline_port.py | ë¶„ì„ íŒŒì´í”„ë¼ì¸ í¬íŠ¸ |
| `DomainLearningHookPort` | learning_hook_port.py | ë„ë©”ì¸ í•™ìŠµ í›… í¬íŠ¸ |
| `EvalRequest` | web_port.py | í‰ê°€ ìš”ì²­ DTO |
| `EvalProgress` | web_port.py | í‰ê°€ ì§„í–‰ë¥  DTO |
| `RunSummary` | web_port.py | ì‹¤í–‰ ìš”ì•½ DTO |
| `RunFilters` | web_port.py | ì‹¤í–‰ í•„í„° DTO |
| `WebUIPort` | web_port.py | ì›¹ UI í¬íŠ¸ |

---

### 4.5 Ports Layer - Outbound (32 í´ë˜ìŠ¤)

#### 4.5.1 LLM & Embedding Ports

| í´ë˜ìŠ¤ | íŒŒì¼ | ì„¤ëª… |
|--------|------|------|
| `ThinkingConfig` | llm_port.py | Thinking ëª¨ë“œ ì„¤ì • |
| `LLMPort` | llm_port.py | LLM ì–´ëŒ‘í„° ì¸í„°í˜ì´ìŠ¤ |
| `EmbeddingResult` | embedding_port.py | ì„ë² ë”© ê²°ê³¼ |
| `EmbeddingPort` | embedding_port.py | ì„ë² ë”© í¬íŠ¸ |

#### 4.5.2 Data & Storage Ports

| í´ë˜ìŠ¤ | íŒŒì¼ | ì„¤ëª… |
|--------|------|------|
| `DatasetPort` | dataset_port.py | ë°ì´í„°ì…‹ ë¡œë” í¬íŠ¸ |
| `StoragePort` | storage_port.py | ì €ì¥ì†Œ í¬íŠ¸ |
| `DomainMemoryPort` | domain_memory_port.py | ë„ë©”ì¸ ë©”ëª¨ë¦¬ í¬íŠ¸ |
| `AnalysisCachePort` | analysis_cache_port.py | ë¶„ì„ ìºì‹œ í¬íŠ¸ |

#### 4.5.3 Analysis Ports

| í´ë˜ìŠ¤ | íŒŒì¼ | ì„¤ëª… |
|--------|------|------|
| `AnalysisPort` | analysis_port.py | í†µê³„ ë¶„ì„ í¬íŠ¸ |
| `NLPAnalysisPort` | nlp_analysis_port.py | NLP ë¶„ì„ í¬íŠ¸ |
| `CausalAnalysisPort` | causal_analysis_port.py | ì¸ê³¼ ë¶„ì„ í¬íŠ¸ |
| `AnalysisModulePort` | analysis_module_port.py | ë¶„ì„ ëª¨ë“ˆ í¬íŠ¸ |
| `IntentClassificationResult` | intent_classifier_port.py | ì˜ë„ ë¶„ë¥˜ ê²°ê³¼ |
| `IntentClassifierPort` | intent_classifier_port.py | ì˜ë„ ë¶„ë¥˜ê¸° í¬íŠ¸ |

#### 4.5.4 Tracking & Report Ports

| í´ë˜ìŠ¤ | íŒŒì¼ | ì„¤ëª… |
|--------|------|------|
| `TrackerPort` | tracker_port.py | ì¶”ì ê¸° í¬íŠ¸ |
| `ReportPort` | report_port.py | ë¦¬í¬íŠ¸ í¬íŠ¸ |

#### 4.5.5 Korean NLP Ports

| í´ë˜ìŠ¤ | íŒŒì¼ | ì„¤ëª… |
|--------|------|------|
| `FaithfulnessClaimResultProtocol` | korean_nlp_port.py | ì¶©ì‹¤ë„ í´ë ˆì„ ê²°ê³¼ |
| `FaithfulnessResultProtocol` | korean_nlp_port.py | ì¶©ì‹¤ë„ ê²°ê³¼ |
| `RetrieverResultProtocol` | korean_nlp_port.py | ê²€ìƒ‰ê¸° ê²°ê³¼ |
| `RetrieverPort` | korean_nlp_port.py | ê²€ìƒ‰ê¸° í¬íŠ¸ |
| `KoreanNLPToolkitPort` | korean_nlp_port.py | í•œêµ­ì–´ NLP íˆ´í‚· í¬íŠ¸ |

#### 4.5.6 Improvement Ports

| í´ë˜ìŠ¤ | íŒŒì¼ | ì„¤ëª… |
|--------|------|------|
| `ActionDefinitionProtocol` | improvement_port.py | ì•¡ì…˜ ì •ì˜ í”„ë¡œí† ì½œ |
| `PatternDefinitionProtocol` | improvement_port.py | íŒ¨í„´ ì •ì˜ í”„ë¡œí† ì½œ |
| `MetricPlaybookProtocol` | improvement_port.py | ë©”íŠ¸ë¦­ í”Œë ˆì´ë¶ í”„ë¡œí† ì½œ |
| `PlaybookPort` | improvement_port.py | í”Œë ˆì´ë¶ í¬íŠ¸ |
| `PatternDetectorPort` | improvement_port.py | íŒ¨í„´ íƒì§€ê¸° í¬íŠ¸ |
| `ClaimImprovementProtocol` | improvement_port.py | í´ë ˆì„ ê°œì„  í”„ë¡œí† ì½œ |
| `InsightGeneratorPort` | improvement_port.py | ì¸ì‚¬ì´íŠ¸ ìƒì„±ê¸° í¬íŠ¸ |

#### 4.5.7 Other Ports

| í´ë˜ìŠ¤ | íŒŒì¼ | ì„¤ëª… |
|--------|------|------|
| `RelationAugmenterPort` | relation_augmenter_port.py | ê´€ê³„ ì¦ê°•ê¸° í¬íŠ¸ |

---

### 4.6 Adapters Layer - Inbound (20 í´ë˜ìŠ¤)

#### 4.6.1 Web UI Adapters

| í´ë˜ìŠ¤ | íŒŒì¼ | ì„¤ëª… |
|--------|------|------|
| `WebUIAdapter` | adapter.py | ì›¹ UI ì–´ëŒ‘í„° ë©”ì¸ |
| `GateResult` | adapter.py | í’ˆì§ˆ ê²Œì´íŠ¸ ê²°ê³¼ |
| `GateReport` | adapter.py | í’ˆì§ˆ ê²Œì´íŠ¸ ë¦¬í¬íŠ¸ |
| `WebSession` | session.py | ì›¹ ì„¸ì…˜ ê´€ë¦¬ |

#### 4.6.2 Web Components - Upload & Cards

| í´ë˜ìŠ¤ | íŒŒì¼ | ì„¤ëª… |
|--------|------|------|
| `ValidationResult` | upload.py | íŒŒì¼ ê²€ì¦ ê²°ê³¼ |
| `FileUploadHandler` | upload.py | íŒŒì¼ ì—…ë¡œë“œ í•¸ë“¤ëŸ¬ |
| `MetricSummaryCard` | cards.py | ë©”íŠ¸ë¦­ ìš”ì•½ ì¹´ë“œ |
| `StatCard` | cards.py | í†µê³„ ì¹´ë“œ |

#### 4.6.3 Web Components - History

| í´ë˜ìŠ¤ | íŒŒì¼ | ì„¤ëª… |
|--------|------|------|
| `RunFilter` | history.py | ì‹¤í–‰ í•„í„° ì»´í¬ë„ŒíŠ¸ |
| `RunTable` | history.py | ì‹¤í–‰ í…Œì´ë¸” ì»´í¬ë„ŒíŠ¸ |
| `RunDetailPanel` | history.py | ì‹¤í–‰ ìƒì„¸ íŒ¨ë„ |
| `HistoryExporter` | history.py | íˆìŠ¤í† ë¦¬ ë‚´ë³´ë‚´ê¸° |
| `RunSearch` | history.py | ì‹¤í–‰ ê²€ìƒ‰ ì»´í¬ë„ŒíŠ¸ |

#### 4.6.4 Web Components - Other

| í´ë˜ìŠ¤ | íŒŒì¼ | ì„¤ëª… |
|--------|------|------|
| `RecentRunsList` | lists.py | ìµœê·¼ ì‹¤í–‰ ëª©ë¡ |
| `MetricSelector` | metrics.py | ë©”íŠ¸ë¦­ ì„ íƒê¸° |
| `EvaluationProgress` | progress.py | í‰ê°€ ì§„í–‰ë¥  í‘œì‹œ |
| `ProgressStep` | progress.py | ì§„í–‰ ë‹¨ê³„ |
| `DashboardStats` | stats.py | ëŒ€ì‹œë³´ë“œ í†µê³„ |
| `EvaluationConfig` | evaluate.py | í‰ê°€ ì„¤ì • |
| `EvaluationResult` | evaluate.py | í‰ê°€ ê²°ê³¼ í‘œì‹œ |

#### 4.6.5 Web Components - Reports

| í´ë˜ìŠ¤ | íŒŒì¼ | ì„¤ëª… |
|--------|------|------|
| `ReportConfig` | reports.py | ë¦¬í¬íŠ¸ ì„¤ì • |
| `ReportResult` | reports.py | ë¦¬í¬íŠ¸ ê²°ê³¼ |
| `ReportTemplate` | reports.py | ë¦¬í¬íŠ¸ í…œí”Œë¦¿ |
| `ReportGenerator` | reports.py | ë¦¬í¬íŠ¸ ìƒì„±ê¸° |
| `ReportDownloader` | reports.py | ë¦¬í¬íŠ¸ ë‹¤ìš´ë¡œë” |
| `RunSelector` | reports.py | ì‹¤í–‰ ì„ íƒê¸° |
| `ReportPreview` | reports.py | ë¦¬í¬íŠ¸ ë¯¸ë¦¬ë³´ê¸° |

---

### 4.7 Adapters Layer - Outbound LLM (10 í´ë˜ìŠ¤)

| í´ë˜ìŠ¤ | íŒŒì¼ | ì„¤ëª… |
|--------|------|------|
| `BaseLLMAdapter` | base.py | LLM ì–´ëŒ‘í„° ê¸°ë³¸ í´ë˜ìŠ¤ |
| `LLMConfigurationError` | base.py | LLM ì„¤ì • ì˜¤ë¥˜ |
| `TokenUsage` | base.py | í† í° ì‚¬ìš©ëŸ‰ |
| `OpenAIAdapter` | openai_adapter.py | OpenAI ì–´ëŒ‘í„° |
| `TokenTrackingAsyncOpenAI` | openai_adapter.py | í† í° ì¶”ì  AsyncOpenAI |
| `OpenAIEmbeddingsWithLegacy` | openai_adapter.py | ë ˆê±°ì‹œ ì„ë² ë”© ì§€ì› |
| `AzureOpenAIAdapter` | azure_adapter.py | Azure OpenAI ì–´ëŒ‘í„° |
| `AnthropicAdapter` | anthropic_adapter.py | Anthropic ì–´ëŒ‘í„° |
| `ThinkingTokenTrackingAsyncAnthropic` | anthropic_adapter.py | Thinking í† í° ì¶”ì  |
| `OllamaAdapter` | ollama_adapter.py | Ollama ì–´ëŒ‘í„° |
| `ThinkingTokenTrackingAsyncOpenAI` | ollama_adapter.py | Thinking í† í° ì¶”ì  (Ollama) |
| `vLLMAdapter` | vllm_adapter.py | vLLM ì–´ëŒ‘í„° |
| `LLMRelationAugmenter` | llm_relation_augmenter.py | LLM ê¸°ë°˜ ê´€ê³„ ì¦ê°• |
| `InstructorFactory` | instructor_factory.py | Instructor êµ¬ì¡°í™” ì¶œë ¥ íŒ©í† ë¦¬ |

---

### 4.8 Adapters Layer - Outbound Storage (4 í´ë˜ìŠ¤)

| í´ë˜ìŠ¤ | íŒŒì¼ | ì„¤ëª… |
|--------|------|------|
| `BaseSQLStorageAdapter` | base_sql.py | SQL ì €ì¥ì†Œ ê¸°ë³¸ í´ë˜ìŠ¤ |
| `SQLQueries` | base_sql.py | SQL ì¿¼ë¦¬ ì •ì˜ |
| `SQLiteStorageAdapter` | sqlite_adapter.py | SQLite ì €ì¥ì†Œ ì–´ëŒ‘í„° |
| `PostgreSQLStorageAdapter` | postgres_adapter.py | PostgreSQL ì €ì¥ì†Œ ì–´ëŒ‘í„° |

---

### 4.9 Adapters Layer - Outbound Tracker (3 í´ë˜ìŠ¤)

| í´ë˜ìŠ¤ | íŒŒì¼ | ì„¤ëª… |
|--------|------|------|
| `LangfuseAdapter` | langfuse_adapter.py | Langfuse ì¶”ì  ì–´ëŒ‘í„° |
| `MLflowAdapter` | mlflow_adapter.py | MLflow ì¶”ì  ì–´ëŒ‘í„° |
| `PhoenixAdapter` | phoenix_adapter.py | Phoenix/OpenTelemetry ì–´ëŒ‘í„° |

---

### 4.10 Adapters Layer - Outbound Dataset (4 í´ë˜ìŠ¤)

| í´ë˜ìŠ¤ | íŒŒì¼ | ì„¤ëª… |
|--------|------|------|
| `BaseDatasetLoader` | base.py | ë°ì´í„°ì…‹ ë¡œë” ê¸°ë³¸ í´ë˜ìŠ¤ |
| `CSVDatasetLoader` | csv_loader.py | CSV ë¡œë” |
| `ExcelDatasetLoader` | excel_loader.py | Excel ë¡œë” |
| `JSONDatasetLoader` | json_loader.py | JSON ë¡œë” |
| `StreamingConfig` | streaming_loader.py | ìŠ¤íŠ¸ë¦¬ë° ë¡œë” ì„¤ì • |
| `StreamingStats` | streaming_loader.py | ìŠ¤íŠ¸ë¦¬ë° ì§„í–‰ í†µê³„ |
| `StreamingTestCaseIterator` | streaming_loader.py | ì²­í¬ ê¸°ë°˜ TestCase ì´í„°ë ˆì´í„° |
| `StreamingDatasetLoader` | streaming_loader.py | ìŠ¤íŠ¸ë¦¬ë° ë¡œë” ì§„ì…ì  |
| `StreamingCSVLoader` | streaming_loader.py | CSV ìŠ¤íŠ¸ë¦¬ë° ë¡œë” |

---

### 4.11 Adapters Layer - Outbound Korean NLP (18 í´ë˜ìŠ¤)

| í´ë˜ìŠ¤ | íŒŒì¼ | ì„¤ëª… |
|--------|------|------|
| `KiwiTokenizer` | kiwi_tokenizer.py | Kiwi í•œêµ­ì–´ í† í¬ë‚˜ì´ì € |
| `Token` | kiwi_tokenizer.py | í† í° |
| `KoreanBM25Retriever` | bm25_retriever.py | BM25 ê²€ìƒ‰ê¸° |
| `RetrievalResult` | bm25_retriever.py | ê²€ìƒ‰ ê²°ê³¼ |
| `KoreanDenseRetriever` | dense_retriever.py | Dense ê²€ìƒ‰ê¸° |
| `DenseRetrievalResult` | dense_retriever.py | Dense ê²€ìƒ‰ ê²°ê³¼ |
| `DeviceType` | dense_retriever.py | ë””ë°”ì´ìŠ¤ íƒ€ì… |
| `KoreanHybridRetriever` | hybrid_retriever.py | í•˜ì´ë¸Œë¦¬ë“œ ê²€ìƒ‰ê¸° |
| `HybridResult` | hybrid_retriever.py | í•˜ì´ë¸Œë¦¬ë“œ ê²€ìƒ‰ ê²°ê³¼ |
| `FusionMethod` | hybrid_retriever.py | í“¨ì „ ë°©ë²• |
| `KoreanDocumentChunker` | document_chunker.py | ë¬¸ì„œ ì²­ì»¤ |
| `ParagraphChunker` | document_chunker.py | ë‹¨ë½ ì²­ì»¤ |
| `Chunk` | document_chunker.py | ì²­í¬ |
| `KoreanFaithfulnessChecker` | korean_evaluation.py | í•œêµ­ì–´ ì¶©ì‹¤ë„ ê²€ì‚¬ê¸° |
| `KoreanSemanticSimilarity` | korean_evaluation.py | í•œêµ­ì–´ ì˜ë¯¸ ìœ ì‚¬ë„ |
| `FaithfulnessResult` | korean_evaluation.py | ì¶©ì‹¤ë„ ê²°ê³¼ |
| `ClaimVerification` | korean_evaluation.py | í´ë ˆì„ ê²€ì¦ |
| `NumberWithUnit` | korean_evaluation.py | ë‹¨ìœ„ ìˆ«ì |
| `SemanticSimilarityResult` | korean_evaluation.py | ì˜ë¯¸ ìœ ì‚¬ë„ ê²°ê³¼ |
| `KoreanNLPToolkit` | toolkit.py | í•œêµ­ì–´ NLP íˆ´í‚· |
| `_RetrieverWrapper` | toolkit.py | ê²€ìƒ‰ê¸° ë˜í¼ |

---

### 4.12 Adapters Layer - Outbound Analysis (13 í´ë˜ìŠ¤)

#### 4.12.1 Analysis Adapters

| í´ë˜ìŠ¤ | íŒŒì¼ | ì„¤ëª… |
|--------|------|------|
| `BaseAnalysisAdapter` | common.py | ë¶„ì„ ì–´ëŒ‘í„° ê¸°ë³¸ í´ë˜ìŠ¤ |
| `AnalysisDataProcessor` | common.py | ë¶„ì„ ë°ì´í„° ì²˜ë¦¬ê¸° |
| `StatisticalAnalysisAdapter` | statistical_adapter.py | í†µê³„ ë¶„ì„ ì–´ëŒ‘í„° |
| `NLPAnalysisAdapter` | nlp_adapter.py | NLP ë¶„ì„ ì–´ëŒ‘í„° |
| `CausalAnalysisAdapter` | causal_adapter.py | ì¸ê³¼ ë¶„ì„ ì–´ëŒ‘í„° |

#### 4.12.2 Analysis Modules

| í´ë˜ìŠ¤ | íŒŒì¼ | ì„¤ëª… |
|--------|------|------|
| `BaseAnalysisModule` | base_module.py | ë¶„ì„ ëª¨ë“ˆ ê¸°ë³¸ í´ë˜ìŠ¤ |
| `DataLoaderModule` | data_loader_module.py | ë°ì´í„° ë¡œë” ëª¨ë“ˆ |
| `StatisticalAnalyzerModule` | statistical_analyzer_module.py | í†µê³„ ë¶„ì„ ëª¨ë“ˆ |
| `NLPAnalyzerModule` | nlp_analyzer_module.py | NLP ë¶„ì„ ëª¨ë“ˆ |
| `CausalAnalyzerModule` | causal_analyzer_module.py | ì¸ê³¼ ë¶„ì„ ëª¨ë“ˆ |
| `SummaryReportModule` | summary_report_module.py | ìš”ì•½ ë¦¬í¬íŠ¸ ëª¨ë“ˆ |
| `AnalysisReportModule` | analysis_report_module.py | ë¶„ì„ ë¦¬í¬íŠ¸ ëª¨ë“ˆ |
| `ComparisonReportModule` | comparison_report_module.py | ë¹„êµ ë¦¬í¬íŠ¸ ëª¨ë“ˆ |
| `VerificationReportModule` | verification_report_module.py | ê²€ì¦ ë¦¬í¬íŠ¸ ëª¨ë“ˆ |

---

### 4.13 Adapters Layer - Outbound Improvement (10 í´ë˜ìŠ¤)

| í´ë˜ìŠ¤ | íŒŒì¼ | ì„¤ëª… |
|--------|------|------|
| `PatternDetector` | pattern_detector.py | íŒ¨í„´ íƒì§€ê¸° |
| `FeatureVector` | pattern_detector.py | íŠ¹ì§• ë²¡í„° |
| `PlaybookLoader` | playbook_loader.py | í”Œë ˆì´ë¶ ë¡œë” |
| `Playbook` | playbook_loader.py | í”Œë ˆì´ë¶ |
| `MetricPlaybook` | playbook_loader.py | ë©”íŠ¸ë¦­ í”Œë ˆì´ë¶ |
| `PatternDefinition` | playbook_loader.py | íŒ¨í„´ ì •ì˜ |
| `ActionDefinition` | playbook_loader.py | ì•¡ì…˜ ì •ì˜ |
| `DetectionRule` | playbook_loader.py | íƒì§€ ê·œì¹™ |
| `InsightGenerator` | insight_generator.py | ì¸ì‚¬ì´íŠ¸ ìƒì„±ê¸° |
| `LLMInsight` | insight_generator.py | LLM ì¸ì‚¬ì´íŠ¸ |
| `BatchPatternInsight` | insight_generator.py | ë°°ì¹˜ íŒ¨í„´ ì¸ì‚¬ì´íŠ¸ |

---

### 4.14 Adapters Layer - Outbound Report (4 í´ë˜ìŠ¤)

| í´ë˜ìŠ¤ | íŒŒì¼ | ì„¤ëª… |
|--------|------|------|
| `LLMReportGenerator` | llm_report_generator.py | LLM ë¦¬í¬íŠ¸ ìƒì„±ê¸° |
| `LLMReport` | llm_report_generator.py | LLM ë¦¬í¬íŠ¸ |
| `LLMReportSection` | llm_report_generator.py | LLM ë¦¬í¬íŠ¸ ì„¹ì…˜ |
| `MarkdownReportAdapter` | markdown_adapter.py | ë§ˆí¬ë‹¤ìš´ ë¦¬í¬íŠ¸ ì–´ëŒ‘í„° |

---

### 4.15 Adapters Layer - Outbound Other (6 í´ë˜ìŠ¤)

| í´ë˜ìŠ¤ | íŒŒì¼ | ì„¤ëª… |
|--------|------|------|
| `SQLiteDomainMemoryAdapter` | sqlite_adapter.py | SQLite ë„ë©”ì¸ ë©”ëª¨ë¦¬ ì–´ëŒ‘í„° |
| `MemoryCacheAdapter` | memory_cache.py | ë‹¨ìˆœ LRU ìºì‹œ |
| `HybridCache` | hybrid_cache.py | Hot/Cold 2-tier ìºì‹œ + Prefetch |
| `NetworkXKGAdapter` | kg/networkx_adapter.py | NetworkX ê¸°ë°˜ KG ì–´ëŒ‘í„° |
| `GraphRAGRetriever` | kg/graph_rag_retriever.py | Graph-RAG ê²€ìƒ‰ê¸° |
| `ParallelKGBuilder` | kg/parallel_kg_builder.py | ë³‘ë ¬ KG ë¹Œë” |

**Observability Helpers**
- `PhoenixSyncService`, `PhoenixDatasetInfo`, `PhoenixExperimentInfo` (`adapters/outbound/phoenix/sync_service.py`)ëŠ” Phoenix dataset/experiment APIë¥¼ ê°ì‹¸ê³  CLI `--phoenix-*` ì˜µì…˜ê³¼ í•¨ê»˜ ì‚¬ìš©ë©ë‹ˆë‹¤.
- `reports/release_notes.py`ëŠ” CLI/PR/READMEìš© ìš”ì•½ ë¦¬í¬íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

---

### 4.16 Config Layer (14 í´ë˜ìŠ¤)

| í´ë˜ìŠ¤ | íŒŒì¼ | ì„¤ëª… |
|--------|------|------|
| `Settings` | settings.py | í™˜ê²½ ì„¤ì • (pydantic-settings) |
| `LLMConfig` | model_config.py | LLM ì„¤ì • |
| `EmbeddingConfig` | model_config.py | ì„ë² ë”© ì„¤ì • |
| `ProfileConfig` | model_config.py | í”„ë¡œí•„ ì„¤ì • |
| `ModelConfig` | model_config.py | ëª¨ë¸ ì„¤ì • |
| `LanguageConfig` | domain_config.py | ì–¸ì–´ ì„¤ì • |
| `FactualConfig` | domain_config.py | ì‚¬ì‹¤ ê¸°ì–µ ì„¤ì • |
| `ExperientialConfig` | domain_config.py | ê²½í—˜ ê¸°ì–µ ì„¤ì • |
| `WorkingConfig` | domain_config.py | ì‘ì—… ê¸°ì–µ ì„¤ì • |
| `LearningConfig` | domain_config.py | í•™ìŠµ ì„¤ì • |
| `DomainMetadata` | domain_config.py | ë„ë©”ì¸ ë©”íƒ€ë°ì´í„° |
| `DomainMemoryConfig` | domain_config.py | ë„ë©”ì¸ ë©”ëª¨ë¦¬ ì„¤ì • |
| `AgentMode` | agent_types.py | ì—ì´ì „íŠ¸ ëª¨ë“œ Enum |
| `AgentType` | agent_types.py | ì—ì´ì „íŠ¸ íƒ€ì… Enum |
| `AgentConfig` | agent_types.py | ì—ì´ì „íŠ¸ ì„¤ì • |

- **Automation Support**: `scripts/regression_runner.py`ì˜ `RegressionSuite`/`RegressionResult`ì™€ `agent/` í´ë”ì˜ `AgentState`/`AgentMemory` êµ¬ì¡°ëŠ” CLI `evalvault agent â€¦` ë° CI íšŒê·€ íŒŒì´í”„ë¼ì¸ì—ì„œ ì¬ì‚¬ìš©ë©ë‹ˆë‹¤.

---

### 4.17 ì£¼ìš” ì„œë¹„ìŠ¤ ìƒì„¸ êµ¬ì¡°

#### RagasEvaluator (domain/services/evaluator.py)

```python
class RagasEvaluator:
    """Ragas ê¸°ë°˜ RAG í‰ê°€ ì„œë¹„ìŠ¤."""

    METRIC_MAP: dict[str, type]       # Ragas ë©”íŠ¸ë¦­ ë§¤í•‘
    CUSTOM_METRIC_MAP: dict[str, type] # ì»¤ìŠ¤í…€ ë©”íŠ¸ë¦­ ë§¤í•‘

    async def evaluate(dataset, metrics, llm, thresholds) -> EvaluationRun:
        """í‰ê°€ ì‹¤í–‰: ì„ê³„ê°’ í•´ì„ â†’ Ragas ì‹¤í–‰ â†’ ê²°ê³¼ ì§‘ê³„"""

    async def _evaluate_with_ragas(...) -> list[TestCaseEvalResult]:
        """Ragas ë©”íŠ¸ë¦­ ì‹¤í–‰"""

    def _aggregate_results(...) -> EvaluationRun:
        """ê²°ê³¼ ì§‘ê³„ ë° EvaluationRun ìƒì„±"""
```

#### PipelineOrchestrator (domain/services/pipeline_orchestrator.py)

```python
class PipelineOrchestrator:
    """DAG ê¸°ë°˜ ë¶„ì„ íŒŒì´í”„ë¼ì¸ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„°."""

    module_catalog: ModuleCatalog
    template_registry: PipelineTemplateRegistry
    intent_classifier: KeywordIntentClassifier

    def register_module(module: AnalysisModulePort) -> None:
        """ëª¨ë“ˆ ë“±ë¡"""

    def build_pipeline(intent, context) -> AnalysisPipeline:
        """í…œí”Œë¦¿ ê¸°ë°˜ íŒŒì´í”„ë¼ì¸ ë¹Œë“œ"""

    async def execute_pipeline(pipeline, context) -> PipelineResult:
        """DAG í† í´ë¡œì§€ ì •ë ¬ â†’ ì˜ì¡´ì„± ìˆœì„œ ì‹¤í–‰ â†’ ê²°ê³¼ ì§‘ê³„"""
```

#### DomainLearningHook (domain/services/domain_learning_hook.py)

```python
class DomainLearningHook:
    """ë„ë©”ì¸ í•™ìŠµ í›… - 3ê³„ì¸µ ë©”ëª¨ë¦¬ í˜•ì„±."""

    async def on_evaluation_complete(evaluation_run, domain, language) -> dict:
        """í‰ê°€ ì™„ë£Œ í›„ Factual/Experiential/Behavior ë©”ëª¨ë¦¬ í˜•ì„±"""

    def extract_and_save_facts(...) -> list[FactualFact]:
        """SPO íŠ¸ë¦¬í”Œ ì¶”ì¶œ ë° ì €ì¥"""

    def extract_and_save_patterns(...) -> LearningMemory:
        """ì„±ê³µ/ì‹¤íŒ¨ íŒ¨í„´ ì¶”ì¶œ ë° ì €ì¥"""

    def extract_and_save_behaviors(...) -> list[BehaviorEntry]:
        """ì¬ì‚¬ìš© í–‰ë™ íŒ¨í„´ ì¶”ì¶œ ë° ì €ì¥"""
```

---

## ì£¼ìš” ì‹œë‚˜ë¦¬ì˜¤

### ì‹œë‚˜ë¦¬ì˜¤ 1: í‰ê°€ ì‹¤í–‰ (Evaluation Execution)

```
1. ì‚¬ìš©ìê°€ CLIì—ì„œ í‰ê°€ ëª…ë ¹ ì‹¤í–‰
   â””â”€> CLI Adapterê°€ ëª…ë ¹ íŒŒì‹±

2. CLI Adapterê°€ Dataset Loader í˜¸ì¶œ
   â””â”€> CSV/JSON/Excel íŒŒì¼ì„ Dataset ì—”í‹°í‹°ë¡œ ë³€í™˜

3. CLI Adapterê°€ LLM Adapter ìƒì„±
   â””â”€> ì„¤ì •ì— ë”°ë¼ OpenAI/Anthropic/Ollama/vLLM ì„ íƒ

4. CLI Adapterê°€ RagasEvaluator.evaluate() í˜¸ì¶œ
   â””â”€> ë„ë©”ì¸ ì„œë¹„ìŠ¤ê°€ í‰ê°€ ì‹¤í–‰

5. RagasEvaluatorê°€ LLMPortë¥¼ í†µí•´ LLM í˜¸ì¶œ
   â””â”€> ì‹¤ì œ LLM API í†µì‹ 

6. RagasEvaluatorê°€ ê²°ê³¼ ì§‘ê³„
   â””â”€> EvaluationRun ì—”í‹°í‹° ìƒì„±

7. CLI Adapterê°€ ê²°ê³¼ ì¶œë ¥
   â””â”€> ì‚¬ìš©ìì—ê²Œ ê²°ê³¼ í‘œì‹œ

8. (ì„ íƒ) Storage Adapterê°€ ê²°ê³¼ ì €ì¥
   â””â”€> SQLite/PostgreSQLì— ì €ì¥

9. (ì„ íƒ) Tracker Adapterê°€ ì¶”ì  ë°ì´í„° ì „ì†¡
   â””â”€> Langfuse/MLflowì— ê¸°ë¡
```

### ì‹œë‚˜ë¦¬ì˜¤ 2: ë¶„ì„ íŒŒì´í”„ë¼ì¸ ì‹¤í–‰ (Analysis Pipeline)

```
1. ì‚¬ìš©ìê°€ "ìš”ì•½í•´ì¤˜" ì¿¼ë¦¬ ì…ë ¥
   â””â”€> CLI/Web Adapterê°€ ì¿¼ë¦¬ ìˆ˜ì‹ 

2. PipelineOrchestratorê°€ IntentClassifier í˜¸ì¶œ
   â””â”€> "ìš”ì•½í•´ì¤˜" â†’ GENERATE_SUMMARY ì˜ë„ ì¶”ì¶œ

3. PipelineOrchestratorê°€ TemplateRegistryì—ì„œ í…œí”Œë¦¿ ì¡°íšŒ
   â””â”€> GENERATE_SUMMARY í…œí”Œë¦¿ ë°˜í™˜

4. PipelineOrchestratorê°€ AnalysisPipeline ë¹Œë“œ
   â””â”€> ë…¸ë“œ ë° ì—£ì§€ êµ¬ì„±

5. PipelineOrchestratorê°€ íŒŒì´í”„ë¼ì¸ ì‹¤í–‰
   â””â”€> DAG ìˆœì„œëŒ€ë¡œ ëª¨ë“ˆ ì‹¤í–‰

6. ê° AnalysisModuleì´ ì‹¤í–‰
   â””â”€> Statistical â†’ NLP â†’ Report ìˆœì„œ

7. PipelineResult ë°˜í™˜
   â””â”€> ìµœì¢… ë¦¬í¬íŠ¸ ìƒì„±
```

### ì‹œë‚˜ë¦¬ì˜¤ 3: ë„ë©”ì¸ ë©”ëª¨ë¦¬ í˜•ì„± (Domain Memory Formation)

```
1. í‰ê°€ ì™„ë£Œ í›„ DomainLearningHook í˜¸ì¶œ
   â””â”€> on_evaluation_complete() ì‹¤í–‰

2. Fact Extraction
   â””â”€> ë†’ì€ ì‹ ë¢°ë„ í‰ê°€ ê²°ê³¼ì—ì„œ SPO íŠ¸ë¦¬í”Œ ì¶”ì¶œ
   â””â”€> DomainMemoryPort.save_fact() í˜¸ì¶œ

3. Pattern Extraction
   â””â”€> ì„±ê³µ/ì‹¤íŒ¨ íŒ¨í„´ ë¶„ì„
   â””â”€> DomainMemoryPort.save_learning() í˜¸ì¶œ

4. Behavior Extraction
   â””â”€> ì¬ì‚¬ìš© ê°€ëŠ¥í•œ í–‰ë™ íŒ¨í„´ ì¶”ì¶œ
   â””â”€> DomainMemoryPort.save_behavior() í˜¸ì¶œ

5. í–¥í›„ í‰ê°€ì—ì„œ ë©”ëª¨ë¦¬ í™œìš©
   â””â”€> hybrid_search()ë¡œ ê´€ë ¨ ë©”ëª¨ë¦¬ ê²€ìƒ‰
   â””â”€> í‰ê°€ ì»¨í…ìŠ¤íŠ¸ì— ì ìš©
```

### ì‹œë‚˜ë¦¬ì˜¤ 4: ê°œì„  ê°€ì´ë“œ ìƒì„± (Improvement Guide)

```
1. ImprovementGuideService.generate_report() í˜¸ì¶œ
   â””â”€> EvaluationRun ì…ë ¥

2. PatternDetectorê°€ ê·œì¹™ ê¸°ë°˜ íƒì§€
   â””â”€> í”Œë ˆì´ë¶ ê·œì¹™ìœ¼ë¡œ íŒ¨í„´ íƒì§€
   â””â”€> PatternEvidence ìƒì„±

3. InsightGeneratorê°€ LLM ê¸°ë°˜ ë¶„ì„
   â””â”€> ì‹¤íŒ¨ ìƒ˜í”Œ ì¼ê´„ ë¶„ì„
   â””â”€> ClaimImprovementProtocol ìƒì„±

4. ë‘ ê²°ê³¼ë¥¼ í•˜ì´ë¸Œë¦¬ë“œë¡œ í†µí•©
   â””â”€> ImprovementReport ìƒì„±
   â””â”€> ìš°ì„ ìˆœìœ„ ì•¡ì…˜ ê²°ì •

5. ë¦¬í¬íŠ¸ ë°˜í™˜
   â””â”€> ì‚¬ìš©ìì—ê²Œ ê°œì„  ê°€ì´ë“œ ì œê³µ
```

### ì‹œë‚˜ë¦¬ì˜¤ 5: ê´€ì¸¡ì„± & Phoenix íŠ¸ë ˆì´ì‹±

```
1. CLIì—ì„œ --phoenix-enabled / --tracker phoenix ì˜µì…˜ ì§€ì •
   â””â”€> config/phoenix_support.ensure_phoenix_instrumentation() í˜¸ì¶œ

2. OpenTelemetry TracerProvider ì´ˆê¸°í™”
   â””â”€> LangChain/OpenAI ìë™ ê³„ì¸¡, instrumentation_span ì‚¬ìš© ê°€ëŠ¥

3. Evaluation ì‹¤í–‰ ì¤‘ MemoryAwareEvaluator/DatasetLoader/PhoenixSyncServiceê°€ instrumentation_spanìœ¼ë¡œ ì„¸ë¶€ span ê¸°ë¡
   â””â”€> domain/entities/rag_trace.RAGTraceData ê°€ span attributes ìƒì„±

4. TrackerPort(PhoenixAdapter)ê°€ EvaluationRun/TestCaseResultë¥¼ span/scoreë¡œ ë³€í™˜í•´ Phoenixì— ì—…ë¡œë“œ
   â””â”€> prompt manifest diff, Phoenix dataset/experiment ë§í¬ê°€ metadataì— ì €ì¥

5. reports/release_notes.pyê°€ Phoenix ë§í¬ì™€ ë©”íŠ¸ë¦­ ìš”ì•½ì„ Markdownìœ¼ë¡œ ìƒì„±
   â””â”€> README/Slack/PRì— ì²¨ë¶€
```

### ì‹œë‚˜ë¦¬ì˜¤ 6: ì—ì´ì „íŠ¸ Â· íšŒê·€ ìë™í™”

```
1. ê°œë°œìê°€ evalvault agent run architecture --project-dir .. ì‹¤í–‰
   â””â”€> agent/config.py, agent_types.AgentConfig ë¡œ agent/ í´ë” ì´ˆê¸°í™”

2. agent/main.py ê°€ claude-agent-sdk ì„¸ì…˜ì„ ì—´ê³  agent/memory/ í•˜ìœ„ì— ë¡œê·¸/ê²°ì • ê¸°ë¡
   â””â”€> AgentMemory/AgentState ê°€ ê³µìœ  ì»¨í…ìŠ¤íŠ¸ ì œê³µ

3. scripts/regression_runner.run_regression_suites() ê°€ config/regressions/*.json ë¡œ ì •ì˜ëœ RegressionSuite ë¥¼ ì‹¤í–‰
   â””â”€> subprocess ë¡œ CLI ëª…ë ¹/pytest/ruff ë“±ì„ ì‹¤í–‰í•˜ê³  RegressionResult ë¡œ stdout/stderr ìº¡ì²˜

4. íšŒê·€ ì‹¤íŒ¨ ì‹œ halt_on_failure í”Œë˜ê·¸ì— ë”°ë¼ ì¦‰ì‹œ ì¤‘ë‹¨í•˜ê³  ê²°ê³¼ë¥¼ agent/ ë˜ëŠ” CI ë¡œ ì „ë‹¬
```

---

## ì•„í‚¤í…ì²˜ ì›ì¹™

### 1. ì˜ì¡´ì„± ê·œì¹™ (Dependency Rule)

```
ì˜ì¡´ì„± ë°©í–¥: ì™¸ë¶€ â†’ ë‚´ë¶€
Adapters â†’ Ports â†’ Domain
```

- ì–´ëŒ‘í„°ëŠ” í¬íŠ¸ì— ì˜ì¡´
- ë„ë©”ì¸ì€ í¬íŠ¸ì—ë§Œ ì˜ì¡´ (ì–´ëŒ‘í„°ì— ì§ì ‘ ì˜ì¡´í•˜ì§€ ì•ŠìŒ)
- í¬íŠ¸ëŠ” ë„ë©”ì¸ì— ì†í•˜ì§€ë§Œ ë„ë©”ì¸ ì„œë¹„ìŠ¤ì— ì˜ì¡´í•˜ì§€ ì•ŠìŒ

### 2. ë‹¨ì¼ ì±…ì„ ì›ì¹™ (Single Responsibility)

- ê° ì»´í¬ë„ŒíŠ¸ëŠ” í•˜ë‚˜ì˜ ëª…í™•í•œ ì±…ì„ë§Œ ê°€ì§
- ì˜ˆ: `RagasEvaluator`ëŠ” í‰ê°€ ì‹¤í–‰ë§Œ, `AnalysisService`ëŠ” ë¶„ì„ë§Œ

### 3. ê°œë°©/íì‡„ ì›ì¹™ (Open/Closed)

- í™•ì¥ì—ëŠ” ì—´ë ¤ìˆê³  ìˆ˜ì •ì—ëŠ” ë‹«í˜€ìˆìŒ
- ìƒˆë¡œìš´ LLM ì œê³µì ì¶”ê°€: ì–´ëŒ‘í„°ë§Œ ì¶”ê°€
- ìƒˆë¡œìš´ ë¶„ì„ ëª¨ë“ˆ ì¶”ê°€: ëª¨ë“ˆë§Œ ë“±ë¡

### 4. ì˜ì¡´ì„± ì—­ì „ ì›ì¹™ (Dependency Inversion)

- ê³ ìˆ˜ì¤€ ëª¨ë“ˆì€ ì €ìˆ˜ì¤€ ëª¨ë“ˆì— ì˜ì¡´í•˜ì§€ ì•ŠìŒ
- ë‘˜ ë‹¤ ì¶”ìƒí™”(í¬íŠ¸)ì— ì˜ì¡´
- ì˜ˆ: `RagasEvaluator`ëŠ” `LLMPort` ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´

---

## ê¸°ìˆ  ìŠ¤íƒ ìš”ì•½

| ê³„ì¸µ | ê¸°ìˆ  |
|------|------|
| **ì–¸ì–´** | Python 3.12+ |
| **CLI í”„ë ˆì„ì›Œí¬** | Typer |
| **Web UI** | React + FastAPI (ë©”ì¸) + Streamlit(ì˜µì…˜) |
| **í‰ê°€ í”„ë ˆì„ì›Œí¬** | Ragas 0.4.x |
| **ë°ì´í„°ë² ì´ìŠ¤** | SQLite (ê¸°ë³¸), PostgreSQL (ì„ íƒ) |
| **ì¶”ì  ì‹œìŠ¤í…œ** | Langfuse, Phoenix, MLflow |
| **LLM API** | OpenAI, Anthropic, Azure OpenAI, Ollama, vLLM |
| **ì„¤ì • ê´€ë¦¬** | Pydantic Settings |
| **íƒ€ì… ê²€ì¦** | Python typing, Protocol |

---

## ì°¸ê³  ìë£Œ

- **C4 Model**: https://c4model.com/
- **Hexagonal Architecture**: Alistair Cockburn
- **Clean Architecture**: Robert C. Martin
- **Domain-Driven Design**: Eric Evans

---

**ë¬¸ì„œ ë²„ì „**: 2.0
**ìµœì¢… ì—…ë°ì´íŠ¸**: 2026-01-06
**ì‘ì„±ì**: EvalVault Team

### ë³€ê²½ ì´ë ¥

| ë²„ì „ | ë‚ ì§œ | ë³€ê²½ ë‚´ìš© |
|------|------|-----------|
| 1.0 | 2026-01 | ì´ˆê¸° C4 ë¬¸ì„œ ì‘ì„± |
| 2.0 | 2026-01-02 | Level 4 í´ë˜ìŠ¤ ì¹´íƒˆë¡œê·¸ ì „ë©´ í˜„í–‰í™” (200+ í´ë˜ìŠ¤ ë¬¸ì„œí™”) |
